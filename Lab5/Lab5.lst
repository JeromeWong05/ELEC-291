0000              1   ;--------------------------------------------------------
0000              2   ; File Created by C51
0000              3   ; Version 1.0.0 #1170 (Feb 16 2022) (MSVC)
0000              4   ; This file was generated Thu Mar 06 08:22:09 2025
0000              5   ;--------------------------------------------------------
                  5   $name Lab5
                  6   $optc51 --model-small
                  7   $printf_float
0000              9            R_DSEG    segment data
0000             10            R_CSEG    segment code
0000             11            R_BSEG    segment bit
0000             12            R_XSEG    segment xdata
0000             13            R_PSEG    segment xdata
0000             14            R_ISEG    segment idata
0000             15            R_OSEG    segment data overlay
0000             16            BIT_BANK  segment data overlay
0000             17            R_HOME    segment code
0000             18            R_GSINIT  segment code
0000             19            R_IXSEG   segment xdata
0000             20            R_CONST   segment code
0000             21            R_XINIT   segment code
0000             22            R_DINIT   segment code
0000             23   
0000             24   ;--------------------------------------------------------
0000             25   ; Public variables in this module
0000             26   ;--------------------------------------------------------
0000             27            public _InitPinADC_PARM_2
0000             28            public _main
0000             29            public _DisplayMenu
0000             30            public _ReadDiff
0000             31            public _ReadPeak
0000             32            public _ReadPeriod
0000             33            public _Volts_at_Pin
0000             34            public _ADC_at_Pin
0000             35            public _InitPinADC
0000             36            public _InitADC
0000             37            public _Set_Pin_Zero
0000             38            public _Set_Pin_One
0000             39            public _Set_Pin_Output
0000             40            public _Set_Pin_Input
0000             41            public _ReadButtonLongPress
0000             42            public _ReadButtonDebounced
0000             43            public _Read_Pin
0000             44            public _LCDprint
0000             45            public _LCD_4BIT
0000             46            public _WriteCommand
0000             47            public _WriteData
0000             48            public _LCD_byte
0000             49            public _LCD_pulse
0000             50            public _TIMER0_Init
0000             51            public _waitus
0000             52            public _waitms
0000             53            public _Timer3us
0000             54            public __c51_external_startup
0000             55            public _Saved_units
0000             56            public _Saved_freq
0000             57            public _Saved_phase
0000             58            public _Saved_vsig
0000             59            public _Saved_vref
0000             60            public _frequency
0000             61            public _phase_diff
0000             62            public _vpeak
0000             63            public _overflow_count
0000             64            public _LCDprint_PARM_4
0000             65            public _DisplayMenu_PARM_2
0000             66            public _ReadPeak_PARM_2
0000             67            public _LCDprint_PARM_3
0000             68            public _LCDprint_PARM_2
0000             69   ;--------------------------------------------------------
0000             70   ; Special Function Registers
0000             71   ;--------------------------------------------------------
0000             72   _ACC            DATA 0xe0
0000             73   _ADC0ASAH       DATA 0xb6
0000             74   _ADC0ASAL       DATA 0xb5
0000             75   _ADC0ASCF       DATA 0xa1
0000             76   _ADC0ASCT       DATA 0xc7
0000             77   _ADC0CF0        DATA 0xbc
0000             78   _ADC0CF1        DATA 0xb9
0000             79   _ADC0CF2        DATA 0xdf
0000             80   _ADC0CN0        DATA 0xe8
0000             81   _ADC0CN1        DATA 0xb2
0000             82   _ADC0CN2        DATA 0xb3
0000             83   _ADC0GTH        DATA 0xc4
0000             84   _ADC0GTL        DATA 0xc3
0000             85   _ADC0H          DATA 0xbe
0000             86   _ADC0L          DATA 0xbd
0000             87   _ADC0LTH        DATA 0xc6
0000             88   _ADC0LTL        DATA 0xc5
0000             89   _ADC0MX         DATA 0xbb
0000             90   _B              DATA 0xf0
0000             91   _CKCON0         DATA 0x8e
0000             92   _CKCON1         DATA 0xa6
0000             93   _CLEN0          DATA 0xc6
0000             94   _CLIE0          DATA 0xc7
0000             95   _CLIF0          DATA 0xe8
0000             96   _CLKSEL         DATA 0xa9
0000             97   _CLOUT0         DATA 0xd1
0000             98   _CLU0CF         DATA 0xb1
0000             99   _CLU0FN         DATA 0xaf
0000            100   _CLU0MX         DATA 0x84
0000            101   _CLU1CF         DATA 0xb3
0000            102   _CLU1FN         DATA 0xb2
0000            103   _CLU1MX         DATA 0x85
0000            104   _CLU2CF         DATA 0xb6
0000            105   _CLU2FN         DATA 0xb5
0000            106   _CLU2MX         DATA 0x91
0000            107   _CLU3CF         DATA 0xbf
0000            108   _CLU3FN         DATA 0xbe
0000            109   _CLU3MX         DATA 0xae
0000            110   _CMP0CN0        DATA 0x9b
0000            111   _CMP0CN1        DATA 0x99
0000            112   _CMP0MD         DATA 0x9d
0000            113   _CMP0MX         DATA 0x9f
0000            114   _CMP1CN0        DATA 0xbf
0000            115   _CMP1CN1        DATA 0xac
0000            116   _CMP1MD         DATA 0xab
0000            117   _CMP1MX         DATA 0xaa
0000            118   _CRC0CN0        DATA 0xce
0000            119   _CRC0CN1        DATA 0x86
0000            120   _CRC0CNT        DATA 0xd3
0000            121   _CRC0DAT        DATA 0xcb
0000            122   _CRC0FLIP       DATA 0xcf
0000            123   _CRC0IN         DATA 0xca
0000            124   _CRC0ST         DATA 0xd2
0000            125   _DAC0CF0        DATA 0x91
0000            126   _DAC0CF1        DATA 0x92
0000            127   _DAC0H          DATA 0x85
0000            128   _DAC0L          DATA 0x84
0000            129   _DAC1CF0        DATA 0x93
0000            130   _DAC1CF1        DATA 0x94
0000            131   _DAC1H          DATA 0x8a
0000            132   _DAC1L          DATA 0x89
0000            133   _DAC2CF0        DATA 0x95
0000            134   _DAC2CF1        DATA 0x96
0000            135   _DAC2H          DATA 0x8c
0000            136   _DAC2L          DATA 0x8b
0000            137   _DAC3CF0        DATA 0x9a
0000            138   _DAC3CF1        DATA 0x9c
0000            139   _DAC3H          DATA 0x8e
0000            140   _DAC3L          DATA 0x8d
0000            141   _DACGCF0        DATA 0x88
0000            142   _DACGCF1        DATA 0x98
0000            143   _DACGCF2        DATA 0xa2
0000            144   _DERIVID        DATA 0xad
0000            145   _DEVICEID       DATA 0xb5
0000            146   _DPH            DATA 0x83
0000            147   _DPL            DATA 0x82
0000            148   _EIE1           DATA 0xe6
0000            149   _EIE2           DATA 0xf3
0000            150   _EIP1           DATA 0xbb
0000            151   _EIP1H          DATA 0xee
0000            152   _EIP2           DATA 0xed
0000            153   _EIP2H          DATA 0xf6
0000            154   _EMI0CN         DATA 0xe7
0000            155   _FLKEY          DATA 0xb7
0000            156   _HFO0CAL        DATA 0xc7
0000            157   _HFO1CAL        DATA 0xd6
0000            158   _HFOCN          DATA 0xef
0000            159   _I2C0ADM        DATA 0xff
0000            160   _I2C0CN0        DATA 0xba
0000            161   _I2C0DIN        DATA 0xbc
0000            162   _I2C0DOUT       DATA 0xbb
0000            163   _I2C0FCN0       DATA 0xad
0000            164   _I2C0FCN1       DATA 0xab
0000            165   _I2C0FCT        DATA 0xf5
0000            166   _I2C0SLAD       DATA 0xbd
0000            167   _I2C0STAT       DATA 0xb9
0000            168   _IE             DATA 0xa8
0000            169   _IP             DATA 0xb8
0000            170   _IPH            DATA 0xf2
0000            171   _IT01CF         DATA 0xe4
0000            172   _LFO0CN         DATA 0xb1
0000            173   _P0             DATA 0x80
0000            174   _P0MASK         DATA 0xfe
0000            175   _P0MAT          DATA 0xfd
0000            176   _P0MDIN         DATA 0xf1
0000            177   _P0MDOUT        DATA 0xa4
0000            178   _P0SKIP         DATA 0xd4
0000            179   _P1             DATA 0x90
0000            180   _P1MASK         DATA 0xee
0000            181   _P1MAT          DATA 0xed
0000            182   _P1MDIN         DATA 0xf2
0000            183   _P1MDOUT        DATA 0xa5
0000            184   _P1SKIP         DATA 0xd5
0000            185   _P2             DATA 0xa0
0000            186   _P2MASK         DATA 0xfc
0000            187   _P2MAT          DATA 0xfb
0000            188   _P2MDIN         DATA 0xf3
0000            189   _P2MDOUT        DATA 0xa6
0000            190   _P2SKIP         DATA 0xcc
0000            191   _P3             DATA 0xb0
0000            192   _P3MDIN         DATA 0xf4
0000            193   _P3MDOUT        DATA 0x9c
0000            194   _PCA0CENT       DATA 0x9e
0000            195   _PCA0CLR        DATA 0x9c
0000            196   _PCA0CN0        DATA 0xd8
0000            197   _PCA0CPH0       DATA 0xfc
0000            198   _PCA0CPH1       DATA 0xea
0000            199   _PCA0CPH2       DATA 0xec
0000            200   _PCA0CPH3       DATA 0xf5
0000            201   _PCA0CPH4       DATA 0x85
0000            202   _PCA0CPH5       DATA 0xde
0000            203   _PCA0CPL0       DATA 0xfb
0000            204   _PCA0CPL1       DATA 0xe9
0000            205   _PCA0CPL2       DATA 0xeb
0000            206   _PCA0CPL3       DATA 0xf4
0000            207   _PCA0CPL4       DATA 0x84
0000            208   _PCA0CPL5       DATA 0xdd
0000            209   _PCA0CPM0       DATA 0xda
0000            210   _PCA0CPM1       DATA 0xdb
0000            211   _PCA0CPM2       DATA 0xdc
0000            212   _PCA0CPM3       DATA 0xae
0000            213   _PCA0CPM4       DATA 0xaf
0000            214   _PCA0CPM5       DATA 0xcc
0000            215   _PCA0H          DATA 0xfa
0000            216   _PCA0L          DATA 0xf9
0000            217   _PCA0MD         DATA 0xd9
0000            218   _PCA0POL        DATA 0x96
0000            219   _PCA0PWM        DATA 0xf7
0000            220   _PCON0          DATA 0x87
0000            221   _PCON1          DATA 0xcd
0000            222   _PFE0CN         DATA 0xc1
0000            223   _PRTDRV         DATA 0xf6
0000            224   _PSCTL          DATA 0x8f
0000            225   _PSTAT0         DATA 0xaa
0000            226   _PSW            DATA 0xd0
0000            227   _REF0CN         DATA 0xd1
0000            228   _REG0CN         DATA 0xc9
0000            229   _REVID          DATA 0xb6
0000            230   _RSTSRC         DATA 0xef
0000            231   _SBCON1         DATA 0x94
0000            232   _SBRLH1         DATA 0x96
0000            233   _SBRLL1         DATA 0x95
0000            234   _SBUF           DATA 0x99
0000            235   _SBUF0          DATA 0x99
0000            236   _SBUF1          DATA 0x92
0000            237   _SCON           DATA 0x98
0000            238   _SCON0          DATA 0x98
0000            239   _SCON1          DATA 0xc8
0000            240   _SFRPAGE        DATA 0xa7
0000            241   _SFRPGCN        DATA 0xbc
0000            242   _SFRSTACK       DATA 0xd7
0000            243   _SMB0ADM        DATA 0xd6
0000            244   _SMB0ADR        DATA 0xd7
0000            245   _SMB0CF         DATA 0xc1
0000            246   _SMB0CN0        DATA 0xc0
0000            247   _SMB0DAT        DATA 0xc2
0000            248   _SMB0FCN0       DATA 0xc3
0000            249   _SMB0FCN1       DATA 0xc4
0000            250   _SMB0FCT        DATA 0xef
0000            251   _SMB0RXLN       DATA 0xc5
0000            252   _SMB0TC         DATA 0xac
0000            253   _SMOD1          DATA 0x93
0000            254   _SP             DATA 0x81
0000            255   _SPI0CFG        DATA 0xa1
0000            256   _SPI0CKR        DATA 0xa2
0000            257   _SPI0CN0        DATA 0xf8
0000            258   _SPI0DAT        DATA 0xa3
0000            259   _SPI0FCN0       DATA 0x9a
0000            260   _SPI0FCN1       DATA 0x9b
0000            261   _SPI0FCT        DATA 0xf7
0000            262   _SPI0PCF        DATA 0xdf
0000            263   _TCON           DATA 0x88
0000            264   _TH0            DATA 0x8c
0000            265   _TH1            DATA 0x8d
0000            266   _TL0            DATA 0x8a
0000            267   _TL1            DATA 0x8b
0000            268   _TMOD           DATA 0x89
0000            269   _TMR2CN0        DATA 0xc8
0000            270   _TMR2CN1        DATA 0xfd
0000            271   _TMR2H          DATA 0xcf
0000            272   _TMR2L          DATA 0xce
0000            273   _TMR2RLH        DATA 0xcb
0000            274   _TMR2RLL        DATA 0xca
0000            275   _TMR3CN0        DATA 0x91
0000            276   _TMR3CN1        DATA 0xfe
0000            277   _TMR3H          DATA 0x95
0000            278   _TMR3L          DATA 0x94
0000            279   _TMR3RLH        DATA 0x93
0000            280   _TMR3RLL        DATA 0x92
0000            281   _TMR4CN0        DATA 0x98
0000            282   _TMR4CN1        DATA 0xff
0000            283   _TMR4H          DATA 0xa5
0000            284   _TMR4L          DATA 0xa4
0000            285   _TMR4RLH        DATA 0xa3
0000            286   _TMR4RLL        DATA 0xa2
0000            287   _TMR5CN0        DATA 0xc0
0000            288   _TMR5CN1        DATA 0xf1
0000            289   _TMR5H          DATA 0xd5
0000            290   _TMR5L          DATA 0xd4
0000            291   _TMR5RLH        DATA 0xd3
0000            292   _TMR5RLL        DATA 0xd2
0000            293   _UART0PCF       DATA 0xd9
0000            294   _UART1FCN0      DATA 0x9d
0000            295   _UART1FCN1      DATA 0xd8
0000            296   _UART1FCT       DATA 0xfa
0000            297   _UART1LIN       DATA 0x9e
0000            298   _UART1PCF       DATA 0xda
0000            299   _VDM0CN         DATA 0xff
0000            300   _WDTCN          DATA 0x97
0000            301   _XBR0           DATA 0xe1
0000            302   _XBR1           DATA 0xe2
0000            303   _XBR2           DATA 0xe3
0000            304   _XOSC0CN        DATA 0x86
0000            305   _DPTR           DATA 0x8382
0000            306   _TMR2RL         DATA 0xcbca
0000            307   _TMR3RL         DATA 0x9392
0000            308   _TMR4RL         DATA 0xa3a2
0000            309   _TMR5RL         DATA 0xd3d2
0000            310   _TMR0           DATA 0x8c8a
0000            311   _TMR1           DATA 0x8d8b
0000            312   _TMR2           DATA 0xcfce
0000            313   _TMR3           DATA 0x9594
0000            314   _TMR4           DATA 0xa5a4
0000            315   _TMR5           DATA 0xd5d4
0000            316   _SBRL1          DATA 0x9695
0000            317   _PCA0           DATA 0xfaf9
0000            318   _PCA0CP0        DATA 0xfcfb
0000            319   _PCA0CP1        DATA 0xeae9
0000            320   _PCA0CP2        DATA 0xeceb
0000            321   _PCA0CP3        DATA 0xf5f4
0000            322   _PCA0CP4        DATA 0x8584
0000            323   _PCA0CP5        DATA 0xdedd
0000            324   _ADC0ASA        DATA 0xb6b5
0000            325   _ADC0GT         DATA 0xc4c3
0000            326   _ADC0           DATA 0xbebd
0000            327   _ADC0LT         DATA 0xc6c5
0000            328   _DAC0           DATA 0x8584
0000            329   _DAC1           DATA 0x8a89
0000            330   _DAC2           DATA 0x8c8b
0000            331   _DAC3           DATA 0x8e8d
0000            332   ;--------------------------------------------------------
0000            333   ; special function bits
0000            334   ;--------------------------------------------------------
0000            335   _ACC_0          BIT 0xe0
0000            336   _ACC_1          BIT 0xe1
0000            337   _ACC_2          BIT 0xe2
0000            338   _ACC_3          BIT 0xe3
0000            339   _ACC_4          BIT 0xe4
0000            340   _ACC_5          BIT 0xe5
0000            341   _ACC_6          BIT 0xe6
0000            342   _ACC_7          BIT 0xe7
0000            343   _TEMPE          BIT 0xe8
0000            344   _ADGN0          BIT 0xe9
0000            345   _ADGN1          BIT 0xea
0000            346   _ADWINT         BIT 0xeb
0000            347   _ADBUSY         BIT 0xec
0000            348   _ADINT          BIT 0xed
0000            349   _IPOEN          BIT 0xee
0000            350   _ADEN           BIT 0xef
0000            351   _B_0            BIT 0xf0
0000            352   _B_1            BIT 0xf1
0000            353   _B_2            BIT 0xf2
0000            354   _B_3            BIT 0xf3
0000            355   _B_4            BIT 0xf4
0000            356   _B_5            BIT 0xf5
0000            357   _B_6            BIT 0xf6
0000            358   _B_7            BIT 0xf7
0000            359   _C0FIF          BIT 0xe8
0000            360   _C0RIF          BIT 0xe9
0000            361   _C1FIF          BIT 0xea
0000            362   _C1RIF          BIT 0xeb
0000            363   _C2FIF          BIT 0xec
0000            364   _C2RIF          BIT 0xed
0000            365   _C3FIF          BIT 0xee
0000            366   _C3RIF          BIT 0xef
0000            367   _D1SRC0         BIT 0x88
0000            368   _D1SRC1         BIT 0x89
0000            369   _D1AMEN         BIT 0x8a
0000            370   _D01REFSL       BIT 0x8b
0000            371   _D3SRC0         BIT 0x8c
0000            372   _D3SRC1         BIT 0x8d
0000            373   _D3AMEN         BIT 0x8e
0000            374   _D23REFSL       BIT 0x8f
0000            375   _D0UDIS         BIT 0x98
0000            376   _D1UDIS         BIT 0x99
0000            377   _D2UDIS         BIT 0x9a
0000            378   _D3UDIS         BIT 0x9b
0000            379   _EX0            BIT 0xa8
0000            380   _ET0            BIT 0xa9
0000            381   _EX1            BIT 0xaa
0000            382   _ET1            BIT 0xab
0000            383   _ES0            BIT 0xac
0000            384   _ET2            BIT 0xad
0000            385   _ESPI0          BIT 0xae
0000            386   _EA             BIT 0xaf
0000            387   _PX0            BIT 0xb8
0000            388   _PT0            BIT 0xb9
0000            389   _PX1            BIT 0xba
0000            390   _PT1            BIT 0xbb
0000            391   _PS0            BIT 0xbc
0000            392   _PT2            BIT 0xbd
0000            393   _PSPI0          BIT 0xbe
0000            394   _P0_0           BIT 0x80
0000            395   _P0_1           BIT 0x81
0000            396   _P0_2           BIT 0x82
0000            397   _P0_3           BIT 0x83
0000            398   _P0_4           BIT 0x84
0000            399   _P0_5           BIT 0x85
0000            400   _P0_6           BIT 0x86
0000            401   _P0_7           BIT 0x87
0000            402   _P1_0           BIT 0x90
0000            403   _P1_1           BIT 0x91
0000            404   _P1_2           BIT 0x92
0000            405   _P1_3           BIT 0x93
0000            406   _P1_4           BIT 0x94
0000            407   _P1_5           BIT 0x95
0000            408   _P1_6           BIT 0x96
0000            409   _P1_7           BIT 0x97
0000            410   _P2_0           BIT 0xa0
0000            411   _P2_1           BIT 0xa1
0000            412   _P2_2           BIT 0xa2
0000            413   _P2_3           BIT 0xa3
0000            414   _P2_4           BIT 0xa4
0000            415   _P2_5           BIT 0xa5
0000            416   _P2_6           BIT 0xa6
0000            417   _P3_0           BIT 0xb0
0000            418   _P3_1           BIT 0xb1
0000            419   _P3_2           BIT 0xb2
0000            420   _P3_3           BIT 0xb3
0000            421   _P3_4           BIT 0xb4
0000            422   _P3_7           BIT 0xb7
0000            423   _CCF0           BIT 0xd8
0000            424   _CCF1           BIT 0xd9
0000            425   _CCF2           BIT 0xda
0000            426   _CCF3           BIT 0xdb
0000            427   _CCF4           BIT 0xdc
0000            428   _CCF5           BIT 0xdd
0000            429   _CR             BIT 0xde
0000            430   _CF             BIT 0xdf
0000            431   _PARITY         BIT 0xd0
0000            432   _F1             BIT 0xd1
0000            433   _OV             BIT 0xd2
0000            434   _RS0            BIT 0xd3
0000            435   _RS1            BIT 0xd4
0000            436   _F0             BIT 0xd5
0000            437   _AC             BIT 0xd6
0000            438   _CY             BIT 0xd7
0000            439   _RI             BIT 0x98
0000            440   _TI             BIT 0x99
0000            441   _RB8            BIT 0x9a
0000            442   _TB8            BIT 0x9b
0000            443   _REN            BIT 0x9c
0000            444   _CE             BIT 0x9d
0000            445   _SMODE          BIT 0x9e
0000            446   _RI1            BIT 0xc8
0000            447   _TI1            BIT 0xc9
0000            448   _RBX1           BIT 0xca
0000            449   _TBX1           BIT 0xcb
0000            450   _REN1           BIT 0xcc
0000            451   _PERR1          BIT 0xcd
0000            452   _OVR1           BIT 0xce
0000            453   _SI             BIT 0xc0
0000            454   _ACK            BIT 0xc1
0000            455   _ARBLOST        BIT 0xc2
0000            456   _ACKRQ          BIT 0xc3
0000            457   _STO            BIT 0xc4
0000            458   _STA            BIT 0xc5
0000            459   _TXMODE         BIT 0xc6
0000            460   _MASTER         BIT 0xc7
0000            461   _SPIEN          BIT 0xf8
0000            462   _TXNF           BIT 0xf9
0000            463   _NSSMD0         BIT 0xfa
0000            464   _NSSMD1         BIT 0xfb
0000            465   _RXOVRN         BIT 0xfc
0000            466   _MODF           BIT 0xfd
0000            467   _WCOL           BIT 0xfe
0000            468   _SPIF           BIT 0xff
0000            469   _IT0            BIT 0x88
0000            470   _IE0            BIT 0x89
0000            471   _IT1            BIT 0x8a
0000            472   _IE1            BIT 0x8b
0000            473   _TR0            BIT 0x8c
0000            474   _TF0            BIT 0x8d
0000            475   _TR1            BIT 0x8e
0000            476   _TF1            BIT 0x8f
0000            477   _T2XCLK0        BIT 0xc8
0000            478   _T2XCLK1        BIT 0xc9
0000            479   _TR2            BIT 0xca
0000            480   _T2SPLIT        BIT 0xcb
0000            481   _TF2CEN         BIT 0xcc
0000            482   _TF2LEN         BIT 0xcd
0000            483   _TF2L           BIT 0xce
0000            484   _TF2H           BIT 0xcf
0000            485   _T4XCLK0        BIT 0x98
0000            486   _T4XCLK1        BIT 0x99
0000            487   _TR4            BIT 0x9a
0000            488   _T4SPLIT        BIT 0x9b
0000            489   _TF4CEN         BIT 0x9c
0000            490   _TF4LEN         BIT 0x9d
0000            491   _TF4L           BIT 0x9e
0000            492   _TF4H           BIT 0x9f
0000            493   _T5XCLK0        BIT 0xc0
0000            494   _T5XCLK1        BIT 0xc1
0000            495   _TR5            BIT 0xc2
0000            496   _T5SPLIT        BIT 0xc3
0000            497   _TF5CEN         BIT 0xc4
0000            498   _TF5LEN         BIT 0xc5
0000            499   _TF5L           BIT 0xc6
0000            500   _TF5H           BIT 0xc7
0000            501   _RIE            BIT 0xd8
0000            502   _RXTO0          BIT 0xd9
0000            503   _RXTO1          BIT 0xda
0000            504   _RFRQ           BIT 0xdb
0000            505   _TIE            BIT 0xdc
0000            506   _TXHOLD         BIT 0xdd
0000            507   _TXNF1          BIT 0xde
0000            508   _TFRQ           BIT 0xdf
0000            509   ;--------------------------------------------------------
0000            510   ; overlayable register banks
0000            511   ;--------------------------------------------------------
0000            512            rbank0 segment data overlay
0000            513   ;--------------------------------------------------------
0000            514   ; internal ram data
0000            515   ;--------------------------------------------------------
0000            516            rseg R_DSEG
0000            517   _LCDprint_PARM_2:
0000            518            ds 1
0001            519   _LCDprint_PARM_3:
0001            520            ds 1
0002            521   _ReadPeriod_period_arr_1_125:
0002            522            ds 3
0005            523   _ReadPeriod_period_1_126:
0005            524            ds 4
0009            525   _ReadPeak_PARM_2:
0009            526            ds 3
000C            527   _ReadPeak_delay_us_1_137:
000C            528            ds 2
000E            529   _DisplayMenu_PARM_2:
000E            530            ds 2
0010            531   _DisplayMenu_sloc0_1_0:
0010            532            ds 4
0014            533   _main_sloc0_1_0:
0014            534            ds 4
0018            535   _main_sloc1_1_0:
0018            536            ds 4
001C            537   _main_sloc2_1_0:
001C            538            ds 4
0020            539   _main_sloc3_1_0:
0020            540            ds 2
0022            541   ;--------------------------------------------------------
0022            542   ; overlayable items in internal ram 
0022            543   ;--------------------------------------------------------
0000            544            rseg    R_OSEG
0000            545            rseg    R_OSEG
0000            546            rseg    R_OSEG
0000            547            rseg    R_OSEG
0000            548            rseg    R_OSEG
0000            549            rseg    R_OSEG
0000            550            rseg    R_OSEG
0000            551   _InitPinADC_PARM_2:
0000            552            ds 1
0001            553            rseg    R_OSEG
0001            554   ;--------------------------------------------------------
0001            555   ; indirectly addressable internal ram data
0001            556   ;--------------------------------------------------------
0000            557            rseg R_ISEG
0000            558   ;--------------------------------------------------------
0000            559   ; absolute internal ram data
0000            560   ;--------------------------------------------------------
0000            561            DSEG
0000            562   ;--------------------------------------------------------
0000            563   ; bit data
0000            564   ;--------------------------------------------------------
0000            565            rseg R_BSEG
0000            566   _LCDprint_PARM_4:
0000            567            DBIT    1
0001            568   _Read_Pin_sloc0_1_0:
0001            569            DBIT    1
0002            570   ;--------------------------------------------------------
0002            571   ; paged external ram data
0002            572   ;--------------------------------------------------------
0000            573            rseg R_PSEG
0000            574   ;--------------------------------------------------------
0000            575   ; external ram data
0000            576   ;--------------------------------------------------------
0000            577            rseg R_XSEG
0000            578   _overflow_count:
0000            579            ds 1
0001            580   _vpeak:
0001            581            ds 8
0009            582   _phase_diff:
0009            583            ds 4
000D            584   _frequency:
000D            585            ds 4
0011            586   _Saved_vref:
0011            587            ds 20
0025            588   _Saved_vsig:
0025            589            ds 20
0039            590   _Saved_phase:
0039            591            ds 20
004D            592   _Saved_freq:
004D            593            ds 20
0061            594   _Saved_units:
0061            595            ds 20
0075            596   _LCDprint_address_1_88:
0075            597            ds 1
0076            598   _Read_Pin_result_1_92:
0076            599            ds 1
0077            600   _DisplayMenu_buff_1_145:
0077            601            ds 17
0088            602   _main_v_rms_1_160:
0088            603            ds 8
0090            604   _main_units_1_160:
0090            605            ds 2
0092            606   _main_period_arr_1_160:
0092            607            ds 8
009A            608   _main_time_diff_1_160:
009A            609            ds 4
009E            610   _main_menu_1_160:
009E            611            ds 2
00A0            612   _main_mem_1_160:
00A0            613            ds 2
00A2            614   ;--------------------------------------------------------
00A2            615   ; absolute external ram data
00A2            616   ;--------------------------------------------------------
0000            617            XSEG
0000            618   ;--------------------------------------------------------
0000            619   ; external initialized ram data
0000            620   ;--------------------------------------------------------
0000            621            rseg R_IXSEG
0000            622            rseg R_HOME
0000            623            rseg R_GSINIT
0000            624            rseg R_CSEG
0000            625   ;--------------------------------------------------------
0000            626   ; Reset entry point and interrupt vectors
0000            627   ;--------------------------------------------------------
0000            628            CSEG at 0x0000
0000 020000     629            ljmp    _crt0
0003            630   ;--------------------------------------------------------
0003            631   ; global & static initialisations
0003            632   ;--------------------------------------------------------
0000            633            rseg R_HOME
0000            634            rseg R_GSINIT
0000            635            rseg R_GSINIT
0000            636   ;--------------------------------------------------------
0000            637   ; data variables initialization
0000            638   ;--------------------------------------------------------
0000            639            rseg R_DINIT
0000            640            ; The linker places a 'ret' at the end of segment R_DINIT.
0000            641   ;--------------------------------------------------------
0000            642   ; code
0000            643   ;--------------------------------------------------------
0000            644            rseg R_CSEG
0000            645   ;------------------------------------------------------------
0000            646   ;Allocation info for local variables in function '_c51_external_startup'
0000            647   ;------------------------------------------------------------
0000            648   ;------------------------------------------------------------
0000            649   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:49: char _c51_external_startup (void)
0000            650   ;        -----------------------------------------
0000            651   ;         function _c51_external_startup
0000            652   ;        -----------------------------------------
0000            653   __c51_external_startup:
0000            654            using   0
0000            655   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:52: SFRPAGE = 0x00;
0000 75A700     656            mov     _SFRPAGE,#0x00
0003            657   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:53: WDTCN = 0xDE; //First key
0003 7597DE     658            mov     _WDTCN,#0xDE
0006            659   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:54: WDTCN = 0xAD; //Second key
0006 7597AD     660            mov     _WDTCN,#0xAD
0009            661   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:56: VDM0CN=0x80;       // enable VDD monitor
0009 75FF80     662            mov     _VDM0CN,#0x80
000C            663   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:57: RSTSRC=0x02|0x04;  // Enable reset on missing clock detector and VDD
000C 75EF06     664            mov     _RSTSRC,#0x06
000F            665   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:64: SFRPAGE = 0x10;
000F 75A710     666            mov     _SFRPAGE,#0x10
0012            667   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:65: PFE0CN  = 0x20; // SYSCLK < 75 MHz.
0012 75C120     668            mov     _PFE0CN,#0x20
0015            669   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:66: SFRPAGE = 0x00;
0015 75A700     670            mov     _SFRPAGE,#0x00
0018            671   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:87: CLKSEL = 0x00;
0018 75A900     672            mov     _CLKSEL,#0x00
001B            673   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:88: CLKSEL = 0x00;
001B 75A900     674            mov     _CLKSEL,#0x00
001E            675   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:89: while ((CLKSEL & 0x80) == 0);
001E            676   L002001?:
001E E5A9       677            mov     a,_CLKSEL
0020 30E7C0     678            jnb     acc.7,L002001?
0023            679   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:90: CLKSEL = 0x03;
0023 75A903     680            mov     _CLKSEL,#0x03
0026            681   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:91: CLKSEL = 0x03;
0026 75A903     682            mov     _CLKSEL,#0x03
0029            683   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:92: while ((CLKSEL & 0x80) == 0);
0029            684   L002004?:
0029 E5A9       685            mov     a,_CLKSEL
002B 30E740     686            jnb     acc.7,L002004?
002E            687   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:97: P0MDOUT |= 0x10; // Enable UART0 TX as push-pull output
002E 43A410     688            orl     _P0MDOUT,#0x10
0031            689   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:98: XBR0     = 0x01; // Enable UART0 on P0.4(TX) and P0.5(RX)                     
0031 75E101     690            mov     _XBR0,#0x01
0034            691   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:99: XBR1     = 0X00;
0034 75E200     692            mov     _XBR1,#0x00
0037            693   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:100: XBR2     = 0x40; // Enable crossbar and weak pull-ups
0037 75E340     694            mov     _XBR2,#0x40
003A            695   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:106: SCON0 = 0x10;
003A 759810     696            mov     _SCON0,#0x10
003D            697   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:107: TH1 = 0x100-((SYSCLK/BAUDRATE)/(2L*12L));
003D 758DE6     698            mov     _TH1,#0xE6
0040            699   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:108: TL1 = TH1;      // Init Timer1
0040 858D8B     700            mov     _TL1,_TH1
0043            701   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:109: TMOD &= ~0xf0;  // TMOD: timer 1 in 8-bit auto-reload
0043 53890F     702            anl     _TMOD,#0x0F
0046            703   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:110: TMOD |=  0x20;                       
0046 438920     704            orl     _TMOD,#0x20
0049            705   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:111: TR1 = 1; // START Timer1
0049 D28E       706            setb    _TR1
004B            707   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:112: TI = 1;  // Indicate TX0 ready
004B D299       708            setb    _TI
004D            709   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:114: return 0;
004D 758200     710            mov     dpl,#0x00
0050 22         711            ret
0051            712   ;------------------------------------------------------------
0051            713   ;Allocation info for local variables in function 'Timer3us'
0051            714   ;------------------------------------------------------------
0051            715   ;i                         Allocated with name '_Timer3us_i_1_67'
0051            716   ;us                        Allocated to registers r2 
0051            717   ;------------------------------------------------------------
0051            718   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:118: void Timer3us(unsigned char us)
0051            719   ;        -----------------------------------------
0051            720   ;         function Timer3us
0051            721   ;        -----------------------------------------
0051            722   _Timer3us:
0051 AA82       723            mov     r2,dpl
0053            724   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:123: CKCON0|=0b_0100_0000;
0053 438E40     725            orl     _CKCON0,#0x40
0056            726   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:125: TMR3RL = (-(SYSCLK)/1000000L); // Set Timer3 to overflow in 1us.
0056 7592B8     727            mov     _TMR3RL,#0xB8
0059 7593FF     728            mov     (_TMR3RL >> 8),#0xFF
005C            729   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:126: TMR3 = TMR3RL;                 // Initialize Timer3 for first overflow
005C 859294     730            mov     _TMR3,_TMR3RL
005F 859395     731            mov     (_TMR3 >> 8),(_TMR3RL >> 8)
0062            732   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:128: TMR3CN0 = 0x04;                 // Sart Timer3 and clear overflow flag
0062 759104     733            mov     _TMR3CN0,#0x04
0065            734   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:129: for (i = 0; i < us; i++)       // Count <us> overflows
0065 7B00       735            mov     r3,#0x00
0067            736   L003004?:
0067 C3         737            clr     c
0068 EB         738            mov     a,r3
0069 9A         739            subb    a,r2
006A 5000       740            jnc     L003007?
006C            741   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:131: while (!(TMR3CN0 & 0x80));  // Wait for overflow
006C            742   L003001?:
006C E591       743            mov     a,_TMR3CN0
006E 30E740     744            jnb     acc.7,L003001?
0071            745   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:132: TMR3CN0 &= ~(0x80);         // Clear overflow indicator
0071 53917F     746            anl     _TMR3CN0,#0x7F
0074            747   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:129: for (i = 0; i < us; i++)       // Count <us> overflows
0074 0B         748            inc     r3
0075 8000       749            sjmp    L003004?
0077            750   L003007?:
0077            751   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:134: TMR3CN0 = 0 ;                   // Stop Timer3 and clear overflow flag
0077 759100     752            mov     _TMR3CN0,#0x00
007A 22         753            ret
007B            754   ;------------------------------------------------------------
007B            755   ;Allocation info for local variables in function 'waitms'
007B            756   ;------------------------------------------------------------
007B            757   ;ms                        Allocated to registers r2 r3 
007B            758   ;j                         Allocated with name '_waitms_j_1_70'
007B            759   ;k                         Allocated with name '_waitms_k_1_70'
007B            760   ;------------------------------------------------------------
007B            761   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:137: void waitms (unsigned int ms)
007B            762   ;        -----------------------------------------
007B            763   ;         function waitms
007B            764   ;        -----------------------------------------
007B            765   _waitms:
007B AA82       766            mov     r2,dpl
007D AB83       767            mov     r3,dph
007F            768   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:141: for(j=0; j<ms; j++)
007F 7C00       769            mov     r4,#0x00
0081 7D00       770            mov     r5,#0x00
0083            771   L004005?:
0083 C3         772            clr     c
0084 EC         773            mov     a,r4
0085 9A         774            subb    a,r2
0086 ED         775            mov     a,r5
0087 9B         776            subb    a,r3
0088 5000       777            jnc     L004009?
008A            778   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:142: for (k=0; k<4; k++) Timer3us(250);
008A 7E00       779            mov     r6,#0x00
008C            780   L004001?:
008C BE0480     781            cjne    r6,#0x04,L004018?
008F            782   L004018?:
008F 5000       783            jnc     L004007?
0091 7582FA     784            mov     dpl,#0xFA
0094 C002       785            push    ar2
0096 C003       786            push    ar3
0098 C004       787            push    ar4
009A C005       788            push    ar5
009C C006       789            push    ar6
009E 120000     790            lcall   _Timer3us
00A1 D006       791            pop     ar6
00A3 D005       792            pop     ar5
00A5 D004       793            pop     ar4
00A7 D003       794            pop     ar3
00A9 D002       795            pop     ar2
00AB 0E         796            inc     r6
00AC 8000       797            sjmp    L004001?
00AE            798   L004007?:
00AE            799   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:141: for(j=0; j<ms; j++)
00AE 0C         800            inc     r4
00AF BC00C0     801            cjne    r4,#0x00,L004005?
00B2 0D         802            inc     r5
00B3 8000       803            sjmp    L004005?
00B5            804   L004009?:
00B5 22         805            ret
00B6            806   ;------------------------------------------------------------
00B6            807   ;Allocation info for local variables in function 'waitus'
00B6            808   ;------------------------------------------------------------
00B6            809   ;us                        Allocated to registers r2 r3 
00B6            810   ;temp                      Allocated to registers r2 r3 
00B6            811   ;------------------------------------------------------------
00B6            812   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:145: void waitus(unsigned int us) {
00B6            813   ;        -----------------------------------------
00B6            814   ;         function waitus
00B6            815   ;        -----------------------------------------
00B6            816   _waitus:
00B6 AA82       817            mov     r2,dpl
00B8 AB83       818            mov     r3,dph
00BA            819   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:147: while (temp > 255) {
00BA            820   L005001?:
00BA C3         821            clr     c
00BB 74FF       822            mov     a,#0xFF
00BD 9A         823            subb    a,r2
00BE E4         824            clr     a
00BF 9B         825            subb    a,r3
00C0 5000       826            jnc     L005003?
00C2            827   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:148: Timer3us(255);
00C2 7582FF     828            mov     dpl,#0xFF
00C5 C002       829            push    ar2
00C7 C003       830            push    ar3
00C9 120000     831            lcall   _Timer3us
00CC D003       832            pop     ar3
00CE D002       833            pop     ar2
00D0            834   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:149: temp -= 255;
00D0 EA         835            mov     a,r2
00D1 2401       836            add     a,#0x01
00D3 FA         837            mov     r2,a
00D4 EB         838            mov     a,r3
00D5 34FF       839            addc    a,#0xff
00D7 FB         840            mov     r3,a
00D8 8000       841            sjmp    L005001?
00DA            842   L005003?:
00DA            843   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:151: if (temp > 0) {
00DA EA         844            mov     a,r2
00DB 4B         845            orl     a,r3
00DC 6000       846            jz      L005006?
00DE            847   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:152: Timer3us((unsigned char)temp);
00DE 8A82       848            mov     dpl,r2
00E0 020000     849            ljmp    _Timer3us
00E3            850   L005006?:
00E3 22         851            ret
00E4            852   ;------------------------------------------------------------
00E4            853   ;Allocation info for local variables in function 'TIMER0_Init'
00E4            854   ;------------------------------------------------------------
00E4            855   ;------------------------------------------------------------
00E4            856   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:156: void TIMER0_Init(void)
00E4            857   ;        -----------------------------------------
00E4            858   ;         function TIMER0_Init
00E4            859   ;        -----------------------------------------
00E4            860   _TIMER0_Init:
00E4            861   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:158: TMOD&=0b_1111_0000; // Set the bits of Timer/Counter 0 to zero
00E4 5389F0     862            anl     _TMOD,#0xF0
00E7            863   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:159: TMOD|=0b_0000_0001; // Timer/Counter 0 used as a 16-bit timer
00E7 438901     864            orl     _TMOD,#0x01
00EA            865   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:160: TR0=0; // Stop Timer/Counter 0
00EA C28C       866            clr     _TR0
00EC 22         867            ret
00ED            868   ;------------------------------------------------------------
00ED            869   ;Allocation info for local variables in function 'LCD_pulse'
00ED            870   ;------------------------------------------------------------
00ED            871   ;------------------------------------------------------------
00ED            872   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:164: void LCD_pulse (void)
00ED            873   ;        -----------------------------------------
00ED            874   ;         function LCD_pulse
00ED            875   ;        -----------------------------------------
00ED            876   _LCD_pulse:
00ED            877   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:166: LCD_E=1;
00ED D2A0       878            setb    _P2_0
00EF            879   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:167: Timer3us(40);
00EF 758228     880            mov     dpl,#0x28
00F2 120000     881            lcall   _Timer3us
00F5            882   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:168: LCD_E=0;
00F5 C2A0       883            clr     _P2_0
00F7 22         884            ret
00F8            885   ;------------------------------------------------------------
00F8            886   ;Allocation info for local variables in function 'LCD_byte'
00F8            887   ;------------------------------------------------------------
00F8            888   ;x                         Allocated to registers r2 
00F8            889   ;------------------------------------------------------------
00F8            890   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:171: void LCD_byte (unsigned char x)
00F8            891   ;        -----------------------------------------
00F8            892   ;         function LCD_byte
00F8            893   ;        -----------------------------------------
00F8            894   _LCD_byte:
00F8 AA82       895            mov     r2,dpl
00FA            896   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:174: ACC=x; //Send high nible
00FA 8AE0       897            mov     _ACC,r2
00FC            898   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:175: LCD_D7=ACC_7;
00FC A2E7       899            mov     c,_ACC_7
00FE 9290       900            mov     _P1_0,c
0100            901   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:176: LCD_D6=ACC_6;
0100 A2E6       902            mov     c,_ACC_6
0102 9291       903            mov     _P1_1,c
0104            904   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:177: LCD_D5=ACC_5;
0104 A2E5       905            mov     c,_ACC_5
0106 9292       906            mov     _P1_2,c
0108            907   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:178: LCD_D4=ACC_4;
0108 A2E4       908            mov     c,_ACC_4
010A 9293       909            mov     _P1_3,c
010C            910   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:179: LCD_pulse();
010C C002       911            push    ar2
010E 120000     912            lcall   _LCD_pulse
0111            913   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:180: Timer3us(40);
0111 758228     914            mov     dpl,#0x28
0114 120000     915            lcall   _Timer3us
0117 D002       916            pop     ar2
0119            917   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:181: ACC=x; //Send low nible
0119 8AE0       918            mov     _ACC,r2
011B            919   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:182: LCD_D7=ACC_3;
011B A2E3       920            mov     c,_ACC_3
011D 9290       921            mov     _P1_0,c
011F            922   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:183: LCD_D6=ACC_2;
011F A2E2       923            mov     c,_ACC_2
0121 9291       924            mov     _P1_1,c
0123            925   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:184: LCD_D5=ACC_1;
0123 A2E1       926            mov     c,_ACC_1
0125 9292       927            mov     _P1_2,c
0127            928   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:185: LCD_D4=ACC_0;
0127 A2E0       929            mov     c,_ACC_0
0129 9293       930            mov     _P1_3,c
012B            931   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:186: LCD_pulse();
012B 020000     932            ljmp    _LCD_pulse
012E            933   ;------------------------------------------------------------
012E            934   ;Allocation info for local variables in function 'WriteData'
012E            935   ;------------------------------------------------------------
012E            936   ;x                         Allocated to registers r2 
012E            937   ;------------------------------------------------------------
012E            938   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:189: void WriteData (unsigned char x)
012E            939   ;        -----------------------------------------
012E            940   ;         function WriteData
012E            941   ;        -----------------------------------------
012E            942   _WriteData:
012E AA82       943            mov     r2,dpl
0130            944   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:191: LCD_RS=1;
0130 D297       945            setb    _P1_7
0132            946   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:192: LCD_byte(x);
0132 8A82       947            mov     dpl,r2
0134 120000     948            lcall   _LCD_byte
0137            949   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:193: waitms(2);
0137 900002     950            mov     dptr,#0x0002
013A 020000     951            ljmp    _waitms
013D            952   ;------------------------------------------------------------
013D            953   ;Allocation info for local variables in function 'WriteCommand'
013D            954   ;------------------------------------------------------------
013D            955   ;x                         Allocated to registers r2 
013D            956   ;------------------------------------------------------------
013D            957   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:196: void WriteCommand (unsigned char x)
013D            958   ;        -----------------------------------------
013D            959   ;         function WriteCommand
013D            960   ;        -----------------------------------------
013D            961   _WriteCommand:
013D AA82       962            mov     r2,dpl
013F            963   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:198: LCD_RS=0;
013F C297       964            clr     _P1_7
0141            965   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:199: LCD_byte(x);
0141 8A82       966            mov     dpl,r2
0143 120000     967            lcall   _LCD_byte
0146            968   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:200: waitms(5);
0146 900005     969            mov     dptr,#0x0005
0149 020000     970            ljmp    _waitms
014C            971   ;------------------------------------------------------------
014C            972   ;Allocation info for local variables in function 'LCD_4BIT'
014C            973   ;------------------------------------------------------------
014C            974   ;------------------------------------------------------------
014C            975   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:203: void LCD_4BIT (void)
014C            976   ;        -----------------------------------------
014C            977   ;         function LCD_4BIT
014C            978   ;        -----------------------------------------
014C            979   _LCD_4BIT:
014C            980   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:205: LCD_E=0; // Resting state of LCD's enable is zero
014C C2A0       981            clr     _P2_0
014E            982   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:207: waitms(20);
014E 900014     983            mov     dptr,#0x0014
0151 120000     984            lcall   _waitms
0154            985   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:209: WriteCommand(0x33);
0154 758233     986            mov     dpl,#0x33
0157 120000     987            lcall   _WriteCommand
015A            988   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:210: WriteCommand(0x33);
015A 758233     989            mov     dpl,#0x33
015D 120000     990            lcall   _WriteCommand
0160            991   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:211: WriteCommand(0x32); // Change to 4-bit mode
0160 758232     992            mov     dpl,#0x32
0163 120000     993            lcall   _WriteCommand
0166            994   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:214: WriteCommand(0x28);
0166 758228     995            mov     dpl,#0x28
0169 120000     996            lcall   _WriteCommand
016C            997   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:215: WriteCommand(0x0c);
016C 75820C     998            mov     dpl,#0x0C
016F 120000     999            lcall   _WriteCommand
0172           1000   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:216: WriteCommand(0x01); // Clear screen command (takes some time)
0172 758201    1001            mov     dpl,#0x01
0175 120000    1002            lcall   _WriteCommand
0178           1003   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:217: waitms(20); // Wait for clear screen command to finsih.
0178 900014    1004            mov     dptr,#0x0014
017B 020000    1005            ljmp    _waitms
017E           1006   ;------------------------------------------------------------
017E           1007   ;Allocation info for local variables in function 'LCDprint'
017E           1008   ;------------------------------------------------------------
017E           1009   ;line                      Allocated with name '_LCDprint_PARM_2'
017E           1010   ;position                  Allocated with name '_LCDprint_PARM_3'
017E           1011   ;string                    Allocated to registers r2 r3 r4 
017E           1012   ;j                         Allocated to registers r5 r6 
017E           1013   ;address                   Allocated with name '_LCDprint_address_1_88'
017E           1014   ;------------------------------------------------------------
017E           1015   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:220: void LCDprint(char * string, unsigned char line, unsigned char position, bit clear)
017E           1016   ;        -----------------------------------------
017E           1017   ;         function LCDprint
017E           1018   ;        -----------------------------------------
017E           1019   _LCDprint:
017E AA82      1020            mov     r2,dpl
0180 AB83      1021            mov     r3,dph
0182 ACF0      1022            mov     r4,b
0184           1023   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:225: if (line == 1){
0184 7401      1024            mov     a,#0x01
0186 B54800    1025            cjne    a,_LCDprint_PARM_2,L012002?
0189           1026   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:226: address = 0x80 + position; 
0189 90BED0    1027            mov     dptr,#_LCDprint_address_1_88
018C 7480      1028            mov     a,#0x80
018E 25F8      1029            add     a,_LCDprint_PARM_3
0190 F0        1030            movx    @dptr,a
0191 8000      1031            sjmp    L012003?
0193           1032   L012002?:
0193           1033   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:229: address = 0xC0 + position; 
0193 90BED0    1034            mov     dptr,#_LCDprint_address_1_88
0196 74C0      1035            mov     a,#0xC0
0198 25F8      1036            add     a,_LCDprint_PARM_3
019A F0        1037            movx    @dptr,a
019B           1038   L012003?:
019B           1039   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:231: WriteCommand(address);
019B 90BED0    1040            mov     dptr,#_LCDprint_address_1_88
019E E0        1041            movx    a,@dptr
019F F582      1042            mov     dpl,a
01A1 C002      1043            push    ar2
01A3 C003      1044            push    ar3
01A5 C004      1045            push    ar4
01A7 120000    1046            lcall   _WriteCommand
01AA           1047   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:232: waitms(5);
01AA 900005    1048            mov     dptr,#0x0005
01AD 120000    1049            lcall   _waitms
01B0 D004      1050            pop     ar4
01B2 D003      1051            pop     ar3
01B4 D002      1052            pop     ar2
01B6           1053   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:233: for(j=0; string[j]!=0; j++)         WriteData(string[j]);// Write the message
01B6 7D00      1054            mov     r5,#0x00
01B8 7E00      1055            mov     r6,#0x00
01BA           1056   L012006?:
01BA ED        1057            mov     a,r5
01BB 2A        1058            add     a,r2
01BC FF        1059            mov     r7,a
01BD EE        1060            mov     a,r6
01BE 3B        1061            addc    a,r3
01BF F8        1062            mov     r0,a
01C0 8C01      1063            mov     ar1,r4
01C2 8F82      1064            mov     dpl,r7
01C4 8883      1065            mov     dph,r0
01C6 89F0      1066            mov     b,r1
01C8 120000    1067            lcall   __gptrget
01CB FF        1068            mov     r7,a
01CC 6000      1069            jz      L012009?
01CE 8F82      1070            mov     dpl,r7
01D0 C002      1071            push    ar2
01D2 C003      1072            push    ar3
01D4 C004      1073            push    ar4
01D6 C005      1074            push    ar5
01D8 C006      1075            push    ar6
01DA 120000    1076            lcall   _WriteData
01DD D006      1077            pop     ar6
01DF D005      1078            pop     ar5
01E1 D004      1079            pop     ar4
01E3 D003      1080            pop     ar3
01E5 D002      1081            pop     ar2
01E7 0D        1082            inc     r5
01E8 BD0080    1083            cjne    r5,#0x00,L012006?
01EB 0E        1084            inc     r6
01EC 8000      1085            sjmp    L012006?
01EE           1086   L012009?:
01EE           1087   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:234: if(clear) for(; j<CHARS_PER_LINE; j++) WriteData(' '); // Clear the rest of the line
01EE 30E040    1088            jnb     _LCDprint_PARM_4,L012014?
01F1 8D02      1089            mov     ar2,r5
01F3 8E03      1090            mov     ar3,r6
01F5           1091   L012010?:
01F5 C3        1092            clr     c
01F6 EA        1093            mov     a,r2
01F7 9410      1094            subb    a,#0x10
01F9 EB        1095            mov     a,r3
01FA 6480      1096            xrl     a,#0x80
01FC 9480      1097            subb    a,#0x80
01FE 5000      1098            jnc     L012014?
0200 758220    1099            mov     dpl,#0x20
0203 C002      1100            push    ar2
0205 C003      1101            push    ar3
0207 120000    1102            lcall   _WriteData
020A D003      1103            pop     ar3
020C D002      1104            pop     ar2
020E 0A        1105            inc     r2
020F BA0080    1106            cjne    r2,#0x00,L012010?
0212 0B        1107            inc     r3
0213 8000      1108            sjmp    L012010?
0215           1109   L012014?:
0215 22        1110            ret
0216           1111   ;------------------------------------------------------------
0216           1112   ;Allocation info for local variables in function 'Read_Pin'
0216           1113   ;------------------------------------------------------------
0216           1114   ;mask                      Allocated with name '_Read_Pin_mask_1_92'
0216           1115   ;result                    Allocated with name '_Read_Pin_result_1_92'
0216           1116   ;pin                       Allocated to registers r2 
0216           1117   ;------------------------------------------------------------
0216           1118   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:237: bit Read_Pin (unsigned char pin)
0216           1119   ;        -----------------------------------------
0216           1120   ;         function Read_Pin
0216           1121   ;        -----------------------------------------
0216           1122   _Read_Pin:
0216 AA82      1123            mov     r2,dpl
0218           1124   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:241: mask=(1<<(pin&0x7));
0218 7407      1125            mov     a,#0x07
021A 5A        1126            anl     a,r2
021B F5F0      1127            mov     b,a
021D 05F0      1128            inc     b
021F 7401      1129            mov     a,#0x01
0221 8000      1130            sjmp    L013012?
0223           1131   L013010?:
0223 25E0      1132            add     a,acc
0225           1133   L013012?:
0225 D5F000    1134            djnz    b,L013010?
0228 FB        1135            mov     r3,a
0229           1136   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:242: switch(pin/0x10)
0229 EA        1137            mov     a,r2
022A C4        1138            swap    a
022B 540F      1139            anl     a,#0x0f
022D FA        1140            mov  r2,a
022E 24FC      1141            add     a,#0xff - 0x03
0230 4000      1142            jc      L013002?
0232 EA        1143            mov     a,r2
0233 2A        1144            add     a,r2
0234 2A        1145            add     a,r2
0235 90C880    1146            mov     dptr,#L013014?
0238 73        1147            jmp     @a+dptr
0239           1148   L013014?:
0239 020000    1149            ljmp    L013002?
023C 020000    1150            ljmp    L013003?
023F 020000    1151            ljmp    L013004?
0242 020000    1152            ljmp    L013005?
0245           1153   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:245: case 0: result = P0 & mask; break;
0245           1154   L013002?:
0245 90BF20    1155            mov     dptr,#_Read_Pin_result_1_92
0248 EB        1156            mov     a,r3
0249 5580      1157            anl     a,_P0
024B F0        1158            movx    @dptr,a
024C           1159   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:246: case 1: result = P1 & mask; break;
024C 8000      1160            sjmp    L013006?
024E           1161   L013003?:
024E 90BF20    1162            mov     dptr,#_Read_Pin_result_1_92
0251 EB        1163            mov     a,r3
0252 5590      1164            anl     a,_P1
0254 F0        1165            movx    @dptr,a
0255           1166   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:247: case 2: result = P2 & mask; break; 
0255 8000      1167            sjmp    L013006?
0257           1168   L013004?:
0257 90BF20    1169            mov     dptr,#_Read_Pin_result_1_92
025A EB        1170            mov     a,r3
025B 55A0      1171            anl     a,_P2
025D F0        1172            movx    @dptr,a
025E           1173   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:248: case 3: result = P3 & mask; break; 
025E 8000      1174            sjmp    L013006?
0260           1175   L013005?:
0260 90BF20    1176            mov     dptr,#_Read_Pin_result_1_92
0263 EB        1177            mov     a,r3
0264 55B0      1178            anl     a,_P3
0266 F0        1179            movx    @dptr,a
0267           1180   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:249: }
0267           1181   L013006?:
0267           1182   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:250: return (result?1:0);
0267 90BF20    1183            mov     dptr,#_Read_Pin_result_1_92
026A E0        1184            movx    a,@dptr
026B 24FF      1185            add     a,#0xff
026D 9280      1186            mov  _Read_Pin_sloc0_1_0,c
026F 22        1187            ret
0270           1188   ;------------------------------------------------------------
0270           1189   ;Allocation info for local variables in function 'ReadButtonDebounced'
0270           1190   ;------------------------------------------------------------
0270           1191   ;pin                       Allocated to registers r2 
0270           1192   ;------------------------------------------------------------
0270           1193   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:253: bit ReadButtonDebounced(unsigned char pin)
0270           1194   ;        -----------------------------------------
0270           1195   ;         function ReadButtonDebounced
0270           1196   ;        -----------------------------------------
0270           1197   _ReadButtonDebounced:
0270           1198   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:255: if (Read_Pin(pin) == 0) 
0270 AA82      1199            mov  r2,dpl
0272 C002      1200            push    ar2
0274 120000    1201            lcall   _Read_Pin
0277 D002      1202            pop     ar2
0279 4000      1203            jc      L014007?
027B           1204   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:257: waitms(10);
027B 90000A    1205            mov     dptr,#0x000A
027E C002      1206            push    ar2
0280 120000    1207            lcall   _waitms
0283 D002      1208            pop     ar2
0285           1209   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:258: while (Read_Pin(pin) == 0) // check again
0285           1210   L014001?:
0285 8A82      1211            mov     dpl,r2
0287 C002      1212            push    ar2
0289 120000    1213            lcall   _Read_Pin
028C E4        1214            clr     a
028D 33        1215            rlc     a
028E D002      1216            pop     ar2
0290 6000      1217            jz      L014001?
0292           1218   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:262: waitms(10); 
0292 90000A    1219            mov     dptr,#0x000A
0295 C002      1220            push    ar2
0297 120000    1221            lcall   _waitms
029A D002      1222            pop     ar2
029C           1223   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:263: if (Read_Pin(pin) == 1){
029C 8A82      1224            mov     dpl,r2
029E 120000    1225            lcall   _Read_Pin
02A1 E4        1226            clr     a
02A2 33        1227            rlc     a
02A3 FA        1228            mov     r2,a
02A4 BA01C0    1229            cjne    r2,#0x01,L014007?
02A7           1230   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:264: return 1;
02A7 D3        1231            setb    c
02A8 22        1232            ret
02A9           1233   L014007?:
02A9           1234   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:268: return 0; 
02A9 C3        1235            clr     c
02AA 22        1236            ret
02AB           1237   ;------------------------------------------------------------
02AB           1238   ;Allocation info for local variables in function 'ReadButtonLongPress'
02AB           1239   ;------------------------------------------------------------
02AB           1240   ;pin                       Allocated to registers r2 
02AB           1241   ;elapsed                   Allocated to registers r3 r4 
02AB           1242   ;------------------------------------------------------------
02AB           1243   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:271: bit ReadButtonLongPress(unsigned char pin)
02AB           1244   ;        -----------------------------------------
02AB           1245   ;         function ReadButtonLongPress
02AB           1246   ;        -----------------------------------------
02AB           1247   _ReadButtonLongPress:
02AB           1248   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:275: if (Read_Pin(pin) == 0) 
02AB AA82      1249            mov  r2,dpl
02AD C002      1250            push    ar2
02AF 120000    1251            lcall   _Read_Pin
02B2 D002      1252            pop     ar2
02B4 4000      1253            jc      L015009?
02B6           1254   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:278: waitms(20);
02B6 900014    1255            mov     dptr,#0x0014
02B9 C002      1256            push    ar2
02BB 120000    1257            lcall   _waitms
02BE D002      1258            pop     ar2
02C0           1259   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:279: if (Read_Pin(pin) == 1)
02C0 8A82      1260            mov     dpl,r2
02C2 C002      1261            push    ar2
02C4 120000    1262            lcall   _Read_Pin
02C7 E4        1263            clr     a
02C8 33        1264            rlc     a
02C9 FB        1265            mov     r3,a
02CA D002      1266            pop     ar2
02CC BB0180    1267            cjne    r3,#0x01,L015015?
02CF           1268   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:280: return 0; // false if released
02CF C3        1269            clr     c
02D0           1270   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:283: while (Read_Pin(pin) == 0) // while still pressed
02D0 22        1271            ret
02D1           1272   L015015?:
02D1 7B00      1273            mov     r3,#0x00
02D3 7C00      1274            mov     r4,#0x00
02D5           1275   L015005?:
02D5 8A82      1276            mov     dpl,r2
02D7 C002      1277            push    ar2
02D9 C003      1278            push    ar3
02DB C004      1279            push    ar4
02DD 120000    1280            lcall   _Read_Pin
02E0 D004      1281            pop     ar4
02E2 D003      1282            pop     ar3
02E4 D002      1283            pop     ar2
02E6 4000      1284            jc      L015009?
02E8           1285   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:285: waitms(20);
02E8 900014    1286            mov     dptr,#0x0014
02EB C002      1287            push    ar2
02ED C003      1288            push    ar3
02EF C004      1289            push    ar4
02F1 120000    1290            lcall   _waitms
02F4 D004      1291            pop     ar4
02F6 D003      1292            pop     ar3
02F8 D002      1293            pop     ar2
02FA           1294   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:286: elapsed += 10;
02FA 740A      1295            mov     a,#0x0A
02FC 2B        1296            add     a,r3
02FD FB        1297            mov     r3,a
02FE E4        1298            clr     a
02FF 3C        1299            addc    a,r4
0300 FC        1300            mov     r4,a
0301           1301   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:287: if (elapsed >= 500){
0301 C3        1302            clr     c
0302 EB        1303            mov     a,r3
0303 94F4      1304            subb    a,#0xF4
0305 EC        1305            mov     a,r4
0306 9401      1306            subb    a,#0x01
0308 4000      1307            jc      L015005?
030A           1308   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:288: return 1; // long press detected
030A D3        1309            setb    c
030B 22        1310            ret
030C           1311   L015009?:
030C           1312   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:293: return 0; // not a long press
030C C3        1313            clr     c
030D 22        1314            ret
030E           1315   ;------------------------------------------------------------
030E           1316   ;Allocation info for local variables in function 'Set_Pin_Input'
030E           1317   ;------------------------------------------------------------
030E           1318   ;mask                      Allocated with name '_Set_Pin_Input_mask_1_105'
030E           1319   ;pin                       Allocated to registers r2 
030E           1320   ;------------------------------------------------------------
030E           1321   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:297: void Set_Pin_Input (unsigned char pin)
030E           1322   ;        -----------------------------------------
030E           1323   ;         function Set_Pin_Input
030E           1324   ;        -----------------------------------------
030E           1325   _Set_Pin_Input:
030E AA82      1326            mov     r2,dpl
0310           1327   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:301: mask=(1<<(pin&0x7));
0310 7407      1328            mov     a,#0x07
0312 5A        1329            anl     a,r2
0313 F5F0      1330            mov     b,a
0315 05F0      1331            inc     b
0317 7401      1332            mov     a,#0x01
0319 8000      1333            sjmp    L016011?
031B           1334   L016009?:
031B 25E0      1335            add     a,acc
031D           1336   L016011?:
031D D5F040    1337            djnz    b,L016009?
0320           1338   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:302: mask=~mask;
0320 F4        1339            cpl     a
0321 FB        1340            mov     r3,a
0322           1341   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:303: switch(pin/0x10)
0322 EA        1342            mov     a,r2
0323 C4        1343            swap    a
0324 540F      1344            anl     a,#0x0f
0326 FA        1345            mov  r2,a
0327 24FC      1346            add     a,#0xff - 0x03
0329 4000      1347            jc      L016006?
032B EA        1348            mov     a,r2
032C 2A        1349            add     a,r2
032D 2A        1350            add     a,r2
032E 90CBC0    1351            mov     dptr,#L016013?
0331 73        1352            jmp     @a+dptr
0332           1353   L016013?:
0332 020000    1354            ljmp    L016001?
0335 020000    1355            ljmp    L016002?
0338 020000    1356            ljmp    L016003?
033B 020000    1357            ljmp    L016004?
033E           1358   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:305: case 0: P0MDOUT &= mask; break;
033E           1359   L016001?:
033E EB        1360            mov     a,r3
033F 52A4      1361            anl     _P0MDOUT,a
0341           1362   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:306: case 1: P1MDOUT &= mask; break;
0341 22        1363            ret
0342           1364   L016002?:
0342 EB        1365            mov     a,r3
0343 52A5      1366            anl     _P1MDOUT,a
0345           1367   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:307: case 2: P2MDOUT &= mask; break; 
0345 22        1368            ret
0346           1369   L016003?:
0346 EB        1370            mov     a,r3
0347 52A6      1371            anl     _P2MDOUT,a
0349           1372   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:308: case 3: P3MDOUT &= mask; break; 
0349 22        1373            ret
034A           1374   L016004?:
034A EB        1375            mov     a,r3
034B 529C      1376            anl     _P3MDOUT,a
034D           1377   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:309: }   
034D           1378   L016006?:
034D 22        1379            ret
034E           1380   ;------------------------------------------------------------
034E           1381   ;Allocation info for local variables in function 'Set_Pin_Output'
034E           1382   ;------------------------------------------------------------
034E           1383   ;pin                       Allocated to registers r2 
034E           1384   ;mask                      Allocated to registers r3 
034E           1385   ;------------------------------------------------------------
034E           1386   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:312: void Set_Pin_Output (unsigned char pin)
034E           1387   ;        -----------------------------------------
034E           1388   ;         function Set_Pin_Output
034E           1389   ;        -----------------------------------------
034E           1390   _Set_Pin_Output:
034E AA82      1391            mov     r2,dpl
0350           1392   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:316: mask=(1<<(pin&0x7));
0350 7407      1393            mov     a,#0x07
0352 5A        1394            anl     a,r2
0353 F5F0      1395            mov     b,a
0355 05F0      1396            inc     b
0357 7401      1397            mov     a,#0x01
0359 8000      1398            sjmp    L017011?
035B           1399   L017009?:
035B 25E0      1400            add     a,acc
035D           1401   L017011?:
035D D5F040    1402            djnz    b,L017009?
0360 FB        1403            mov     r3,a
0361           1404   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:317: switch(pin/0x10)
0361 EA        1405            mov     a,r2
0362 C4        1406            swap    a
0363 540F      1407            anl     a,#0x0f
0365 FA        1408            mov  r2,a
0366 24FC      1409            add     a,#0xff - 0x03
0368 4000      1410            jc      L017006?
036A EA        1411            mov     a,r2
036B 2A        1412            add     a,r2
036C 2A        1413            add     a,r2
036D 90CDC0    1414            mov     dptr,#L017013?
0370 73        1415            jmp     @a+dptr
0371           1416   L017013?:
0371 020000    1417            ljmp    L017001?
0374 020000    1418            ljmp    L017002?
0377 020000    1419            ljmp    L017003?
037A 020000    1420            ljmp    L017004?
037D           1421   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:319: case 0: P0MDOUT |= mask; break;
037D           1422   L017001?:
037D EB        1423            mov     a,r3
037E 42A4      1424            orl     _P0MDOUT,a
0380           1425   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:320: case 1: P1MDOUT |= mask; break;
0380 22        1426            ret
0381           1427   L017002?:
0381 EB        1428            mov     a,r3
0382 42A5      1429            orl     _P1MDOUT,a
0384           1430   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:321: case 2: P2MDOUT |= mask; break; 
0384 22        1431            ret
0385           1432   L017003?:
0385 EB        1433            mov     a,r3
0386 42A6      1434            orl     _P2MDOUT,a
0388           1435   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:322: case 3: P3MDOUT |= mask; break; 
0388 22        1436            ret
0389           1437   L017004?:
0389 EB        1438            mov     a,r3
038A 429C      1439            orl     _P3MDOUT,a
038C           1440   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:323: }   
038C           1441   L017006?:
038C 22        1442            ret
038D           1443   ;------------------------------------------------------------
038D           1444   ;Allocation info for local variables in function 'Set_Pin_One'
038D           1445   ;------------------------------------------------------------
038D           1446   ;pin                       Allocated to registers r2 
038D           1447   ;mask                      Allocated to registers r3 
038D           1448   ;------------------------------------------------------------
038D           1449   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:326: void Set_Pin_One (unsigned char pin)
038D           1450   ;        -----------------------------------------
038D           1451   ;         function Set_Pin_One
038D           1452   ;        -----------------------------------------
038D           1453   _Set_Pin_One:
038D AA82      1454            mov     r2,dpl
038F           1455   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:330: mask=(1<<(pin&0x7));
038F 7407      1456            mov     a,#0x07
0391 5A        1457            anl     a,r2
0392 F5F0      1458            mov     b,a
0394 05F0      1459            inc     b
0396 7401      1460            mov     a,#0x01
0398 8000      1461            sjmp    L018011?
039A           1462   L018009?:
039A 25E0      1463            add     a,acc
039C           1464   L018011?:
039C D5F040    1465            djnz    b,L018009?
039F FB        1466            mov     r3,a
03A0           1467   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:331: switch(pin/0x10)
03A0 EA        1468            mov     a,r2
03A1 C4        1469            swap    a
03A2 540F      1470            anl     a,#0x0f
03A4 FA        1471            mov  r2,a
03A5 24FC      1472            add     a,#0xff - 0x03
03A7 4000      1473            jc      L018006?
03A9 EA        1474            mov     a,r2
03AA 2A        1475            add     a,r2
03AB 2A        1476            add     a,r2
03AC 90CFC0    1477            mov     dptr,#L018013?
03AF 73        1478            jmp     @a+dptr
03B0           1479   L018013?:
03B0 020000    1480            ljmp    L018001?
03B3 020000    1481            ljmp    L018002?
03B6 020000    1482            ljmp    L018003?
03B9 020000    1483            ljmp    L018004?
03BC           1484   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:333: case 0: P0 |= mask; break;
03BC           1485   L018001?:
03BC EB        1486            mov     a,r3
03BD 4280      1487            orl     _P0,a
03BF           1488   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:334: case 1: P1 |= mask; break;
03BF 22        1489            ret
03C0           1490   L018002?:
03C0 EB        1491            mov     a,r3
03C1 4290      1492            orl     _P1,a
03C3           1493   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:335: case 2: P2 |= mask; break; 
03C3 22        1494            ret
03C4           1495   L018003?:
03C4 EB        1496            mov     a,r3
03C5 42A0      1497            orl     _P2,a
03C7           1498   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:336: case 3: P3 |= mask; break; 
03C7 22        1499            ret
03C8           1500   L018004?:
03C8 EB        1501            mov     a,r3
03C9 42B0      1502            orl     _P3,a
03CB           1503   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:337: }   
03CB           1504   L018006?:
03CB 22        1505            ret
03CC           1506   ;------------------------------------------------------------
03CC           1507   ;Allocation info for local variables in function 'Set_Pin_Zero'
03CC           1508   ;------------------------------------------------------------
03CC           1509   ;pin                       Allocated to registers r2 
03CC           1510   ;mask                      Allocated to registers r3 
03CC           1511   ;------------------------------------------------------------
03CC           1512   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:340: void Set_Pin_Zero (unsigned char pin)
03CC           1513   ;        -----------------------------------------
03CC           1514   ;         function Set_Pin_Zero
03CC           1515   ;        -----------------------------------------
03CC           1516   _Set_Pin_Zero:
03CC AA82      1517            mov     r2,dpl
03CE           1518   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:344: mask=(1<<(pin&0x7));
03CE 7407      1519            mov     a,#0x07
03D0 5A        1520            anl     a,r2
03D1 F5F0      1521            mov     b,a
03D3 05F0      1522            inc     b
03D5 7401      1523            mov     a,#0x01
03D7 8000      1524            sjmp    L019011?
03D9           1525   L019009?:
03D9 25E0      1526            add     a,acc
03DB           1527   L019011?:
03DB D5F040    1528            djnz    b,L019009?
03DE           1529   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:345: mask=~mask;
03DE F4        1530            cpl     a
03DF FB        1531            mov     r3,a
03E0           1532   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:346: switch(pin/0x10)
03E0 EA        1533            mov     a,r2
03E1 C4        1534            swap    a
03E2 540F      1535            anl     a,#0x0f
03E4 FA        1536            mov  r2,a
03E5 24FC      1537            add     a,#0xff - 0x03
03E7 4000      1538            jc      L019006?
03E9 EA        1539            mov     a,r2
03EA 2A        1540            add     a,r2
03EB 2A        1541            add     a,r2
03EC 90D1C0    1542            mov     dptr,#L019013?
03EF 73        1543            jmp     @a+dptr
03F0           1544   L019013?:
03F0 020000    1545            ljmp    L019001?
03F3 020000    1546            ljmp    L019002?
03F6 020000    1547            ljmp    L019003?
03F9 020000    1548            ljmp    L019004?
03FC           1549   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:348: case 0: P0 &= mask; break;
03FC           1550   L019001?:
03FC EB        1551            mov     a,r3
03FD 5280      1552            anl     _P0,a
03FF           1553   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:349: case 1: P1 &= mask; break;
03FF 22        1554            ret
0400           1555   L019002?:
0400 EB        1556            mov     a,r3
0401 5290      1557            anl     _P1,a
0403           1558   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:350: case 2: P2 &= mask; break; 
0403 22        1559            ret
0404           1560   L019003?:
0404 EB        1561            mov     a,r3
0405 52A0      1562            anl     _P2,a
0407           1563   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:351: case 3: P3 &= mask; break; 
0407 22        1564            ret
0408           1565   L019004?:
0408 EB        1566            mov     a,r3
0409 52B0      1567            anl     _P3,a
040B           1568   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:352: }   
040B           1569   L019006?:
040B 22        1570            ret
040C           1571   ;------------------------------------------------------------
040C           1572   ;Allocation info for local variables in function 'InitADC'
040C           1573   ;------------------------------------------------------------
040C           1574   ;------------------------------------------------------------
040C           1575   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:357: void InitADC (void)
040C           1576   ;        -----------------------------------------
040C           1577   ;         function InitADC
040C           1578   ;        -----------------------------------------
040C           1579   _InitADC:
040C           1580   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:359: SFRPAGE = 0x00;
040C 75A700    1581            mov     _SFRPAGE,#0x00
040F           1582   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:360: ADEN=0; // Disable ADC
040F C2EF      1583            clr     _ADEN
0411           1584   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:365: (0x0 << 0) ; // Accumulate n conversions: 0x0: 1, 0x1:4, 0x2:8, 0x3:16, 0x4:32
0411 75B280    1585            mov     _ADC0CN1,#0x80
0414           1586   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:369: (0x0 << 2); // 0:SYSCLK ADCCLK = SYSCLK. 1:HFOSC0 ADCCLK = HFOSC0.
0414 75BC20    1587            mov     _ADC0CF0,#0x20
0417           1588   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:373: (0x1E << 0); // Conversion Tracking Time. Tadtk = ADTK / (Fsarclk)
0417 75B91E    1589            mov     _ADC0CF1,#0x1E
041A           1590   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:382: (0x0 << 0) ; // TEMPE. 0: Disable the Temperature Sensor. 1: Enable the Temperature Sensor.
041A 75E800    1591            mov     _ADC0CN0,#0x00
041D           1592   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:387: (0x1F << 0); // ADPWR. Power Up Delay Time. Tpwrtime = ((4 * (ADPWR + 1)) + 2) / (Fadcclk)
041D 75DF3F    1593            mov     _ADC0CF2,#0x3F
0420           1594   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:391: (0x0 << 0) ; // ADCM. 0x0: ADBUSY, 0x1: TIMER0, 0x2: TIMER2, 0x3: TIMER3, 0x4: CNVSTR, 0x5: CEX5, 0x6: TIMER4, 0x7: TIMER5, 0x8: CLU0, 0x9: CLU1, 0xA: CLU2, 0xB: CLU3
0420 75B300    1595            mov     _ADC0CN2,#0x00
0423           1596   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:393: ADEN=1; // Enable ADC
0423 D2EF      1597            setb    _ADEN
0425 22        1598            ret
0426           1599   ;------------------------------------------------------------
0426           1600   ;Allocation info for local variables in function 'InitPinADC'
0426           1601   ;------------------------------------------------------------
0426           1602   ;mask                      Allocated with name '_InitPinADC_mask_1_119'
0426           1603   ;pinno                     Allocated with name '_InitPinADC_PARM_2'
0426           1604   ;portno                    Allocated to registers r2 
0426           1605   ;------------------------------------------------------------
0426           1606   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:396: void InitPinADC (unsigned char portno, unsigned char pinno)
0426           1607   ;        -----------------------------------------
0426           1608   ;         function InitPinADC
0426           1609   ;        -----------------------------------------
0426           1610   _InitPinADC:
0426 AA82      1611            mov     r2,dpl
0428           1612   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:400: mask=1<<pinno;
0428 8560F0    1613            mov     b,_InitPinADC_PARM_2
042B 05F0      1614            inc     b
042D 7401      1615            mov     a,#0x01
042F 8000      1616            sjmp    L021013?
0431           1617   L021011?:
0431 25E0      1618            add     a,acc
0433           1619   L021013?:
0433 D5F040    1620            djnz    b,L021011?
0436 FB        1621            mov     r3,a
0437           1622   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:402: SFRPAGE = 0x20;
0437 75A720    1623            mov     _SFRPAGE,#0x20
043A           1624   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:403: switch (portno)
043A BA0080    1625            cjne    r2,#0x00,L021014?
043D 8000      1626            sjmp    L021001?
043F           1627   L021014?:
043F BA0100    1628            cjne    r2,#0x01,L021015?
0442 8000      1629            sjmp    L021002?
0444           1630   L021015?:
0444           1631   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:405: case 0:
0444 BA0280    1632            cjne    r2,#0x02,L021005?
0447 8000      1633            sjmp    L021003?
0449           1634   L021001?:
0449           1635   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:406: P0MDIN &= (~mask); // Set pin as analog input
0449 EB        1636            mov     a,r3
044A F4        1637            cpl     a
044B FA        1638            mov     r2,a
044C 52F1      1639            anl     _P0MDIN,a
044E           1640   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:407: P0SKIP |= mask; // Skip Crossbar decoding for this pin
044E EB        1641            mov     a,r3
044F 42D4      1642            orl     _P0SKIP,a
0451           1643   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:408: break;
0451           1644   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:409: case 1:
0451 8000      1645            sjmp    L021005?
0453           1646   L021002?:
0453           1647   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:410: P1MDIN &= (~mask); // Set pin as analog input
0453 EB        1648            mov     a,r3
0454 F4        1649            cpl     a
0455 FA        1650            mov     r2,a
0456 52F2      1651            anl     _P1MDIN,a
0458           1652   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:411: P1SKIP |= mask; // Skip Crossbar decoding for this pin
0458 EB        1653            mov     a,r3
0459 42D5      1654            orl     _P1SKIP,a
045B           1655   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:412: break;
045B           1656   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:413: case 2:
045B 8000      1657            sjmp    L021005?
045D           1658   L021003?:
045D           1659   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:414: P2MDIN &= (~mask); // Set pin as analog input
045D EB        1660            mov     a,r3
045E F4        1661            cpl     a
045F FA        1662            mov     r2,a
0460 52F3      1663            anl     _P2MDIN,a
0462           1664   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:415: P2SKIP |= mask; // Skip Crossbar decoding for this pin
0462 EB        1665            mov     a,r3
0463 42CC      1666            orl     _P2SKIP,a
0465           1667   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:419: }
0465           1668   L021005?:
0465           1669   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:420: SFRPAGE = 0x00;
0465 75A700    1670            mov     _SFRPAGE,#0x00
0468 22        1671            ret
0469           1672   ;------------------------------------------------------------
0469           1673   ;Allocation info for local variables in function 'ADC_at_Pin'
0469           1674   ;------------------------------------------------------------
0469           1675   ;pin                       Allocated to registers 
0469           1676   ;------------------------------------------------------------
0469           1677   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:423: xdata unsigned int ADC_at_Pin(unsigned char pin)
0469           1678   ;        -----------------------------------------
0469           1679   ;         function ADC_at_Pin
0469           1680   ;        -----------------------------------------
0469           1681   _ADC_at_Pin:
0469 8582BB    1682            mov     _ADC0MX,dpl
046C           1683   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:426: ADINT = 0;
046C C2ED      1684            clr     _ADINT
046E           1685   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:427: ADBUSY = 1;     // Convert voltage at the pin
046E D2EC      1686            setb    _ADBUSY
0470           1687   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:428: while (!ADINT); // Wait for conversion to complete
0470           1688   L022001?:
0470 30ED00    1689            jnb     _ADINT,L022001?
0473           1690   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:429: return (ADC0);
0473 85BD82    1691            mov     dpl,_ADC0
0476 85BE83    1692            mov     dph,(_ADC0 >> 8)
0479 22        1693            ret
047A           1694   ;------------------------------------------------------------
047A           1695   ;Allocation info for local variables in function 'Volts_at_Pin'
047A           1696   ;------------------------------------------------------------
047A           1697   ;pin                       Allocated to registers r2 
047A           1698   ;------------------------------------------------------------
047A           1699   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:432: float Volts_at_Pin(unsigned char pin) 
047A           1700   ;        -----------------------------------------
047A           1701   ;         function Volts_at_Pin
047A           1702   ;        -----------------------------------------
047A           1703   _Volts_at_Pin:
047A           1704   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:434: return ((ADC_at_Pin(pin)*VDD)/0b_0011_1111_1111_1111);
047A 120000    1705            lcall   _ADC_at_Pin
047D 120000    1706            lcall   ___uint2fs
0480 AA82      1707            mov     r2,dpl
0482 AB83      1708            mov     r3,dph
0484 ACF0      1709            mov     r4,b
0486 FD        1710            mov     r5,a
0487 C002      1711            push    ar2
0489 C003      1712            push    ar3
048B C004      1713            push    ar4
048D C005      1714            push    ar5
048F 9053F8    1715            mov     dptr,#0x53F8
0492 75F053    1716            mov     b,#0x53
0495 7440      1717            mov     a,#0x40
0497 120000    1718            lcall   ___fsmul
049A AA82      1719            mov     r2,dpl
049C AB83      1720            mov     r3,dph
049E ACF0      1721            mov     r4,b
04A0 FD        1722            mov     r5,a
04A1 E581      1723            mov     a,sp
04A3 24FC      1724            add     a,#0xfc
04A5 F581      1725            mov     sp,a
04A7 E4        1726            clr     a
04A8 C0E0      1727            push    acc
04AA 74FC      1728            mov     a,#0xFC
04AC C0E0      1729            push    acc
04AE 747F      1730            mov     a,#0x7F
04B0 C0E0      1731            push    acc
04B2 7446      1732            mov     a,#0x46
04B4 C0E0      1733            push    acc
04B6 8A82      1734            mov     dpl,r2
04B8 8B83      1735            mov     dph,r3
04BA 8CF0      1736            mov     b,r4
04BC ED        1737            mov     a,r5
04BD 120000    1738            lcall   ___fsdiv
04C0 AA82      1739            mov     r2,dpl
04C2 AB83      1740            mov     r3,dph
04C4 ACF0      1741            mov     r4,b
04C6 FD        1742            mov     r5,a
04C7 E581      1743            mov     a,sp
04C9 24FC      1744            add     a,#0xfc
04CB F581      1745            mov     sp,a
04CD 8A82      1746            mov     dpl,r2
04CF 8B83      1747            mov     dph,r3
04D1 8CF0      1748            mov     b,r4
04D3 ED        1749            mov     a,r5
04D4 22        1750            ret
04D5           1751   ;------------------------------------------------------------
04D5           1752   ;Allocation info for local variables in function 'ReadPeriod'
04D5           1753   ;------------------------------------------------------------
04D5           1754   ;period_arr                Allocated with name '_ReadPeriod_period_arr_1_125'
04D5           1755   ;period                    Allocated with name '_ReadPeriod_period_1_126'
04D5           1756   ;period_sig                Allocated to registers r2 r3 r4 r5 
04D5           1757   ;error                     Allocated with name '_ReadPeriod_error_1_126'
04D5           1758   ;------------------------------------------------------------
04D5           1759   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:437: void ReadPeriod(float *period_arr)
04D5           1760   ;        -----------------------------------------
04D5           1761   ;         function ReadPeriod
04D5           1762   ;        -----------------------------------------
04D5           1763   _ReadPeriod:
04D5 858240    1764            mov     _ReadPeriod_period_arr_1_125,dpl
04D8 858341    1765            mov     (_ReadPeriod_period_arr_1_125 + 1),dph
04DB 85F042    1766            mov     (_ReadPeriod_period_arr_1_125 + 2),b
04DE           1767   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:444: overflow_count = 0; 
04DE 901A90    1768            mov     dptr,#_overflow_count
04E1 E4        1769            clr     a
04E2 F0        1770            movx    @dptr,a
04E3           1771   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:446: TR0 = 0; // make sure timer0 is stopped
04E3 C28C      1772            clr     _TR0
04E5           1773   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:447: TH0 = 0; TL0 = 0; TF0 = 0;
04E5 758C00    1774            mov     _TH0,#0x00
04E8 758A00    1775            mov     _TL0,#0x00
04EB C28D      1776            clr     _TF0
04ED           1777   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:450: while(Phasor_ref == 1); // wait for the signal to be zero
04ED           1778   L024001?:
04ED 20A640    1779            jb      _P2_6,L024001?
04F0           1780   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:451: while(Phasor_ref == 0); // wait for the signal to be one
04F0           1781   L024004?:
04F0 30A680    1782            jnb     _P2_6,L024004?
04F3           1783   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:452: TR0 = 1; // start timing 
04F3 D28C      1784            setb    _TR0
04F5           1785   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:453: while(Phasor_ref == 1) // Wait for the signal to be zero
04F5           1786   L024009?:
04F5 30A600    1787            jnb     _P2_6,L024014?
04F8           1788   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:455: if(TF0==1) // Did the 16-bit timer overflow?
04F8           1789   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:457: TF0=0;
04F8 108D40    1790            jbc     _TF0,L024059?
04FB 8000      1791            sjmp    L024009?
04FD           1792   L024059?:
04FD           1793   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:458: overflow_count++;
04FD 901A90    1794            mov     dptr,#_overflow_count
0500 E0        1795            movx    a,@dptr
0501 2401      1796            add     a,#0x01
0503 F0        1797            movx    @dptr,a
0504           1798   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:461: while(Phasor_ref == 0) // Wait for the signal to be one
0504 8000      1799            sjmp    L024009?
0506           1800   L024014?:
0506 20A680    1801            jb      _P2_6,L024016?
0509           1802   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:463: if(TF0==1) // Did the 16-bit timer overflow?
0509           1803   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:465: TF0=0;
0509 108DC0    1804            jbc     _TF0,L024061?
050C 8000      1805            sjmp    L024014?
050E           1806   L024061?:
050E           1807   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:466: overflow_count++;
050E 901A90    1808            mov     dptr,#_overflow_count
0511 E0        1809            movx    a,@dptr
0512 2401      1810            add     a,#0x01
0514 F0        1811            movx    @dptr,a
0515 8000      1812            sjmp    L024014?
0517           1813   L024016?:
0517           1814   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:469: TR0=0;
0517 C28C      1815            clr     _TR0
0519           1816   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:470: period=(overflow_count * 65536.0 + TH0 * 256.0 + TL0) * (12.0 / SYSCLK);
0519 901A90    1817            mov     dptr,#_overflow_count
051C E0        1818            movx    a,@dptr
051D F582      1819            mov     dpl,a
051F 120000    1820            lcall   ___uchar2fs
0522 AD82      1821            mov     r5,dpl
0524 AE83      1822            mov     r6,dph
0526 AFF0      1823            mov     r7,b
0528 F8        1824            mov     r0,a
0529 C005      1825            push    ar5
052B C006      1826            push    ar6
052D C007      1827            push    ar7
052F C000      1828            push    ar0
0531 900000    1829            mov     dptr,#0x0000
0534 75F080    1830            mov     b,#0x80
0537 7447      1831            mov     a,#0x47
0539 120000    1832            lcall   ___fsmul
053C AD82      1833            mov     r5,dpl
053E AE83      1834            mov     r6,dph
0540 AFF0      1835            mov     r7,b
0542 F8        1836            mov     r0,a
0543 E581      1837            mov     a,sp
0545 24FC      1838            add     a,#0xfc
0547 F581      1839            mov     sp,a
0549 858C82    1840            mov     dpl,_TH0
054C C005      1841            push    ar5
054E C006      1842            push    ar6
0550 C007      1843            push    ar7
0552 C000      1844            push    ar0
0554 120000    1845            lcall   ___uchar2fs
0557 A982      1846            mov     r1,dpl
0559 AA83      1847            mov     r2,dph
055B ABF0      1848            mov     r3,b
055D FC        1849            mov     r4,a
055E C001      1850            push    ar1
0560 C002      1851            push    ar2
0562 C003      1852            push    ar3
0564 C004      1853            push    ar4
0566 900000    1854            mov     dptr,#0x0000
0569 75F080    1855            mov     b,#0x80
056C 7443      1856            mov     a,#0x43
056E 120000    1857            lcall   ___fsmul
0571 AA82      1858            mov     r2,dpl
0573 AB83      1859            mov     r3,dph
0575 ACF0      1860            mov     r4,b
0577 F9        1861            mov     r1,a
0578 E581      1862            mov     a,sp
057A 24FC      1863            add     a,#0xfc
057C F581      1864            mov     sp,a
057E D000      1865            pop     ar0
0580 D007      1866            pop     ar7
0582 D006      1867            pop     ar6
0584 D005      1868            pop     ar5
0586 C002      1869            push    ar2
0588 C003      1870            push    ar3
058A C004      1871            push    ar4
058C C001      1872            push    ar1
058E 8D82      1873            mov     dpl,r5
0590 8E83      1874            mov     dph,r6
0592 8FF0      1875            mov     b,r7
0594 E8        1876            mov     a,r0
0595 120000    1877            lcall   ___fsadd
0598 AA82      1878            mov     r2,dpl
059A AB83      1879            mov     r3,dph
059C ACF0      1880            mov     r4,b
059E FD        1881            mov     r5,a
059F E581      1882            mov     a,sp
05A1 24FC      1883            add     a,#0xfc
05A3 F581      1884            mov     sp,a
05A5 AE8A      1885            mov     r6,_TL0
05A7 7F00      1886            mov     r7,#0x00
05A9 8E82      1887            mov     dpl,r6
05AB 8F83      1888            mov     dph,r7
05AD C002      1889            push    ar2
05AF C003      1890            push    ar3
05B1 C004      1891            push    ar4
05B3 C005      1892            push    ar5
05B5 120000    1893            lcall   ___sint2fs
05B8 AE82      1894            mov     r6,dpl
05BA AF83      1895            mov     r7,dph
05BC A8F0      1896            mov     r0,b
05BE F9        1897            mov     r1,a
05BF D005      1898            pop     ar5
05C1 D004      1899            pop     ar4
05C3 D003      1900            pop     ar3
05C5 D002      1901            pop     ar2
05C7 C006      1902            push    ar6
05C9 C007      1903            push    ar7
05CB C000      1904            push    ar0
05CD C001      1905            push    ar1
05CF 8A82      1906            mov     dpl,r2
05D1 8B83      1907            mov     dph,r3
05D3 8CF0      1908            mov     b,r4
05D5 ED        1909            mov     a,r5
05D6 120000    1910            lcall   ___fsadd
05D9 AA82      1911            mov     r2,dpl
05DB AB83      1912            mov     r3,dph
05DD ACF0      1913            mov     r4,b
05DF FD        1914            mov     r5,a
05E0 E581      1915            mov     a,sp
05E2 24FC      1916            add     a,#0xfc
05E4 F581      1917            mov     sp,a
05E6 C002      1918            push    ar2
05E8 C003      1919            push    ar3
05EA C004      1920            push    ar4
05EC C005      1921            push    ar5
05EE 90F4FC    1922            mov     dptr,#0xF4FC
05F1 75F032    1923            mov     b,#0x32
05F4 7434      1924            mov     a,#0x34
05F6 120000    1925            lcall   ___fsmul
05F9 858290    1926            mov     _ReadPeriod_period_1_126,dpl
05FC 858391    1927            mov     (_ReadPeriod_period_1_126 + 1),dph
05FF 85F092    1928            mov     (_ReadPeriod_period_1_126 + 2),b
0602 F593      1929            mov     (_ReadPeriod_period_1_126 + 3),a
0604 E581      1930            mov     a,sp
0606 24FC      1931            add     a,#0xfc
0608 F581      1932            mov     sp,a
060A           1933   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:473: overflow_count = 0; 
060A 901A90    1934            mov     dptr,#_overflow_count
060D E4        1935            clr     a
060E F0        1936            movx    @dptr,a
060F           1937   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:474: TH0 = 0; TL0 = 0; TF0 = 0;
060F 758C00    1938            mov     _TH0,#0x00
0612 758A00    1939            mov     _TL0,#0x00
0615 C28D      1940            clr     _TF0
0617           1941   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:475: while(Phasor_sig == 1); // wait for the signal to be zero
0617           1942   L024017?:
0617 2094C0    1943            jb      _P1_4,L024017?
061A           1944   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:476: while(Phasor_sig == 0); // wait for the signal to be one
061A           1945   L024020?:
061A 309400    1946            jnb     _P1_4,L024020?
061D           1947   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:477: TR0 = 1; // start timing 
061D D28C      1948            setb    _TR0
061F           1949   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:478: while(Phasor_sig == 1) // Wait for the signal to be zero
061F           1950   L024025?:
061F 309480    1951            jnb     _P1_4,L024030?
0622           1952   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:480: if(TF0==1) // Did the 16-bit timer overflow?
0622           1953   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:482: TF0=0;
0622 108DC0    1954            jbc     _TF0,L024065?
0625 8000      1955            sjmp    L024025?
0627           1956   L024065?:
0627           1957   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:483: overflow_count++;
0627 901A90    1958            mov     dptr,#_overflow_count
062A E0        1959            movx    a,@dptr
062B 2401      1960            add     a,#0x01
062D F0        1961            movx    @dptr,a
062E           1962   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:486: while(Phasor_sig == 0) // Wait for the signal to be one
062E 8000      1963            sjmp    L024025?
0630           1964   L024030?:
0630 209400    1965            jb      _P1_4,L024032?
0633           1966   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:488: if(TF0==1) // Did the 16-bit timer overflow?
0633           1967   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:490: TF0=0;
0633 108D40    1968            jbc     _TF0,L024067?
0636 8000      1969            sjmp    L024030?
0638           1970   L024067?:
0638           1971   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:491: overflow_count++;
0638 901A90    1972            mov     dptr,#_overflow_count
063B E0        1973            movx    a,@dptr
063C 2401      1974            add     a,#0x01
063E F0        1975            movx    @dptr,a
063F 8000      1976            sjmp    L024030?
0641           1977   L024032?:
0641           1978   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:494: TR0=0;
0641 C28C      1979            clr     _TR0
0643           1980   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:495: period_sig=(overflow_count * 65536.0 + TH0 * 256.0 + TL0) * (12.0 / SYSCLK);
0643 901A90    1981            mov     dptr,#_overflow_count
0646 E0        1982            movx    a,@dptr
0647 F582      1983            mov     dpl,a
0649 120000    1984            lcall   ___uchar2fs
064C AE82      1985            mov     r6,dpl
064E AF83      1986            mov     r7,dph
0650 A8F0      1987            mov     r0,b
0652 F9        1988            mov     r1,a
0653 C006      1989            push    ar6
0655 C007      1990            push    ar7
0657 C000      1991            push    ar0
0659 C001      1992            push    ar1
065B 900000    1993            mov     dptr,#0x0000
065E 75F080    1994            mov     b,#0x80
0661 7447      1995            mov     a,#0x47
0663 120000    1996            lcall   ___fsmul
0666 AE82      1997            mov     r6,dpl
0668 AF83      1998            mov     r7,dph
066A A8F0      1999            mov     r0,b
066C F9        2000            mov     r1,a
066D E581      2001            mov     a,sp
066F 24FC      2002            add     a,#0xfc
0671 F581      2003            mov     sp,a
0673 858C82    2004            mov     dpl,_TH0
0676 C006      2005            push    ar6
0678 C007      2006            push    ar7
067A C000      2007            push    ar0
067C C001      2008            push    ar1
067E 120000    2009            lcall   ___uchar2fs
0681 AA82      2010            mov     r2,dpl
0683 AB83      2011            mov     r3,dph
0685 ACF0      2012            mov     r4,b
0687 FD        2013            mov     r5,a
0688 C002      2014            push    ar2
068A C003      2015            push    ar3
068C C004      2016            push    ar4
068E C005      2017            push    ar5
0690 900000    2018            mov     dptr,#0x0000
0693 75F080    2019            mov     b,#0x80
0696 7443      2020            mov     a,#0x43
0698 120000    2021            lcall   ___fsmul
069B AA82      2022            mov     r2,dpl
069D AB83      2023            mov     r3,dph
069F ACF0      2024            mov     r4,b
06A1 FD        2025            mov     r5,a
06A2 E581      2026            mov     a,sp
06A4 24FC      2027            add     a,#0xfc
06A6 F581      2028            mov     sp,a
06A8 D001      2029            pop     ar1
06AA D000      2030            pop     ar0
06AC D007      2031            pop     ar7
06AE D006      2032            pop     ar6
06B0 C002      2033            push    ar2
06B2 C003      2034            push    ar3
06B4 C004      2035            push    ar4
06B6 C005      2036            push    ar5
06B8 8E82      2037            mov     dpl,r6
06BA 8F83      2038            mov     dph,r7
06BC 88F0      2039            mov     b,r0
06BE E9        2040            mov     a,r1
06BF 120000    2041            lcall   ___fsadd
06C2 AA82      2042            mov     r2,dpl
06C4 AB83      2043            mov     r3,dph
06C6 ACF0      2044            mov     r4,b
06C8 FD        2045            mov     r5,a
06C9 E581      2046            mov     a,sp
06CB 24FC      2047            add     a,#0xfc
06CD F581      2048            mov     sp,a
06CF AE8A      2049            mov     r6,_TL0
06D1 7F00      2050            mov     r7,#0x00
06D3 8E82      2051            mov     dpl,r6
06D5 8F83      2052            mov     dph,r7
06D7 C002      2053            push    ar2
06D9 C003      2054            push    ar3
06DB C004      2055            push    ar4
06DD C005      2056            push    ar5
06DF 120000    2057            lcall   ___sint2fs
06E2 AE82      2058            mov     r6,dpl
06E4 AF83      2059            mov     r7,dph
06E6 A8F0      2060            mov     r0,b
06E8 F9        2061            mov     r1,a
06E9 D005      2062            pop     ar5
06EB D004      2063            pop     ar4
06ED D003      2064            pop     ar3
06EF D002      2065            pop     ar2
06F1 C006      2066            push    ar6
06F3 C007      2067            push    ar7
06F5 C000      2068            push    ar0
06F7 C001      2069            push    ar1
06F9 8A82      2070            mov     dpl,r2
06FB 8B83      2071            mov     dph,r3
06FD 8CF0      2072            mov     b,r4
06FF ED        2073            mov     a,r5
0700 120000    2074            lcall   ___fsadd
0703 AA82      2075            mov     r2,dpl
0705 AB83      2076            mov     r3,dph
0707 ACF0      2077            mov     r4,b
0709 FD        2078            mov     r5,a
070A E581      2079            mov     a,sp
070C 24FC      2080            add     a,#0xfc
070E F581      2081            mov     sp,a
0710 C002      2082            push    ar2
0712 C003      2083            push    ar3
0714 C004      2084            push    ar4
0716 C005      2085            push    ar5
0718 90F4FC    2086            mov     dptr,#0xF4FC
071B 75F032    2087            mov     b,#0x32
071E 7434      2088            mov     a,#0x34
0720 120000    2089            lcall   ___fsmul
0723 AA82      2090            mov     r2,dpl
0725 AB83      2091            mov     r3,dph
0727 ACF0      2092            mov     r4,b
0729 FD        2093            mov     r5,a
072A E581      2094            mov     a,sp
072C 24FC      2095            add     a,#0xfc
072E F581      2096            mov     sp,a
0730           2097   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:497: error = fabsf(period_sig - period) * 100.0 / period; 
0730 C002      2098            push    ar2
0732 C003      2099            push    ar3
0734 C004      2100            push    ar4
0736 C005      2101            push    ar5
0738 C090      2102            push    _ReadPeriod_period_1_126
073A C091      2103            push    (_ReadPeriod_period_1_126 + 1)
073C C092      2104            push    (_ReadPeriod_period_1_126 + 2)
073E C093      2105            push    (_ReadPeriod_period_1_126 + 3)
0740 8A82      2106            mov     dpl,r2
0742 8B83      2107            mov     dph,r3
0744 8CF0      2108            mov     b,r4
0746 ED        2109            mov     a,r5
0747 120000    2110            lcall   ___fssub
074A AE82      2111            mov     r6,dpl
074C AF83      2112            mov     r7,dph
074E A8F0      2113            mov     r0,b
0750 F9        2114            mov     r1,a
0751 E581      2115            mov     a,sp
0753 24FC      2116            add     a,#0xfc
0755 F581      2117            mov     sp,a
0757 8E82      2118            mov     dpl,r6
0759 8F83      2119            mov     dph,r7
075B 88F0      2120            mov     b,r0
075D E9        2121            mov     a,r1
075E 120000    2122            lcall   _fabsf
0761 AE82      2123            mov     r6,dpl
0763 AF83      2124            mov     r7,dph
0765 A8F0      2125            mov     r0,b
0767 F9        2126            mov     r1,a
0768 C006      2127            push    ar6
076A C007      2128            push    ar7
076C C000      2129            push    ar0
076E C001      2130            push    ar1
0770 900000    2131            mov     dptr,#0x0000
0773 75F0C8    2132            mov     b,#0xC8
0776 7442      2133            mov     a,#0x42
0778 120000    2134            lcall   ___fsmul
077B AE82      2135            mov     r6,dpl
077D AF83      2136            mov     r7,dph
077F A8F0      2137            mov     r0,b
0781 F9        2138            mov     r1,a
0782 E581      2139            mov     a,sp
0784 24FC      2140            add     a,#0xfc
0786 F581      2141            mov     sp,a
0788 C090      2142            push    _ReadPeriod_period_1_126
078A C091      2143            push    (_ReadPeriod_period_1_126 + 1)
078C C092      2144            push    (_ReadPeriod_period_1_126 + 2)
078E C093      2145            push    (_ReadPeriod_period_1_126 + 3)
0790           2146   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:499: if (error > 15.0){
0790 8E82      2147            mov     dpl,r6
0792 8F83      2148            mov     dph,r7
0794 88F0      2149            mov     b,r0
0796 E9        2150            mov     a,r1
0797 120000    2151            lcall   ___fsdiv
079A AE82      2152            mov     r6,dpl
079C AF83      2153            mov     r7,dph
079E A8F0      2154            mov     r0,b
07A0 F9        2155            mov     r1,a
07A1 E581      2156            mov     a,sp
07A3 24FC      2157            add     a,#0xfc
07A5 F581      2158            mov     sp,a
07A7 E4        2159            clr     a
07A8 C0E0      2160            push    acc
07AA C0E0      2161            push    acc
07AC 7470      2162            mov     a,#0x70
07AE C0E0      2163            push    acc
07B0 7441      2164            mov     a,#0x41
07B2 C0E0      2165            push    acc
07B4 8E82      2166            mov     dpl,r6
07B6 8F83      2167            mov     dph,r7
07B8 88F0      2168            mov     b,r0
07BA E9        2169            mov     a,r1
07BB 120000    2170            lcall   ___fsgt
07BE AE82      2171            mov     r6,dpl
07C0 E581      2172            mov     a,sp
07C2 24FC      2173            add     a,#0xfc
07C4 F581      2174            mov     sp,a
07C6 D005      2175            pop     ar5
07C8 D004      2176            pop     ar4
07CA D003      2177            pop     ar3
07CC D002      2178            pop     ar2
07CE EE        2179            mov     a,r6
07CF 6000      2180            jz      L024034?
07D1           2181   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:500: Set_Pin_One(0x01);
07D1 758201    2182            mov     dpl,#0x01
07D4 C002      2183            push    ar2
07D6 C003      2184            push    ar3
07D8 C004      2185            push    ar4
07DA C005      2186            push    ar5
07DC 120000    2187            lcall   _Set_Pin_One
07DF           2188   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:501: waitms(100);
07DF 900064    2189            mov     dptr,#0x0064
07E2 120000    2190            lcall   _waitms
07E5           2191   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:502: Set_Pin_Zero(0x01);
07E5 758201    2192            mov     dpl,#0x01
07E8 120000    2193            lcall   _Set_Pin_Zero
07EB           2194   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:503: waitms(100);
07EB 900064    2195            mov     dptr,#0x0064
07EE 120000    2196            lcall   _waitms
07F1           2197   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:504: Set_Pin_One(0x01);
07F1 758201    2198            mov     dpl,#0x01
07F4 120000    2199            lcall   _Set_Pin_One
07F7           2200   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:505: waitms(100);
07F7 900064    2201            mov     dptr,#0x0064
07FA 120000    2202            lcall   _waitms
07FD           2203   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:506: Set_Pin_Zero(0x01);
07FD 758201    2204            mov     dpl,#0x01
0800 120000    2205            lcall   _Set_Pin_Zero
0803           2206   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:507: waitms(100);
0803 900064    2207            mov     dptr,#0x0064
0806 120000    2208            lcall   _waitms
0809 D005      2209            pop     ar5
080B D004      2210            pop     ar4
080D D003      2211            pop     ar3
080F D002      2212            pop     ar2
0811           2213   L024034?:
0811           2214   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:511: period_arr[0] = period; 
0811 854082    2215            mov     dpl,_ReadPeriod_period_arr_1_125
0814 854183    2216            mov     dph,(_ReadPeriod_period_arr_1_125 + 1)
0817 8542F0    2217            mov     b,(_ReadPeriod_period_arr_1_125 + 2)
081A E590      2218            mov     a,_ReadPeriod_period_1_126
081C 120000    2219            lcall   __gptrput
081F A3        2220            inc     dptr
0820 E591      2221            mov     a,(_ReadPeriod_period_1_126 + 1)
0822 120000    2222            lcall   __gptrput
0825 A3        2223            inc     dptr
0826 E592      2224            mov     a,(_ReadPeriod_period_1_126 + 2)
0828 120000    2225            lcall   __gptrput
082B A3        2226            inc     dptr
082C E593      2227            mov     a,(_ReadPeriod_period_1_126 + 3)
082E 120000    2228            lcall   __gptrput
0831           2229   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:512: period_arr[1] = period_sig;
0831 7404      2230            mov     a,#0x04
0833 2540      2231            add     a,_ReadPeriod_period_arr_1_125
0835 FE        2232            mov     r6,a
0836 E4        2233            clr     a
0837 3541      2234            addc    a,(_ReadPeriod_period_arr_1_125 + 1)
0839 FF        2235            mov     r7,a
083A A842      2236            mov     r0,(_ReadPeriod_period_arr_1_125 + 2)
083C 8E82      2237            mov     dpl,r6
083E 8F83      2238            mov     dph,r7
0840 88F0      2239            mov     b,r0
0842 EA        2240            mov     a,r2
0843 120000    2241            lcall   __gptrput
0846 A3        2242            inc     dptr
0847 EB        2243            mov     a,r3
0848 120000    2244            lcall   __gptrput
084B A3        2245            inc     dptr
084C EC        2246            mov     a,r4
084D 120000    2247            lcall   __gptrput
0850 A3        2248            inc     dptr
0851 ED        2249            mov     a,r5
0852 020000    2250            ljmp    __gptrput
0855           2251   ;------------------------------------------------------------
0855           2252   ;Allocation info for local variables in function 'ReadPeak'
0855           2253   ;------------------------------------------------------------
0855           2254   ;vpeak                     Allocated with name '_ReadPeak_PARM_2'
0855           2255   ;period                    Allocated to registers r2 r3 r4 r5 
0855           2256   ;temp                      Allocated to registers r2 r3 r4 r5 
0855           2257   ;delay_us                  Allocated with name '_ReadPeak_delay_us_1_137'
0855           2258   ;------------------------------------------------------------
0855           2259   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:516: void ReadPeak(float period, float *vpeak)
0855           2260   ;        -----------------------------------------
0855           2261   ;         function ReadPeak
0855           2262   ;        -----------------------------------------
0855           2263   _ReadPeak:
0855 AA82      2264            mov     r2,dpl
0857 AB83      2265            mov     r3,dph
0859 ACF0      2266            mov     r4,b
085B FD        2267            mov     r5,a
085C           2268   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:518: float temp = period * 1e6 / 4; // Period/4 in us
085C C002      2269            push    ar2
085E C003      2270            push    ar3
0860 C004      2271            push    ar4
0862 C005      2272            push    ar5
0864 902400    2273            mov     dptr,#0x2400
0867 75F074    2274            mov     b,#0x74
086A 7449      2275            mov     a,#0x49
086C 120000    2276            lcall   ___fsmul
086F AA82      2277            mov     r2,dpl
0871 AB83      2278            mov     r3,dph
0873 ACF0      2279            mov     r4,b
0875 FD        2280            mov     r5,a
0876 E581      2281            mov     a,sp
0878 24FC      2282            add     a,#0xfc
087A F581      2283            mov     sp,a
087C E4        2284            clr     a
087D C0E0      2285            push    acc
087F C0E0      2286            push    acc
0881 7480      2287            mov     a,#0x80
0883 C0E0      2288            push    acc
0885 7440      2289            mov     a,#0x40
0887 C0E0      2290            push    acc
0889 8A82      2291            mov     dpl,r2
088B 8B83      2292            mov     dph,r3
088D 8CF0      2293            mov     b,r4
088F ED        2294            mov     a,r5
0890 120000    2295            lcall   ___fsdiv
0893 AA82      2296            mov     r2,dpl
0895 AB83      2297            mov     r3,dph
0897 ACF0      2298            mov     r4,b
0899 FD        2299            mov     r5,a
089A E581      2300            mov     a,sp
089C 24FC      2301            add     a,#0xfc
089E F581      2302            mov     sp,a
08A0           2303   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:519: int delay_us = (int) temp; 
08A0 8A82      2304            mov     dpl,r2
08A2 8B83      2305            mov     dph,r3
08A4 8CF0      2306            mov     b,r4
08A6 ED        2307            mov     a,r5
08A7 120000    2308            lcall   ___fs2sint
08AA 8582E0    2309            mov     _ReadPeak_delay_us_1_137,dpl
08AD 8583E1    2310            mov     (_ReadPeak_delay_us_1_137 + 1),dph
08B0           2311   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:523: while(Phasor_ref == 1);
08B0           2312   L025001?:
08B0 20A600    2313            jb      _P2_6,L025001?
08B3           2314   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:524: while(Phasor_ref == 0); 
08B3           2315   L025004?:
08B3 30A640    2316            jnb     _P2_6,L025004?
08B6           2317   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:527: waitus(delay_us);
08B6 85E082    2318            mov     dpl,_ReadPeak_delay_us_1_137
08B9 85E183    2319            mov     dph,(_ReadPeak_delay_us_1_137 + 1)
08BC 120000    2320            lcall   _waitus
08BF           2321   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:528: vpeak[0] = Volts_at_Pin(QFP32_MUX_P2_3);
08BF ACA8      2322            mov     r4,_ReadPeak_PARM_2
08C1 ADA9      2323            mov     r5,(_ReadPeak_PARM_2 + 1)
08C3 AEAA      2324            mov     r6,(_ReadPeak_PARM_2 + 2)
08C5 758210    2325            mov     dpl,#0x10
08C8 C004      2326            push    ar4
08CA C005      2327            push    ar5
08CC C006      2328            push    ar6
08CE 120000    2329            lcall   _Volts_at_Pin
08D1 AF82      2330            mov     r7,dpl
08D3 A883      2331            mov     r0,dph
08D5 A9F0      2332            mov     r1,b
08D7 FA        2333            mov     r2,a
08D8 D006      2334            pop     ar6
08DA D005      2335            pop     ar5
08DC D004      2336            pop     ar4
08DE 8C82      2337            mov     dpl,r4
08E0 8D83      2338            mov     dph,r5
08E2 8EF0      2339            mov     b,r6
08E4 EF        2340            mov     a,r7
08E5 120000    2341            lcall   __gptrput
08E8 A3        2342            inc     dptr
08E9 E8        2343            mov     a,r0
08EA 120000    2344            lcall   __gptrput
08ED A3        2345            inc     dptr
08EE E9        2346            mov     a,r1
08EF 120000    2347            lcall   __gptrput
08F2 A3        2348            inc     dptr
08F3 EA        2349            mov     a,r2
08F4 120000    2350            lcall   __gptrput
08F7           2351   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:530: while(Phasor_sig == 1);
08F7           2352   L025007?:
08F7 209480    2353            jb      _P1_4,L025007?
08FA           2354   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:531: while(Phasor_sig == 0);
08FA           2355   L025010?:
08FA 3094C0    2356            jnb     _P1_4,L025010?
08FD           2357   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:533: waitus(delay_us);
08FD 85E082    2358            mov     dpl,_ReadPeak_delay_us_1_137
0900 85E183    2359            mov     dph,(_ReadPeak_delay_us_1_137 + 1)
0903 C004      2360            push    ar4
0905 C005      2361            push    ar5
0907 C006      2362            push    ar6
0909 120000    2363            lcall   _waitus
090C D006      2364            pop     ar6
090E D005      2365            pop     ar5
0910 D004      2366            pop     ar4
0912           2367   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:534: vpeak[1] = Volts_at_Pin(QFP32_MUX_P1_5); 
0912 7404      2368            mov     a,#0x04
0914 2C        2369            add     a,r4
0915 FC        2370            mov     r4,a
0916 E4        2371            clr     a
0917 3D        2372            addc    a,r5
0918 FD        2373            mov     r5,a
0919 75820B    2374            mov     dpl,#0x0B
091C C004      2375            push    ar4
091E C005      2376            push    ar5
0920 C006      2377            push    ar6
0922 120000    2378            lcall   _Volts_at_Pin
0925 AA82      2379            mov     r2,dpl
0927 AB83      2380            mov     r3,dph
0929 AFF0      2381            mov     r7,b
092B F8        2382            mov     r0,a
092C D006      2383            pop     ar6
092E D005      2384            pop     ar5
0930 D004      2385            pop     ar4
0932 8C82      2386            mov     dpl,r4
0934 8D83      2387            mov     dph,r5
0936 8EF0      2388            mov     b,r6
0938 EA        2389            mov     a,r2
0939 120000    2390            lcall   __gptrput
093C A3        2391            inc     dptr
093D EB        2392            mov     a,r3
093E 120000    2393            lcall   __gptrput
0941 A3        2394            inc     dptr
0942 EF        2395            mov     a,r7
0943 120000    2396            lcall   __gptrput
0946 A3        2397            inc     dptr
0947 E8        2398            mov     a,r0
0948 020000    2399            ljmp    __gptrput
094B           2400   ;------------------------------------------------------------
094B           2401   ;Allocation info for local variables in function 'ReadDiff'
094B           2402   ;------------------------------------------------------------
094B           2403   ;time_diff                 Allocated to registers r2 r3 r4 r5 
094B           2404   ;------------------------------------------------------------
094B           2405   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:539: float ReadDiff(void){
094B           2406   ;        -----------------------------------------
094B           2407   ;         function ReadDiff
094B           2408   ;        -----------------------------------------
094B           2409   _ReadDiff:
094B           2410   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:542: TH0 = 0; 
094B 758C00    2411            mov     _TH0,#0x00
094E           2412   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:543: TL0 = 0;
094E 758A00    2413            mov     _TL0,#0x00
0951           2414   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:544: TR0 = 0; 
0951 C28C      2415            clr     _TR0
0953           2416   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:545: TF0 = 0;
0953 C28D      2417            clr     _TF0
0955           2418   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:546: overflow_count = 0;
0955 901A90    2419            mov     dptr,#_overflow_count
0958 E4        2420            clr     a
0959 F0        2421            movx    @dptr,a
095A           2422   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:548: while(Phasor_ref == 1);
095A           2423   L026001?:
095A 20A600    2424            jb      _P2_6,L026001?
095D           2425   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:549: while(Phasor_ref == 0);
095D           2426   L026004?:
095D 30A640    2427            jnb     _P2_6,L026004?
0960           2428   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:550: TR0 = 1; 
0960 D28C      2429            setb    _TR0
0962           2430   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:551: while(Phasor_sig == 1) // Wait for the signal to be zero
0962           2431   L026009?:
0962 3094C0    2432            jnb     _P1_4,L026014?
0965           2433   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:553: if(TF0==1) // Did the 16-bit timer overflow?
0965           2434   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:555: TF0=0;
0965 108D00    2435            jbc     _TF0,L026031?
0968 8000      2436            sjmp    L026009?
096A           2437   L026031?:
096A           2438   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:556: overflow_count++;
096A 901A90    2439            mov     dptr,#_overflow_count
096D E0        2440            movx    a,@dptr
096E 2401      2441            add     a,#0x01
0970 F0        2442            movx    @dptr,a
0971           2443   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:559: while(Phasor_sig == 0) // Wait for the signal to be one
0971 8000      2444            sjmp    L026009?
0973           2445   L026014?:
0973 209440    2446            jb      _P1_4,L026016?
0976           2447   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:561: if(TF0==1) // Did the 16-bit timer overflow?
0976           2448   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:563: TF0=0;
0976 108D80    2449            jbc     _TF0,L026033?
0979 8000      2450            sjmp    L026014?
097B           2451   L026033?:
097B           2452   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:564: overflow_count++;
097B 901A90    2453            mov     dptr,#_overflow_count
097E E0        2454            movx    a,@dptr
097F 2401      2455            add     a,#0x01
0981 F0        2456            movx    @dptr,a
0982 8000      2457            sjmp    L026014?
0984           2458   L026016?:
0984           2459   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:567: TR0=0;
0984 C28C      2460            clr     _TR0
0986           2461   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:568: time_diff=(overflow_count * 65536.0 + TH0 * 256.0 + TL0) * (12.0 / SYSCLK);
0986 901A90    2462            mov     dptr,#_overflow_count
0989 E0        2463            movx    a,@dptr
098A F582      2464            mov     dpl,a
098C 120000    2465            lcall   ___uchar2fs
098F AA82      2466            mov     r2,dpl
0991 AB83      2467            mov     r3,dph
0993 ACF0      2468            mov     r4,b
0995 FD        2469            mov     r5,a
0996 C002      2470            push    ar2
0998 C003      2471            push    ar3
099A C004      2472            push    ar4
099C C005      2473            push    ar5
099E 900000    2474            mov     dptr,#0x0000
09A1 75F080    2475            mov     b,#0x80
09A4 7447      2476            mov     a,#0x47
09A6 120000    2477            lcall   ___fsmul
09A9 AA82      2478            mov     r2,dpl
09AB AB83      2479            mov     r3,dph
09AD ACF0      2480            mov     r4,b
09AF FD        2481            mov     r5,a
09B0 E581      2482            mov     a,sp
09B2 24FC      2483            add     a,#0xfc
09B4 F581      2484            mov     sp,a
09B6 858C82    2485            mov     dpl,_TH0
09B9 C002      2486            push    ar2
09BB C003      2487            push    ar3
09BD C004      2488            push    ar4
09BF C005      2489            push    ar5
09C1 120000    2490            lcall   ___uchar2fs
09C4 AE82      2491            mov     r6,dpl
09C6 AF83      2492            mov     r7,dph
09C8 A8F0      2493            mov     r0,b
09CA F9        2494            mov     r1,a
09CB C006      2495            push    ar6
09CD C007      2496            push    ar7
09CF C000      2497            push    ar0
09D1 C001      2498            push    ar1
09D3 900000    2499            mov     dptr,#0x0000
09D6 75F080    2500            mov     b,#0x80
09D9 7443      2501            mov     a,#0x43
09DB 120000    2502            lcall   ___fsmul
09DE AE82      2503            mov     r6,dpl
09E0 AF83      2504            mov     r7,dph
09E2 A8F0      2505            mov     r0,b
09E4 F9        2506            mov     r1,a
09E5 E581      2507            mov     a,sp
09E7 24FC      2508            add     a,#0xfc
09E9 F581      2509            mov     sp,a
09EB D005      2510            pop     ar5
09ED D004      2511            pop     ar4
09EF D003      2512            pop     ar3
09F1 D002      2513            pop     ar2
09F3 C006      2514            push    ar6
09F5 C007      2515            push    ar7
09F7 C000      2516            push    ar0
09F9 C001      2517            push    ar1
09FB 8A82      2518            mov     dpl,r2
09FD 8B83      2519            mov     dph,r3
09FF 8CF0      2520            mov     b,r4
0A01 ED        2521            mov     a,r5
0A02 120000    2522            lcall   ___fsadd
0A05 AA82      2523            mov     r2,dpl
0A07 AB83      2524            mov     r3,dph
0A09 ACF0      2525            mov     r4,b
0A0B FD        2526            mov     r5,a
0A0C E581      2527            mov     a,sp
0A0E 24FC      2528            add     a,#0xfc
0A10 F581      2529            mov     sp,a
0A12 AE8A      2530            mov     r6,_TL0
0A14 7F00      2531            mov     r7,#0x00
0A16 8E82      2532            mov     dpl,r6
0A18 8F83      2533            mov     dph,r7
0A1A C002      2534            push    ar2
0A1C C003      2535            push    ar3
0A1E C004      2536            push    ar4
0A20 C005      2537            push    ar5
0A22 120000    2538            lcall   ___sint2fs
0A25 AE82      2539            mov     r6,dpl
0A27 AF83      2540            mov     r7,dph
0A29 A8F0      2541            mov     r0,b
0A2B F9        2542            mov     r1,a
0A2C D005      2543            pop     ar5
0A2E D004      2544            pop     ar4
0A30 D003      2545            pop     ar3
0A32 D002      2546            pop     ar2
0A34 C006      2547            push    ar6
0A36 C007      2548            push    ar7
0A38 C000      2549            push    ar0
0A3A C001      2550            push    ar1
0A3C 8A82      2551            mov     dpl,r2
0A3E 8B83      2552            mov     dph,r3
0A40 8CF0      2553            mov     b,r4
0A42 ED        2554            mov     a,r5
0A43 120000    2555            lcall   ___fsadd
0A46 AA82      2556            mov     r2,dpl
0A48 AB83      2557            mov     r3,dph
0A4A ACF0      2558            mov     r4,b
0A4C FD        2559            mov     r5,a
0A4D E581      2560            mov     a,sp
0A4F 24FC      2561            add     a,#0xfc
0A51 F581      2562            mov     sp,a
0A53 C002      2563            push    ar2
0A55 C003      2564            push    ar3
0A57 C004      2565            push    ar4
0A59 C005      2566            push    ar5
0A5B 90F4FC    2567            mov     dptr,#0xF4FC
0A5E 75F032    2568            mov     b,#0x32
0A61 7434      2569            mov     a,#0x34
0A63 120000    2570            lcall   ___fsmul
0A66 AA82      2571            mov     r2,dpl
0A68 AB83      2572            mov     r3,dph
0A6A ACF0      2573            mov     r4,b
0A6C FD        2574            mov     r5,a
0A6D E581      2575            mov     a,sp
0A6F 24FC      2576            add     a,#0xfc
0A71 F581      2577            mov     sp,a
0A73           2578   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:569: return time_diff; 
0A73 8A82      2579            mov     dpl,r2
0A75 8B83      2580            mov     dph,r3
0A77 8CF0      2581            mov     b,r4
0A79 ED        2582            mov     a,r5
0A7A 22        2583            ret
0A7B           2584   ;------------------------------------------------------------
0A7B           2585   ;Allocation info for local variables in function 'DisplayMenu'
0A7B           2586   ;------------------------------------------------------------
0A7B           2587   ;units                     Allocated with name '_DisplayMenu_PARM_2'
0A7B           2588   ;menu                      Allocated to registers r2 r3 
0A7B           2589   ;sloc0                     Allocated with name '_DisplayMenu_sloc0_1_0'
0A7B           2590   ;buff                      Allocated with name '_DisplayMenu_buff_1_145'
0A7B           2591   ;------------------------------------------------------------
0A7B           2592   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:573: void DisplayMenu(int menu, int units)
0A7B           2593   ;        -----------------------------------------
0A7B           2594   ;         function DisplayMenu
0A7B           2595   ;        -----------------------------------------
0A7B           2596   _DisplayMenu:
0A7B AA82      2597            mov     r2,dpl
0A7D           2598   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:577: switch(menu)
0A7D E583      2599            mov     a,dph
0A7F FB        2600            mov     r3,a
0A80 30E7C0    2601            jnb     acc.7,L027037?
0A83 22        2602            ret
0A84           2603   L027037?:
0A84 C3        2604            clr     c
0A85 7406      2605            mov     a,#0x06
0A87 9A        2606            subb    a,r2
0A88 E4        2607            clr     a
0A89 6480      2608            xrl     a,#0x80
0A8B 8BF0      2609            mov     b,r3
0A8D 63F080    2610            xrl     b,#0x80
0A90 95F0      2611            subb    a,b
0A92 5000      2612            jnc     L027038?
0A94 22        2613            ret
0A95           2614   L027038?:
0A95 EA        2615            mov     a,r2
0A96 2A        2616            add     a,r2
0A97 2A        2617            add     a,r2
0A98 90DF40    2618            mov     dptr,#L027039?
0A9B 73        2619            jmp     @a+dptr
0A9C           2620   L027039?:
0A9C 020000    2621            ljmp    L027001?
0A9F 020000    2622            ljmp    L027005?
0AA2 020000    2623            ljmp    L027006?
0AA5 020000    2624            ljmp    L027010?
0AA8 020000    2625            ljmp    L027014?
0AAB 020000    2626            ljmp    L027018?
0AAE 020000    2627            ljmp    L027022?
0AB1           2628   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:579: case 0:
0AB1           2629   L027001?:
0AB1           2630   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:580: if (units) // display peak
0AB1 E530      2631            mov     a,_DisplayMenu_PARM_2
0AB3 4531      2632            orl     a,(_DisplayMenu_PARM_2 + 1)
0AB5 6000      2633            jz      L027003?
0AB7           2634   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:582: sprintf(buff, "P: S=%.2f R=%.2f", vpeak[1], vpeak[0]);
0AB7 901A50    2635            mov     dptr,#_vpeak
0ABA E0        2636            movx    a,@dptr
0ABB FA        2637            mov     r2,a
0ABC A3        2638            inc     dptr
0ABD E0        2639            movx    a,@dptr
0ABE FB        2640            mov     r3,a
0ABF A3        2641            inc     dptr
0AC0 E0        2642            movx    a,@dptr
0AC1 FC        2643            mov     r4,a
0AC2 A3        2644            inc     dptr
0AC3 E0        2645            movx    a,@dptr
0AC4 FD        2646            mov     r5,a
0AC5 901A54    2647            mov     dptr,#(_vpeak + 0x0004)
0AC8 E0        2648            movx    a,@dptr
0AC9 FE        2649            mov     r6,a
0ACA A3        2650            inc     dptr
0ACB E0        2651            movx    a,@dptr
0ACC FF        2652            mov     r7,a
0ACD A3        2653            inc     dptr
0ACE E0        2654            movx    a,@dptr
0ACF F8        2655            mov     r0,a
0AD0 A3        2656            inc     dptr
0AD1 E0        2657            movx    a,@dptr
0AD2 F9        2658            mov     r1,a
0AD3 C002      2659            push    ar2
0AD5 C003      2660            push    ar3
0AD7 C004      2661            push    ar4
0AD9 C005      2662            push    ar5
0ADB C006      2663            push    ar6
0ADD C007      2664            push    ar7
0ADF C000      2665            push    ar0
0AE1 C001      2666            push    ar1
0AE3 7480      2667            mov     a,#__str_0
0AE5 C0E0      2668            push    acc
0AE7 74E1      2669            mov     a,#(__str_0 >> 8)
0AE9 C0E0      2670            push    acc
0AEB 7480      2671            mov     a,#0x80
0AED C0E0      2672            push    acc
0AEF 7470      2673            mov     a,#_DisplayMenu_buff_1_145
0AF1 C0E0      2674            push    acc
0AF3 74BF      2675            mov     a,#(_DisplayMenu_buff_1_145 >> 8)
0AF5 C0E0      2676            push    acc
0AF7 E4        2677            clr     a
0AF8 C0E0      2678            push    acc
0AFA 120000    2679            lcall   _sprintf
0AFD E581      2680            mov     a,sp
0AFF 24F2      2681            add     a,#0xf2
0B01 F581      2682            mov     sp,a
0B03           2683   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:583: LCDprint(buff, 1, 0, 1);
0B03 754801    2684            mov     _LCDprint_PARM_2,#0x01
0B06 75F800    2685            mov     _LCDprint_PARM_3,#0x00
0B09 D2E0      2686            setb    _LCDprint_PARM_4
0B0B 90BF70    2687            mov     dptr,#_DisplayMenu_buff_1_145
0B0E 75F000    2688            mov     b,#0x00
0B11 120000    2689            lcall   _LCDprint
0B14 020000    2690            ljmp    L027004?
0B17           2691   L027003?:
0B17           2692   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:587: sprintf(buff, "R: S=%.2f R=%.2f", vpeak[1]/sqrtf(2), vpeak[0]/sqrtf(2));
0B17 901A50    2693            mov     dptr,#_vpeak
0B1A E0        2694            movx    a,@dptr
0B1B FA        2695            mov     r2,a
0B1C A3        2696            inc     dptr
0B1D E0        2697            movx    a,@dptr
0B1E FB        2698            mov     r3,a
0B1F A3        2699            inc     dptr
0B20 E0        2700            movx    a,@dptr
0B21 FC        2701            mov     r4,a
0B22 A3        2702            inc     dptr
0B23 E0        2703            movx    a,@dptr
0B24 FD        2704            mov     r5,a
0B25 900000    2705            mov     dptr,#(0x00&0x00ff)
0B28 E4        2706            clr     a
0B29 F5F0      2707            mov     b,a
0B2B 7440      2708            mov     a,#0x40
0B2D C002      2709            push    ar2
0B2F C003      2710            push    ar3
0B31 C004      2711            push    ar4
0B33 C005      2712            push    ar5
0B35 120000    2713            lcall   _sqrtf
0B38 AE82      2714            mov     r6,dpl
0B3A AF83      2715            mov     r7,dph
0B3C A8F0      2716            mov     r0,b
0B3E F9        2717            mov     r1,a
0B3F D005      2718            pop     ar5
0B41 D004      2719            pop     ar4
0B43 D003      2720            pop     ar3
0B45 D002      2721            pop     ar2
0B47 C006      2722            push    ar6
0B49 C007      2723            push    ar7
0B4B C000      2724            push    ar0
0B4D C001      2725            push    ar1
0B4F 8A82      2726            mov     dpl,r2
0B51 8B83      2727            mov     dph,r3
0B53 8CF0      2728            mov     b,r4
0B55 ED        2729            mov     a,r5
0B56 120000    2730            lcall   ___fsdiv
0B59 AA82      2731            mov     r2,dpl
0B5B AB83      2732            mov     r3,dph
0B5D ACF0      2733            mov     r4,b
0B5F FD        2734            mov     r5,a
0B60 E581      2735            mov     a,sp
0B62 24FC      2736            add     a,#0xfc
0B64 F581      2737            mov     sp,a
0B66 901A54    2738            mov     dptr,#(_vpeak + 0x0004)
0B69 E0        2739            movx    a,@dptr
0B6A F530      2740            mov     _DisplayMenu_sloc0_1_0,a
0B6C A3        2741            inc     dptr
0B6D E0        2742            movx    a,@dptr
0B6E F531      2743            mov     (_DisplayMenu_sloc0_1_0 + 1),a
0B70 A3        2744            inc     dptr
0B71 E0        2745            movx    a,@dptr
0B72 F532      2746            mov     (_DisplayMenu_sloc0_1_0 + 2),a
0B74 A3        2747            inc     dptr
0B75 E0        2748            movx    a,@dptr
0B76 F533      2749            mov     (_DisplayMenu_sloc0_1_0 + 3),a
0B78 900000    2750            mov     dptr,#(0x00&0x00ff)
0B7B E4        2751            clr     a
0B7C F5F0      2752            mov     b,a
0B7E 7440      2753            mov     a,#0x40
0B80 C002      2754            push    ar2
0B82 C003      2755            push    ar3
0B84 C004      2756            push    ar4
0B86 C005      2757            push    ar5
0B88 120000    2758            lcall   _sqrtf
0B8B AE82      2759            mov     r6,dpl
0B8D AF83      2760            mov     r7,dph
0B8F A8F0      2761            mov     r0,b
0B91 F9        2762            mov     r1,a
0B92 C006      2763            push    ar6
0B94 C007      2764            push    ar7
0B96 C000      2765            push    ar0
0B98 C001      2766            push    ar1
0B9A 853082    2767            mov     dpl,_DisplayMenu_sloc0_1_0
0B9D 853183    2768            mov     dph,(_DisplayMenu_sloc0_1_0 + 1)
0BA0 8532F0    2769            mov     b,(_DisplayMenu_sloc0_1_0 + 2)
0BA3 E533      2770            mov     a,(_DisplayMenu_sloc0_1_0 + 3)
0BA5 120000    2771            lcall   ___fsdiv
0BA8 AE82      2772            mov     r6,dpl
0BAA AF83      2773            mov     r7,dph
0BAC A8F0      2774            mov     r0,b
0BAE F9        2775            mov     r1,a
0BAF E581      2776            mov     a,sp
0BB1 24FC      2777            add     a,#0xfc
0BB3 F581      2778            mov     sp,a
0BB5 C006      2779            push    ar6
0BB7 C007      2780            push    ar7
0BB9 C000      2781            push    ar0
0BBB C001      2782            push    ar1
0BBD 7480      2783            mov     a,#__str_1
0BBF C0E0      2784            push    acc
0BC1 74E2      2785            mov     a,#(__str_1 >> 8)
0BC3 C0E0      2786            push    acc
0BC5 7480      2787            mov     a,#0x80
0BC7 C0E0      2788            push    acc
0BC9 7470      2789            mov     a,#_DisplayMenu_buff_1_145
0BCB C0E0      2790            push    acc
0BCD 74BF      2791            mov     a,#(_DisplayMenu_buff_1_145 >> 8)
0BCF C0E0      2792            push    acc
0BD1 E4        2793            clr     a
0BD2 C0E0      2794            push    acc
0BD4 120000    2795            lcall   _sprintf
0BD7 E581      2796            mov     a,sp
0BD9 24F2      2797            add     a,#0xf2
0BDB F581      2798            mov     sp,a
0BDD           2799   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:588: LCDprint(buff, 1, 0, 1);
0BDD 754801    2800            mov     _LCDprint_PARM_2,#0x01
0BE0 75F800    2801            mov     _LCDprint_PARM_3,#0x00
0BE3 D2E0      2802            setb    _LCDprint_PARM_4
0BE5 90BF70    2803            mov     dptr,#_DisplayMenu_buff_1_145
0BE8 75F000    2804            mov     b,#0x00
0BEB 120000    2805            lcall   _LCDprint
0BEE           2806   L027004?:
0BEE           2807   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:590: sprintf(buff, "p=%.1f f=%.2fkHz", phase_diff, frequency / 1000.0);
0BEE 9019D0    2808            mov     dptr,#_frequency
0BF1 E0        2809            movx    a,@dptr
0BF2 FA        2810            mov     r2,a
0BF3 A3        2811            inc     dptr
0BF4 E0        2812            movx    a,@dptr
0BF5 FB        2813            mov     r3,a
0BF6 A3        2814            inc     dptr
0BF7 E0        2815            movx    a,@dptr
0BF8 FC        2816            mov     r4,a
0BF9 A3        2817            inc     dptr
0BFA E0        2818            movx    a,@dptr
0BFB FD        2819            mov     r5,a
0BFC E4        2820            clr     a
0BFD C0E0      2821            push    acc
0BFF C0E0      2822            push    acc
0C01 747A      2823            mov     a,#0x7A
0C03 C0E0      2824            push    acc
0C05 7444      2825            mov     a,#0x44
0C07 C0E0      2826            push    acc
0C09 8A82      2827            mov     dpl,r2
0C0B 8B83      2828            mov     dph,r3
0C0D 8CF0      2829            mov     b,r4
0C0F ED        2830            mov     a,r5
0C10 120000    2831            lcall   ___fsdiv
0C13 AA82      2832            mov     r2,dpl
0C15 AB83      2833            mov     r3,dph
0C17 ACF0      2834            mov     r4,b
0C19 FD        2835            mov     r5,a
0C1A E581      2836            mov     a,sp
0C1C 24FC      2837            add     a,#0xfc
0C1E F581      2838            mov     sp,a
0C20 C002      2839            push    ar2
0C22 C003      2840            push    ar3
0C24 C004      2841            push    ar4
0C26 C005      2842            push    ar5
0C28 901A10    2843            mov     dptr,#_phase_diff
0C2B E0        2844            movx    a,@dptr
0C2C C0E0      2845            push    acc
0C2E A3        2846            inc     dptr
0C2F E0        2847            movx    a,@dptr
0C30 C0E0      2848            push    acc
0C32 A3        2849            inc     dptr
0C33 E0        2850            movx    a,@dptr
0C34 C0E0      2851            push    acc
0C36 A3        2852            inc     dptr
0C37 E0        2853            movx    a,@dptr
0C38 C0E0      2854            push    acc
0C3A 74C0      2855            mov     a,#__str_2
0C3C C0E0      2856            push    acc
0C3E 74E2      2857            mov     a,#(__str_2 >> 8)
0C40 C0E0      2858            push    acc
0C42 7480      2859            mov     a,#0x80
0C44 C0E0      2860            push    acc
0C46 7470      2861            mov     a,#_DisplayMenu_buff_1_145
0C48 C0E0      2862            push    acc
0C4A 74BF      2863            mov     a,#(_DisplayMenu_buff_1_145 >> 8)
0C4C C0E0      2864            push    acc
0C4E E4        2865            clr     a
0C4F C0E0      2866            push    acc
0C51 120000    2867            lcall   _sprintf
0C54 E581      2868            mov     a,sp
0C56 24F2      2869            add     a,#0xf2
0C58 F581      2870            mov     sp,a
0C5A           2871   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:591: LCDprint(buff, 2, 0, 1);
0C5A 754802    2872            mov     _LCDprint_PARM_2,#0x02
0C5D 75F800    2873            mov     _LCDprint_PARM_3,#0x00
0C60 D2E0      2874            setb    _LCDprint_PARM_4
0C62 90BF70    2875            mov     dptr,#_DisplayMenu_buff_1_145
0C65 75F000    2876            mov     b,#0x00
0C68           2877   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:592: break; 
0C68 020000    2878            ljmp    _LCDprint
0C6B           2879   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:594: case 1: // main menu 
0C6B           2880   L027005?:
0C6B           2881   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:595: LCDprint("Phasor", 1, 4, 1);
0C6B 754801    2882            mov     _LCDprint_PARM_2,#0x01
0C6E 75F804    2883            mov     _LCDprint_PARM_3,#0x04
0C71 D2E0      2884            setb    _LCDprint_PARM_4
0C73 90E300    2885            mov     dptr,#__str_3
0C76 75F080    2886            mov     b,#0x80
0C79 120000    2887            lcall   _LCDprint
0C7C           2888   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:596: LCDprint("<    Meter     >", 2, 0, 1);
0C7C 754802    2889            mov     _LCDprint_PARM_2,#0x02
0C7F 75F800    2890            mov     _LCDprint_PARM_3,#0x00
0C82 D2E0      2891            setb    _LCDprint_PARM_4
0C84 90E340    2892            mov     dptr,#__str_4
0C87 75F080    2893            mov     b,#0x80
0C8A           2894   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:597: break;
0C8A 020000    2895            ljmp    _LCDprint
0C8D           2896   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:598: case 2: 
0C8D           2897   L027006?:
0C8D           2898   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:599: LCDprint("1", 1, 0, 0);
0C8D 754801    2899            mov     _LCDprint_PARM_2,#0x01
0C90 75F800    2900            mov     _LCDprint_PARM_3,#0x00
0C93 C2E0      2901            clr     _LCDprint_PARM_4
0C95 90E380    2902            mov     dptr,#__str_5
0C98 75F080    2903            mov     b,#0x80
0C9B 120000    2904            lcall   _LCDprint
0C9E           2905   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:600: if (Saved_units[0]){
0C9E 901890    2906            mov     dptr,#_Saved_units
0CA1 E0        2907            movx    a,@dptr
0CA2 FA        2908            mov     r2,a
0CA3 A3        2909            inc     dptr
0CA4 E0        2910            movx    a,@dptr
0CA5 FB        2911            mov     r3,a
0CA6 A3        2912            inc     dptr
0CA7 E0        2913            movx    a,@dptr
0CA8 FC        2914            mov     r4,a
0CA9 A3        2915            inc     dptr
0CAA E0        2916            movx    a,@dptr
0CAB FD        2917            mov     r5,a
0CAC EA        2918            mov     a,r2
0CAD 4B        2919            orl     a,r3
0CAE 4C        2920            orl     a,r4
0CAF 8DF0      2921            mov     b,r5
0CB1 C2F7      2922            clr     b.7 ; Clear the sign bit
0CB3 45F0      2923            orl     a,b
0CB5 6000      2924            jz      L027008?
0CB7           2925   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:601: LCDprint("P", 1, 1, 0);
0CB7 754801    2926            mov     _LCDprint_PARM_2,#0x01
0CBA 75F801    2927            mov     _LCDprint_PARM_3,#0x01
0CBD C2E0      2928            clr     _LCDprint_PARM_4
0CBF 90E400    2929            mov     dptr,#__str_6
0CC2 75F080    2930            mov     b,#0x80
0CC5 120000    2931            lcall   _LCDprint
0CC8 8000      2932            sjmp    L027009?
0CCA           2933   L027008?:
0CCA           2934   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:604: LCDprint("R", 1, 1, 0);
0CCA 754801    2935            mov     _LCDprint_PARM_2,#0x01
0CCD 75F801    2936            mov     _LCDprint_PARM_3,#0x01
0CD0 C2E0      2937            clr     _LCDprint_PARM_4
0CD2 90E480    2938            mov     dptr,#__str_7
0CD5 75F080    2939            mov     b,#0x80
0CD8 120000    2940            lcall   _LCDprint
0CDB           2941   L027009?:
0CDB           2942   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:606: sprintf(buff, "S=%.2f R=%.2f", Saved_vsig[0], Saved_vref[0]);
0CDB 901990    2943            mov     dptr,#_Saved_vref
0CDE E0        2944            movx    a,@dptr
0CDF FA        2945            mov     r2,a
0CE0 A3        2946            inc     dptr
0CE1 E0        2947            movx    a,@dptr
0CE2 FB        2948            mov     r3,a
0CE3 A3        2949            inc     dptr
0CE4 E0        2950            movx    a,@dptr
0CE5 FC        2951            mov     r4,a
0CE6 A3        2952            inc     dptr
0CE7 E0        2953            movx    a,@dptr
0CE8 FD        2954            mov     r5,a
0CE9 901950    2955            mov     dptr,#_Saved_vsig
0CEC E0        2956            movx    a,@dptr
0CED FE        2957            mov     r6,a
0CEE A3        2958            inc     dptr
0CEF E0        2959            movx    a,@dptr
0CF0 FF        2960            mov     r7,a
0CF1 A3        2961            inc     dptr
0CF2 E0        2962            movx    a,@dptr
0CF3 F8        2963            mov     r0,a
0CF4 A3        2964            inc     dptr
0CF5 E0        2965            movx    a,@dptr
0CF6 F9        2966            mov     r1,a
0CF7 C002      2967            push    ar2
0CF9 C003      2968            push    ar3
0CFB C004      2969            push    ar4
0CFD C005      2970            push    ar5
0CFF C006      2971            push    ar6
0D01 C007      2972            push    ar7
0D03 C000      2973            push    ar0
0D05 C001      2974            push    ar1
0D07 74C0      2975            mov     a,#__str_8
0D09 C0E0      2976            push    acc
0D0B 74E4      2977            mov     a,#(__str_8 >> 8)
0D0D C0E0      2978            push    acc
0D0F 7480      2979            mov     a,#0x80
0D11 C0E0      2980            push    acc
0D13 7470      2981            mov     a,#_DisplayMenu_buff_1_145
0D15 C0E0      2982            push    acc
0D17 74BF      2983            mov     a,#(_DisplayMenu_buff_1_145 >> 8)
0D19 C0E0      2984            push    acc
0D1B E4        2985            clr     a
0D1C C0E0      2986            push    acc
0D1E 120000    2987            lcall   _sprintf
0D21 E581      2988            mov     a,sp
0D23 24F2      2989            add     a,#0xf2
0D25 F581      2990            mov     sp,a
0D27           2991   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:607: LCDprint(buff, 1, 3, 1);
0D27 754801    2992            mov     _LCDprint_PARM_2,#0x01
0D2A 75F803    2993            mov     _LCDprint_PARM_3,#0x03
0D2D D2E0      2994            setb    _LCDprint_PARM_4
0D2F 90BF70    2995            mov     dptr,#_DisplayMenu_buff_1_145
0D32 75F000    2996            mov     b,#0x00
0D35 120000    2997            lcall   _LCDprint
0D38           2998   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:608: sprintf(buff, "p=%.1f f=%.2fkHz", Saved_phase[0], Saved_freq[0] / 1000.0);
0D38 9018D0    2999            mov     dptr,#_Saved_freq
0D3B E0        3000            movx    a,@dptr
0D3C FA        3001            mov     r2,a
0D3D A3        3002            inc     dptr
0D3E E0        3003            movx    a,@dptr
0D3F FB        3004            mov     r3,a
0D40 A3        3005            inc     dptr
0D41 E0        3006            movx    a,@dptr
0D42 FC        3007            mov     r4,a
0D43 A3        3008            inc     dptr
0D44 E0        3009            movx    a,@dptr
0D45 FD        3010            mov     r5,a
0D46 E4        3011            clr     a
0D47 C0E0      3012            push    acc
0D49 C0E0      3013            push    acc
0D4B 747A      3014            mov     a,#0x7A
0D4D C0E0      3015            push    acc
0D4F 7444      3016            mov     a,#0x44
0D51 C0E0      3017            push    acc
0D53 8A82      3018            mov     dpl,r2
0D55 8B83      3019            mov     dph,r3
0D57 8CF0      3020            mov     b,r4
0D59 ED        3021            mov     a,r5
0D5A 120000    3022            lcall   ___fsdiv
0D5D AA82      3023            mov     r2,dpl
0D5F AB83      3024            mov     r3,dph
0D61 ACF0      3025            mov     r4,b
0D63 FD        3026            mov     r5,a
0D64 E581      3027            mov     a,sp
0D66 24FC      3028            add     a,#0xfc
0D68 F581      3029            mov     sp,a
0D6A 901910    3030            mov     dptr,#_Saved_phase
0D6D E0        3031            movx    a,@dptr
0D6E FE        3032            mov     r6,a
0D6F A3        3033            inc     dptr
0D70 E0        3034            movx    a,@dptr
0D71 FF        3035            mov     r7,a
0D72 A3        3036            inc     dptr
0D73 E0        3037            movx    a,@dptr
0D74 F8        3038            mov     r0,a
0D75 A3        3039            inc     dptr
0D76 E0        3040            movx    a,@dptr
0D77 F9        3041            mov     r1,a
0D78 C002      3042            push    ar2
0D7A C003      3043            push    ar3
0D7C C004      3044            push    ar4
0D7E C005      3045            push    ar5
0D80 C006      3046            push    ar6
0D82 C007      3047            push    ar7
0D84 C000      3048            push    ar0
0D86 C001      3049            push    ar1
0D88 74C0      3050            mov     a,#__str_2
0D8A C0E0      3051            push    acc
0D8C 74E2      3052            mov     a,#(__str_2 >> 8)
0D8E C0E0      3053            push    acc
0D90 7480      3054            mov     a,#0x80
0D92 C0E0      3055            push    acc
0D94 7470      3056            mov     a,#_DisplayMenu_buff_1_145
0D96 C0E0      3057            push    acc
0D98 74BF      3058            mov     a,#(_DisplayMenu_buff_1_145 >> 8)
0D9A C0E0      3059            push    acc
0D9C E4        3060            clr     a
0D9D C0E0      3061            push    acc
0D9F 120000    3062            lcall   _sprintf
0DA2 E581      3063            mov     a,sp
0DA4 24F2      3064            add     a,#0xf2
0DA6 F581      3065            mov     sp,a
0DA8           3066   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:609: LCDprint(buff, 2, 0, 1); 
0DA8 754802    3067            mov     _LCDprint_PARM_2,#0x02
0DAB 75F800    3068            mov     _LCDprint_PARM_3,#0x00
0DAE D2E0      3069            setb    _LCDprint_PARM_4
0DB0 90BF70    3070            mov     dptr,#_DisplayMenu_buff_1_145
0DB3 75F000    3071            mov     b,#0x00
0DB6           3072   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:610: break;      
0DB6 020000    3073            ljmp    _LCDprint
0DB9           3074   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:611: case 3: 
0DB9           3075   L027010?:
0DB9           3076   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:612: LCDprint("2", 1, 0, 0);
0DB9 754801    3077            mov     _LCDprint_PARM_2,#0x01
0DBC 75F800    3078            mov     _LCDprint_PARM_3,#0x00
0DBF C2E0      3079            clr     _LCDprint_PARM_4
0DC1 90E500    3080            mov     dptr,#__str_9
0DC4 75F080    3081            mov     b,#0x80
0DC7 120000    3082            lcall   _LCDprint
0DCA           3083   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:614: if (Saved_units[1]){
0DCA 901894    3084            mov     dptr,#(_Saved_units + 0x0004)
0DCD E0        3085            movx    a,@dptr
0DCE FA        3086            mov     r2,a
0DCF A3        3087            inc     dptr
0DD0 E0        3088            movx    a,@dptr
0DD1 FB        3089            mov     r3,a
0DD2 A3        3090            inc     dptr
0DD3 E0        3091            movx    a,@dptr
0DD4 FC        3092            mov     r4,a
0DD5 A3        3093            inc     dptr
0DD6 E0        3094            movx    a,@dptr
0DD7 FD        3095            mov     r5,a
0DD8 EA        3096            mov     a,r2
0DD9 4B        3097            orl     a,r3
0DDA 4C        3098            orl     a,r4
0DDB 8DF0      3099            mov     b,r5
0DDD C2F7      3100            clr     b.7 ; Clear the sign bit
0DDF 45F0      3101            orl     a,b
0DE1 6000      3102            jz      L027012?
0DE3           3103   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:615: LCDprint("P", 1, 1, 0);
0DE3 754801    3104            mov     _LCDprint_PARM_2,#0x01
0DE6 75F801    3105            mov     _LCDprint_PARM_3,#0x01
0DE9 C2E0      3106            clr     _LCDprint_PARM_4
0DEB 90E400    3107            mov     dptr,#__str_6
0DEE 75F080    3108            mov     b,#0x80
0DF1 120000    3109            lcall   _LCDprint
0DF4 8000      3110            sjmp    L027013?
0DF6           3111   L027012?:
0DF6           3112   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:618: LCDprint("R", 1, 1, 0);
0DF6 754801    3113            mov     _LCDprint_PARM_2,#0x01
0DF9 75F801    3114            mov     _LCDprint_PARM_3,#0x01
0DFC C2E0      3115            clr     _LCDprint_PARM_4
0DFE 90E480    3116            mov     dptr,#__str_7
0E01 75F080    3117            mov     b,#0x80
0E04 120000    3118            lcall   _LCDprint
0E07           3119   L027013?:
0E07           3120   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:620: sprintf(buff, "S=%.2f R=%.2f", Saved_vsig[1], Saved_vref[1]);
0E07 901994    3121            mov     dptr,#(_Saved_vref + 0x0004)
0E0A E0        3122            movx    a,@dptr
0E0B FA        3123            mov     r2,a
0E0C A3        3124            inc     dptr
0E0D E0        3125            movx    a,@dptr
0E0E FB        3126            mov     r3,a
0E0F A3        3127            inc     dptr
0E10 E0        3128            movx    a,@dptr
0E11 FC        3129            mov     r4,a
0E12 A3        3130            inc     dptr
0E13 E0        3131            movx    a,@dptr
0E14 FD        3132            mov     r5,a
0E15 901954    3133            mov     dptr,#(_Saved_vsig + 0x0004)
0E18 E0        3134            movx    a,@dptr
0E19 FE        3135            mov     r6,a
0E1A A3        3136            inc     dptr
0E1B E0        3137            movx    a,@dptr
0E1C FF        3138            mov     r7,a
0E1D A3        3139            inc     dptr
0E1E E0        3140            movx    a,@dptr
0E1F F8        3141            mov     r0,a
0E20 A3        3142            inc     dptr
0E21 E0        3143            movx    a,@dptr
0E22 F9        3144            mov     r1,a
0E23 C002      3145            push    ar2
0E25 C003      3146            push    ar3
0E27 C004      3147            push    ar4
0E29 C005      3148            push    ar5
0E2B C006      3149            push    ar6
0E2D C007      3150            push    ar7
0E2F C000      3151            push    ar0
0E31 C001      3152            push    ar1
0E33 74C0      3153            mov     a,#__str_8
0E35 C0E0      3154            push    acc
0E37 74E4      3155            mov     a,#(__str_8 >> 8)
0E39 C0E0      3156            push    acc
0E3B 7480      3157            mov     a,#0x80
0E3D C0E0      3158            push    acc
0E3F 7470      3159            mov     a,#_DisplayMenu_buff_1_145
0E41 C0E0      3160            push    acc
0E43 74BF      3161            mov     a,#(_DisplayMenu_buff_1_145 >> 8)
0E45 C0E0      3162            push    acc
0E47 E4        3163            clr     a
0E48 C0E0      3164            push    acc
0E4A 120000    3165            lcall   _sprintf
0E4D E581      3166            mov     a,sp
0E4F 24F2      3167            add     a,#0xf2
0E51 F581      3168            mov     sp,a
0E53           3169   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:621: LCDprint(buff, 1, 3, 1);
0E53 754801    3170            mov     _LCDprint_PARM_2,#0x01
0E56 75F803    3171            mov     _LCDprint_PARM_3,#0x03
0E59 D2E0      3172            setb    _LCDprint_PARM_4
0E5B 90BF70    3173            mov     dptr,#_DisplayMenu_buff_1_145
0E5E 75F000    3174            mov     b,#0x00
0E61 120000    3175            lcall   _LCDprint
0E64           3176   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:622: sprintf(buff, "p=%.1f f=%.2fkHz", Saved_phase[1], Saved_freq[1] / 1000.0);
0E64 9018D4    3177            mov     dptr,#(_Saved_freq + 0x0004)
0E67 E0        3178            movx    a,@dptr
0E68 FA        3179            mov     r2,a
0E69 A3        3180            inc     dptr
0E6A E0        3181            movx    a,@dptr
0E6B FB        3182            mov     r3,a
0E6C A3        3183            inc     dptr
0E6D E0        3184            movx    a,@dptr
0E6E FC        3185            mov     r4,a
0E6F A3        3186            inc     dptr
0E70 E0        3187            movx    a,@dptr
0E71 FD        3188            mov     r5,a
0E72 E4        3189            clr     a
0E73 C0E0      3190            push    acc
0E75 C0E0      3191            push    acc
0E77 747A      3192            mov     a,#0x7A
0E79 C0E0      3193            push    acc
0E7B 7444      3194            mov     a,#0x44
0E7D C0E0      3195            push    acc
0E7F 8A82      3196            mov     dpl,r2
0E81 8B83      3197            mov     dph,r3
0E83 8CF0      3198            mov     b,r4
0E85 ED        3199            mov     a,r5
0E86 120000    3200            lcall   ___fsdiv
0E89 AA82      3201            mov     r2,dpl
0E8B AB83      3202            mov     r3,dph
0E8D ACF0      3203            mov     r4,b
0E8F FD        3204            mov     r5,a
0E90 E581      3205            mov     a,sp
0E92 24FC      3206            add     a,#0xfc
0E94 F581      3207            mov     sp,a
0E96 901914    3208            mov     dptr,#(_Saved_phase + 0x0004)
0E99 E0        3209            movx    a,@dptr
0E9A FE        3210            mov     r6,a
0E9B A3        3211            inc     dptr
0E9C E0        3212            movx    a,@dptr
0E9D FF        3213            mov     r7,a
0E9E A3        3214            inc     dptr
0E9F E0        3215            movx    a,@dptr
0EA0 F8        3216            mov     r0,a
0EA1 A3        3217            inc     dptr
0EA2 E0        3218            movx    a,@dptr
0EA3 F9        3219            mov     r1,a
0EA4 C002      3220            push    ar2
0EA6 C003      3221            push    ar3
0EA8 C004      3222            push    ar4
0EAA C005      3223            push    ar5
0EAC C006      3224            push    ar6
0EAE C007      3225            push    ar7
0EB0 C000      3226            push    ar0
0EB2 C001      3227            push    ar1
0EB4 74C0      3228            mov     a,#__str_2
0EB6 C0E0      3229            push    acc
0EB8 74E2      3230            mov     a,#(__str_2 >> 8)
0EBA C0E0      3231            push    acc
0EBC 7480      3232            mov     a,#0x80
0EBE C0E0      3233            push    acc
0EC0 7470      3234            mov     a,#_DisplayMenu_buff_1_145
0EC2 C0E0      3235            push    acc
0EC4 74BF      3236            mov     a,#(_DisplayMenu_buff_1_145 >> 8)
0EC6 C0E0      3237            push    acc
0EC8 E4        3238            clr     a
0EC9 C0E0      3239            push    acc
0ECB 120000    3240            lcall   _sprintf
0ECE E581      3241            mov     a,sp
0ED0 24F2      3242            add     a,#0xf2
0ED2 F581      3243            mov     sp,a
0ED4           3244   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:623: LCDprint(buff, 2, 0, 1); 
0ED4 754802    3245            mov     _LCDprint_PARM_2,#0x02
0ED7 75F800    3246            mov     _LCDprint_PARM_3,#0x00
0EDA D2E0      3247            setb    _LCDprint_PARM_4
0EDC 90BF70    3248            mov     dptr,#_DisplayMenu_buff_1_145
0EDF 75F000    3249            mov     b,#0x00
0EE2           3250   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:625: break; 
0EE2 020000    3251            ljmp    _LCDprint
0EE5           3252   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:626: case 4: 
0EE5           3253   L027014?:
0EE5           3254   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:627: LCDprint("3", 1, 0, 0);
0EE5 754801    3255            mov     _LCDprint_PARM_2,#0x01
0EE8 75F800    3256            mov     _LCDprint_PARM_3,#0x00
0EEB C2E0      3257            clr     _LCDprint_PARM_4
0EED 90E5C0    3258            mov     dptr,#__str_10
0EF0 75F080    3259            mov     b,#0x80
0EF3 120000    3260            lcall   _LCDprint
0EF6           3261   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:629: if (Saved_units[2]){
0EF6 901898    3262            mov     dptr,#(_Saved_units + 0x0008)
0EF9 E0        3263            movx    a,@dptr
0EFA FA        3264            mov     r2,a
0EFB A3        3265            inc     dptr
0EFC E0        3266            movx    a,@dptr
0EFD FB        3267            mov     r3,a
0EFE A3        3268            inc     dptr
0EFF E0        3269            movx    a,@dptr
0F00 FC        3270            mov     r4,a
0F01 A3        3271            inc     dptr
0F02 E0        3272            movx    a,@dptr
0F03 FD        3273            mov     r5,a
0F04 EA        3274            mov     a,r2
0F05 4B        3275            orl     a,r3
0F06 4C        3276            orl     a,r4
0F07 8DF0      3277            mov     b,r5
0F09 C2F7      3278            clr     b.7 ; Clear the sign bit
0F0B 45F0      3279            orl     a,b
0F0D 6000      3280            jz      L027016?
0F0F           3281   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:630: LCDprint("P", 1, 1, 0);
0F0F 754801    3282            mov     _LCDprint_PARM_2,#0x01
0F12 75F801    3283            mov     _LCDprint_PARM_3,#0x01
0F15 C2E0      3284            clr     _LCDprint_PARM_4
0F17 90E400    3285            mov     dptr,#__str_6
0F1A 75F080    3286            mov     b,#0x80
0F1D 120000    3287            lcall   _LCDprint
0F20 8000      3288            sjmp    L027017?
0F22           3289   L027016?:
0F22           3290   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:633: LCDprint("R", 1, 1, 0);
0F22 754801    3291            mov     _LCDprint_PARM_2,#0x01
0F25 75F801    3292            mov     _LCDprint_PARM_3,#0x01
0F28 C2E0      3293            clr     _LCDprint_PARM_4
0F2A 90E480    3294            mov     dptr,#__str_7
0F2D 75F080    3295            mov     b,#0x80
0F30 120000    3296            lcall   _LCDprint
0F33           3297   L027017?:
0F33           3298   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:635: sprintf(buff, "S=%.2f R=%.2f", Saved_vsig[2], Saved_vref[2]);
0F33 901998    3299            mov     dptr,#(_Saved_vref + 0x0008)
0F36 E0        3300            movx    a,@dptr
0F37 FA        3301            mov     r2,a
0F38 A3        3302            inc     dptr
0F39 E0        3303            movx    a,@dptr
0F3A FB        3304            mov     r3,a
0F3B A3        3305            inc     dptr
0F3C E0        3306            movx    a,@dptr
0F3D FC        3307            mov     r4,a
0F3E A3        3308            inc     dptr
0F3F E0        3309            movx    a,@dptr
0F40 FD        3310            mov     r5,a
0F41 901958    3311            mov     dptr,#(_Saved_vsig + 0x0008)
0F44 E0        3312            movx    a,@dptr
0F45 FE        3313            mov     r6,a
0F46 A3        3314            inc     dptr
0F47 E0        3315            movx    a,@dptr
0F48 FF        3316            mov     r7,a
0F49 A3        3317            inc     dptr
0F4A E0        3318            movx    a,@dptr
0F4B F8        3319            mov     r0,a
0F4C A3        3320            inc     dptr
0F4D E0        3321            movx    a,@dptr
0F4E F9        3322            mov     r1,a
0F4F C002      3323            push    ar2
0F51 C003      3324            push    ar3
0F53 C004      3325            push    ar4
0F55 C005      3326            push    ar5
0F57 C006      3327            push    ar6
0F59 C007      3328            push    ar7
0F5B C000      3329            push    ar0
0F5D C001      3330            push    ar1
0F5F 74C0      3331            mov     a,#__str_8
0F61 C0E0      3332            push    acc
0F63 74E4      3333            mov     a,#(__str_8 >> 8)
0F65 C0E0      3334            push    acc
0F67 7480      3335            mov     a,#0x80
0F69 C0E0      3336            push    acc
0F6B 7470      3337            mov     a,#_DisplayMenu_buff_1_145
0F6D C0E0      3338            push    acc
0F6F 74BF      3339            mov     a,#(_DisplayMenu_buff_1_145 >> 8)
0F71 C0E0      3340            push    acc
0F73 E4        3341            clr     a
0F74 C0E0      3342            push    acc
0F76 120000    3343            lcall   _sprintf
0F79 E581      3344            mov     a,sp
0F7B 24F2      3345            add     a,#0xf2
0F7D F581      3346            mov     sp,a
0F7F           3347   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:636: LCDprint(buff, 1, 3, 1);
0F7F 754801    3348            mov     _LCDprint_PARM_2,#0x01
0F82 75F803    3349            mov     _LCDprint_PARM_3,#0x03
0F85 D2E0      3350            setb    _LCDprint_PARM_4
0F87 90BF70    3351            mov     dptr,#_DisplayMenu_buff_1_145
0F8A 75F000    3352            mov     b,#0x00
0F8D 120000    3353            lcall   _LCDprint
0F90           3354   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:637: sprintf(buff, "p=%.1f f=%.2fkHz", Saved_phase[2], Saved_freq[2] / 1000.0);
0F90 9018D8    3355            mov     dptr,#(_Saved_freq + 0x0008)
0F93 E0        3356            movx    a,@dptr
0F94 FA        3357            mov     r2,a
0F95 A3        3358            inc     dptr
0F96 E0        3359            movx    a,@dptr
0F97 FB        3360            mov     r3,a
0F98 A3        3361            inc     dptr
0F99 E0        3362            movx    a,@dptr
0F9A FC        3363            mov     r4,a
0F9B A3        3364            inc     dptr
0F9C E0        3365            movx    a,@dptr
0F9D FD        3366            mov     r5,a
0F9E E4        3367            clr     a
0F9F C0E0      3368            push    acc
0FA1 C0E0      3369            push    acc
0FA3 747A      3370            mov     a,#0x7A
0FA5 C0E0      3371            push    acc
0FA7 7444      3372            mov     a,#0x44
0FA9 C0E0      3373            push    acc
0FAB 8A82      3374            mov     dpl,r2
0FAD 8B83      3375            mov     dph,r3
0FAF 8CF0      3376            mov     b,r4
0FB1 ED        3377            mov     a,r5
0FB2 120000    3378            lcall   ___fsdiv
0FB5 AA82      3379            mov     r2,dpl
0FB7 AB83      3380            mov     r3,dph
0FB9 ACF0      3381            mov     r4,b
0FBB FD        3382            mov     r5,a
0FBC E581      3383            mov     a,sp
0FBE 24FC      3384            add     a,#0xfc
0FC0 F581      3385            mov     sp,a
0FC2 901918    3386            mov     dptr,#(_Saved_phase + 0x0008)
0FC5 E0        3387            movx    a,@dptr
0FC6 FE        3388            mov     r6,a
0FC7 A3        3389            inc     dptr
0FC8 E0        3390            movx    a,@dptr
0FC9 FF        3391            mov     r7,a
0FCA A3        3392            inc     dptr
0FCB E0        3393            movx    a,@dptr
0FCC F8        3394            mov     r0,a
0FCD A3        3395            inc     dptr
0FCE E0        3396            movx    a,@dptr
0FCF F9        3397            mov     r1,a
0FD0 C002      3398            push    ar2
0FD2 C003      3399            push    ar3
0FD4 C004      3400            push    ar4
0FD6 C005      3401            push    ar5
0FD8 C006      3402            push    ar6
0FDA C007      3403            push    ar7
0FDC C000      3404            push    ar0
0FDE C001      3405            push    ar1
0FE0 74C0      3406            mov     a,#__str_2
0FE2 C0E0      3407            push    acc
0FE4 74E2      3408            mov     a,#(__str_2 >> 8)
0FE6 C0E0      3409            push    acc
0FE8 7480      3410            mov     a,#0x80
0FEA C0E0      3411            push    acc
0FEC 7470      3412            mov     a,#_DisplayMenu_buff_1_145
0FEE C0E0      3413            push    acc
0FF0 74BF      3414            mov     a,#(_DisplayMenu_buff_1_145 >> 8)
0FF2 C0E0      3415            push    acc
0FF4 E4        3416            clr     a
0FF5 C0E0      3417            push    acc
0FF7 120000    3418            lcall   _sprintf
0FFA E581      3419            mov     a,sp
0FFC 24F2      3420            add     a,#0xf2
0FFE F581      3421            mov     sp,a
1000           3422   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:638: LCDprint(buff, 2, 0, 1); 
1000 754802    3423            mov     _LCDprint_PARM_2,#0x02
1003 75F800    3424            mov     _LCDprint_PARM_3,#0x00
1006 D2E0      3425            setb    _LCDprint_PARM_4
1008 90BF70    3426            mov     dptr,#_DisplayMenu_buff_1_145
100B 75F000    3427            mov     b,#0x00
100E           3428   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:640: break; 
100E 020000    3429            ljmp    _LCDprint
1011           3430   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:641: case 5: 
1011           3431   L027018?:
1011           3432   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:642: LCDprint("4", 1, 0, 0);
1011 754801    3433            mov     _LCDprint_PARM_2,#0x01
1014 75F800    3434            mov     _LCDprint_PARM_3,#0x00
1017 C2E0      3435            clr     _LCDprint_PARM_4
1019 90E680    3436            mov     dptr,#__str_11
101C 75F080    3437            mov     b,#0x80
101F 120000    3438            lcall   _LCDprint
1022           3439   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:644: if (Saved_units[3]){
1022 90189C    3440            mov     dptr,#(_Saved_units + 0x000c)
1025 E0        3441            movx    a,@dptr
1026 FA        3442            mov     r2,a
1027 A3        3443            inc     dptr
1028 E0        3444            movx    a,@dptr
1029 FB        3445            mov     r3,a
102A A3        3446            inc     dptr
102B E0        3447            movx    a,@dptr
102C FC        3448            mov     r4,a
102D A3        3449            inc     dptr
102E E0        3450            movx    a,@dptr
102F FD        3451            mov     r5,a
1030 EA        3452            mov     a,r2
1031 4B        3453            orl     a,r3
1032 4C        3454            orl     a,r4
1033 8DF0      3455            mov     b,r5
1035 C2F7      3456            clr     b.7 ; Clear the sign bit
1037 45F0      3457            orl     a,b
1039 6000      3458            jz      L027020?
103B           3459   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:645: LCDprint("P", 1, 1, 0);
103B 754801    3460            mov     _LCDprint_PARM_2,#0x01
103E 75F801    3461            mov     _LCDprint_PARM_3,#0x01
1041 C2E0      3462            clr     _LCDprint_PARM_4
1043 90E400    3463            mov     dptr,#__str_6
1046 75F080    3464            mov     b,#0x80
1049 120000    3465            lcall   _LCDprint
104C 8000      3466            sjmp    L027021?
104E           3467   L027020?:
104E           3468   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:648: LCDprint("R", 1, 1, 0);
104E 754801    3469            mov     _LCDprint_PARM_2,#0x01
1051 75F801    3470            mov     _LCDprint_PARM_3,#0x01
1054 C2E0      3471            clr     _LCDprint_PARM_4
1056 90E480    3472            mov     dptr,#__str_7
1059 75F080    3473            mov     b,#0x80
105C 120000    3474            lcall   _LCDprint
105F           3475   L027021?:
105F           3476   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:650: sprintf(buff, "S=%.2f R=%.2f", Saved_vsig[3], Saved_vref[3]);
105F 90199C    3477            mov     dptr,#(_Saved_vref + 0x000c)
1062 E0        3478            movx    a,@dptr
1063 FA        3479            mov     r2,a
1064 A3        3480            inc     dptr
1065 E0        3481            movx    a,@dptr
1066 FB        3482            mov     r3,a
1067 A3        3483            inc     dptr
1068 E0        3484            movx    a,@dptr
1069 FC        3485            mov     r4,a
106A A3        3486            inc     dptr
106B E0        3487            movx    a,@dptr
106C FD        3488            mov     r5,a
106D 90195C    3489            mov     dptr,#(_Saved_vsig + 0x000c)
1070 E0        3490            movx    a,@dptr
1071 FE        3491            mov     r6,a
1072 A3        3492            inc     dptr
1073 E0        3493            movx    a,@dptr
1074 FF        3494            mov     r7,a
1075 A3        3495            inc     dptr
1076 E0        3496            movx    a,@dptr
1077 F8        3497            mov     r0,a
1078 A3        3498            inc     dptr
1079 E0        3499            movx    a,@dptr
107A F9        3500            mov     r1,a
107B C002      3501            push    ar2
107D C003      3502            push    ar3
107F C004      3503            push    ar4
1081 C005      3504            push    ar5
1083 C006      3505            push    ar6
1085 C007      3506            push    ar7
1087 C000      3507            push    ar0
1089 C001      3508            push    ar1
108B 74C0      3509            mov     a,#__str_8
108D C0E0      3510            push    acc
108F 74E4      3511            mov     a,#(__str_8 >> 8)
1091 C0E0      3512            push    acc
1093 7480      3513            mov     a,#0x80
1095 C0E0      3514            push    acc
1097 7470      3515            mov     a,#_DisplayMenu_buff_1_145
1099 C0E0      3516            push    acc
109B 74BF      3517            mov     a,#(_DisplayMenu_buff_1_145 >> 8)
109D C0E0      3518            push    acc
109F E4        3519            clr     a
10A0 C0E0      3520            push    acc
10A2 120000    3521            lcall   _sprintf
10A5 E581      3522            mov     a,sp
10A7 24F2      3523            add     a,#0xf2
10A9 F581      3524            mov     sp,a
10AB           3525   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:651: LCDprint(buff, 1, 3, 1);
10AB 754801    3526            mov     _LCDprint_PARM_2,#0x01
10AE 75F803    3527            mov     _LCDprint_PARM_3,#0x03
10B1 D2E0      3528            setb    _LCDprint_PARM_4
10B3 90BF70    3529            mov     dptr,#_DisplayMenu_buff_1_145
10B6 75F000    3530            mov     b,#0x00
10B9 120000    3531            lcall   _LCDprint
10BC           3532   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:652: sprintf(buff, "p=%.1f f=%.2fkHz", Saved_phase[3], Saved_freq[3] / 1000.0);
10BC 9018DC    3533            mov     dptr,#(_Saved_freq + 0x000c)
10BF E0        3534            movx    a,@dptr
10C0 FA        3535            mov     r2,a
10C1 A3        3536            inc     dptr
10C2 E0        3537            movx    a,@dptr
10C3 FB        3538            mov     r3,a
10C4 A3        3539            inc     dptr
10C5 E0        3540            movx    a,@dptr
10C6 FC        3541            mov     r4,a
10C7 A3        3542            inc     dptr
10C8 E0        3543            movx    a,@dptr
10C9 FD        3544            mov     r5,a
10CA E4        3545            clr     a
10CB C0E0      3546            push    acc
10CD C0E0      3547            push    acc
10CF 747A      3548            mov     a,#0x7A
10D1 C0E0      3549            push    acc
10D3 7444      3550            mov     a,#0x44
10D5 C0E0      3551            push    acc
10D7 8A82      3552            mov     dpl,r2
10D9 8B83      3553            mov     dph,r3
10DB 8CF0      3554            mov     b,r4
10DD ED        3555            mov     a,r5
10DE 120000    3556            lcall   ___fsdiv
10E1 AA82      3557            mov     r2,dpl
10E3 AB83      3558            mov     r3,dph
10E5 ACF0      3559            mov     r4,b
10E7 FD        3560            mov     r5,a
10E8 E581      3561            mov     a,sp
10EA 24FC      3562            add     a,#0xfc
10EC F581      3563            mov     sp,a
10EE 90191C    3564            mov     dptr,#(_Saved_phase + 0x000c)
10F1 E0        3565            movx    a,@dptr
10F2 FE        3566            mov     r6,a
10F3 A3        3567            inc     dptr
10F4 E0        3568            movx    a,@dptr
10F5 FF        3569            mov     r7,a
10F6 A3        3570            inc     dptr
10F7 E0        3571            movx    a,@dptr
10F8 F8        3572            mov     r0,a
10F9 A3        3573            inc     dptr
10FA E0        3574            movx    a,@dptr
10FB F9        3575            mov     r1,a
10FC C002      3576            push    ar2
10FE C003      3577            push    ar3
1100 C004      3578            push    ar4
1102 C005      3579            push    ar5
1104 C006      3580            push    ar6
1106 C007      3581            push    ar7
1108 C000      3582            push    ar0
110A C001      3583            push    ar1
110C 74C0      3584            mov     a,#__str_2
110E C0E0      3585            push    acc
1110 74E2      3586            mov     a,#(__str_2 >> 8)
1112 C0E0      3587            push    acc
1114 7480      3588            mov     a,#0x80
1116 C0E0      3589            push    acc
1118 7470      3590            mov     a,#_DisplayMenu_buff_1_145
111A C0E0      3591            push    acc
111C 74BF      3592            mov     a,#(_DisplayMenu_buff_1_145 >> 8)
111E C0E0      3593            push    acc
1120 E4        3594            clr     a
1121 C0E0      3595            push    acc
1123 120000    3596            lcall   _sprintf
1126 E581      3597            mov     a,sp
1128 24F2      3598            add     a,#0xf2
112A F581      3599            mov     sp,a
112C           3600   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:653: LCDprint(buff, 2, 0, 1); 
112C 754802    3601            mov     _LCDprint_PARM_2,#0x02
112F 75F800    3602            mov     _LCDprint_PARM_3,#0x00
1132 D2E0      3603            setb    _LCDprint_PARM_4
1134 90BF70    3604            mov     dptr,#_DisplayMenu_buff_1_145
1137 75F000    3605            mov     b,#0x00
113A           3606   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:655: break; 
113A 020000    3607            ljmp    _LCDprint
113D           3608   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:656: case 6:
113D           3609   L027022?:
113D           3610   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:657: LCDprint("5", 1, 0, 0);
113D 754801    3611            mov     _LCDprint_PARM_2,#0x01
1140 75F800    3612            mov     _LCDprint_PARM_3,#0x00
1143 C2E0      3613            clr     _LCDprint_PARM_4
1145 90E740    3614            mov     dptr,#__str_12
1148 75F080    3615            mov     b,#0x80
114B 120000    3616            lcall   _LCDprint
114E           3617   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:659: if (Saved_units[4]){
114E 9018A0    3618            mov     dptr,#(_Saved_units + 0x0010)
1151 E0        3619            movx    a,@dptr
1152 FA        3620            mov     r2,a
1153 A3        3621            inc     dptr
1154 E0        3622            movx    a,@dptr
1155 FB        3623            mov     r3,a
1156 A3        3624            inc     dptr
1157 E0        3625            movx    a,@dptr
1158 FC        3626            mov     r4,a
1159 A3        3627            inc     dptr
115A E0        3628            movx    a,@dptr
115B FD        3629            mov     r5,a
115C EA        3630            mov     a,r2
115D 4B        3631            orl     a,r3
115E 4C        3632            orl     a,r4
115F 8DF0      3633            mov     b,r5
1161 C2F7      3634            clr     b.7 ; Clear the sign bit
1163 45F0      3635            orl     a,b
1165 6000      3636            jz      L027024?
1167           3637   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:660: LCDprint("P", 1, 1, 0);
1167 754801    3638            mov     _LCDprint_PARM_2,#0x01
116A 75F801    3639            mov     _LCDprint_PARM_3,#0x01
116D C2E0      3640            clr     _LCDprint_PARM_4
116F 90E400    3641            mov     dptr,#__str_6
1172 75F080    3642            mov     b,#0x80
1175 120000    3643            lcall   _LCDprint
1178 8000      3644            sjmp    L027025?
117A           3645   L027024?:
117A           3646   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:663: LCDprint("R", 1, 1, 0);
117A 754801    3647            mov     _LCDprint_PARM_2,#0x01
117D 75F801    3648            mov     _LCDprint_PARM_3,#0x01
1180 C2E0      3649            clr     _LCDprint_PARM_4
1182 90E480    3650            mov     dptr,#__str_7
1185 75F080    3651            mov     b,#0x80
1188 120000    3652            lcall   _LCDprint
118B           3653   L027025?:
118B           3654   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:665: sprintf(buff, "S=%.2f R=%.2f", Saved_vsig[4], Saved_vref[4]);
118B 9019A0    3655            mov     dptr,#(_Saved_vref + 0x0010)
118E E0        3656            movx    a,@dptr
118F FA        3657            mov     r2,a
1190 A3        3658            inc     dptr
1191 E0        3659            movx    a,@dptr
1192 FB        3660            mov     r3,a
1193 A3        3661            inc     dptr
1194 E0        3662            movx    a,@dptr
1195 FC        3663            mov     r4,a
1196 A3        3664            inc     dptr
1197 E0        3665            movx    a,@dptr
1198 FD        3666            mov     r5,a
1199 901960    3667            mov     dptr,#(_Saved_vsig + 0x0010)
119C E0        3668            movx    a,@dptr
119D FE        3669            mov     r6,a
119E A3        3670            inc     dptr
119F E0        3671            movx    a,@dptr
11A0 FF        3672            mov     r7,a
11A1 A3        3673            inc     dptr
11A2 E0        3674            movx    a,@dptr
11A3 F8        3675            mov     r0,a
11A4 A3        3676            inc     dptr
11A5 E0        3677            movx    a,@dptr
11A6 F9        3678            mov     r1,a
11A7 C002      3679            push    ar2
11A9 C003      3680            push    ar3
11AB C004      3681            push    ar4
11AD C005      3682            push    ar5
11AF C006      3683            push    ar6
11B1 C007      3684            push    ar7
11B3 C000      3685            push    ar0
11B5 C001      3686            push    ar1
11B7 74C0      3687            mov     a,#__str_8
11B9 C0E0      3688            push    acc
11BB 74E4      3689            mov     a,#(__str_8 >> 8)
11BD C0E0      3690            push    acc
11BF 7480      3691            mov     a,#0x80
11C1 C0E0      3692            push    acc
11C3 7470      3693            mov     a,#_DisplayMenu_buff_1_145
11C5 C0E0      3694            push    acc
11C7 74BF      3695            mov     a,#(_DisplayMenu_buff_1_145 >> 8)
11C9 C0E0      3696            push    acc
11CB E4        3697            clr     a
11CC C0E0      3698            push    acc
11CE 120000    3699            lcall   _sprintf
11D1 E581      3700            mov     a,sp
11D3 24F2      3701            add     a,#0xf2
11D5 F581      3702            mov     sp,a
11D7           3703   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:666: LCDprint(buff, 1, 3, 1);
11D7 754801    3704            mov     _LCDprint_PARM_2,#0x01
11DA 75F803    3705            mov     _LCDprint_PARM_3,#0x03
11DD D2E0      3706            setb    _LCDprint_PARM_4
11DF 90BF70    3707            mov     dptr,#_DisplayMenu_buff_1_145
11E2 75F000    3708            mov     b,#0x00
11E5 120000    3709            lcall   _LCDprint
11E8           3710   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:667: sprintf(buff, "p=%.1f f=%.2fkHz", Saved_phase[4], Saved_freq[4] / 1000.0);
11E8 9018E0    3711            mov     dptr,#(_Saved_freq + 0x0010)
11EB E0        3712            movx    a,@dptr
11EC FA        3713            mov     r2,a
11ED A3        3714            inc     dptr
11EE E0        3715            movx    a,@dptr
11EF FB        3716            mov     r3,a
11F0 A3        3717            inc     dptr
11F1 E0        3718            movx    a,@dptr
11F2 FC        3719            mov     r4,a
11F3 A3        3720            inc     dptr
11F4 E0        3721            movx    a,@dptr
11F5 FD        3722            mov     r5,a
11F6 E4        3723            clr     a
11F7 C0E0      3724            push    acc
11F9 C0E0      3725            push    acc
11FB 747A      3726            mov     a,#0x7A
11FD C0E0      3727            push    acc
11FF 7444      3728            mov     a,#0x44
1201 C0E0      3729            push    acc
1203 8A82      3730            mov     dpl,r2
1205 8B83      3731            mov     dph,r3
1207 8CF0      3732            mov     b,r4
1209 ED        3733            mov     a,r5
120A 120000    3734            lcall   ___fsdiv
120D AA82      3735            mov     r2,dpl
120F AB83      3736            mov     r3,dph
1211 ACF0      3737            mov     r4,b
1213 FD        3738            mov     r5,a
1214 E581      3739            mov     a,sp
1216 24FC      3740            add     a,#0xfc
1218 F581      3741            mov     sp,a
121A 901920    3742            mov     dptr,#(_Saved_phase + 0x0010)
121D E0        3743            movx    a,@dptr
121E FE        3744            mov     r6,a
121F A3        3745            inc     dptr
1220 E0        3746            movx    a,@dptr
1221 FF        3747            mov     r7,a
1222 A3        3748            inc     dptr
1223 E0        3749            movx    a,@dptr
1224 F8        3750            mov     r0,a
1225 A3        3751            inc     dptr
1226 E0        3752            movx    a,@dptr
1227 F9        3753            mov     r1,a
1228 C002      3754            push    ar2
122A C003      3755            push    ar3
122C C004      3756            push    ar4
122E C005      3757            push    ar5
1230 C006      3758            push    ar6
1232 C007      3759            push    ar7
1234 C000      3760            push    ar0
1236 C001      3761            push    ar1
1238 74C0      3762            mov     a,#__str_2
123A C0E0      3763            push    acc
123C 74E2      3764            mov     a,#(__str_2 >> 8)
123E C0E0      3765            push    acc
1240 7480      3766            mov     a,#0x80
1242 C0E0      3767            push    acc
1244 7470      3768            mov     a,#_DisplayMenu_buff_1_145
1246 C0E0      3769            push    acc
1248 74BF      3770            mov     a,#(_DisplayMenu_buff_1_145 >> 8)
124A C0E0      3771            push    acc
124C E4        3772            clr     a
124D C0E0      3773            push    acc
124F 120000    3774            lcall   _sprintf
1252 E581      3775            mov     a,sp
1254 24F2      3776            add     a,#0xf2
1256 F581      3777            mov     sp,a
1258           3778   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:668: LCDprint(buff, 2, 0, 1); 
1258 754802    3779            mov     _LCDprint_PARM_2,#0x02
125B 75F800    3780            mov     _LCDprint_PARM_3,#0x00
125E D2E0      3781            setb    _LCDprint_PARM_4
1260 90BF70    3782            mov     dptr,#_DisplayMenu_buff_1_145
1263 75F000    3783            mov     b,#0x00
1266           3784   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:671: }
1266 020000    3785            ljmp    _LCDprint
1269           3786   ;------------------------------------------------------------
1269           3787   ;Allocation info for local variables in function 'main'
1269           3788   ;------------------------------------------------------------
1269           3789   ;i                         Allocated to registers r2 r3 
1269           3790   ;sloc0                     Allocated with name '_main_sloc0_1_0'
1269           3791   ;sloc1                     Allocated with name '_main_sloc1_1_0'
1269           3792   ;sloc2                     Allocated with name '_main_sloc2_1_0'
1269           3793   ;sloc3                     Allocated with name '_main_sloc3_1_0'
1269           3794   ;v_rms                     Allocated with name '_main_v_rms_1_160'
1269           3795   ;units                     Allocated with name '_main_units_1_160'
1269           3796   ;period                    Allocated with name '_main_period_1_160'
1269           3797   ;period_arr                Allocated with name '_main_period_arr_1_160'
1269           3798   ;time_diff                 Allocated with name '_main_time_diff_1_160'
1269           3799   ;menu                      Allocated with name '_main_menu_1_160'
1269           3800   ;mem                       Allocated with name '_main_mem_1_160'
1269           3801   ;------------------------------------------------------------
1269           3802   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:674: void main (void)
1269           3803   ;        -----------------------------------------
1269           3804   ;         function main
1269           3805   ;        -----------------------------------------
1269           3806   _main:
1269           3807   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:678: xdata int units = 0; 
1269 90C010    3808            mov     dptr,#_main_units_1_160
126C E4        3809            clr     a
126D F0        3810            movx    @dptr,a
126E A3        3811            inc     dptr
126F F0        3812            movx    @dptr,a
1270           3813   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:684: xdata int menu = 1; 
1270 90C100    3814            mov     dptr,#_main_menu_1_160
1273 7401      3815            mov     a,#0x01
1275 F0        3816            movx    @dptr,a
1276 E4        3817            clr     a
1277 A3        3818            inc     dptr
1278 F0        3819            movx    @dptr,a
1279           3820   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:685: xdata int mem = 0; 
1279 90C140    3821            mov     dptr,#_main_mem_1_160
127C E4        3822            clr     a
127D F0        3823            movx    @dptr,a
127E A3        3824            inc     dptr
127F F0        3825            movx    @dptr,a
1280           3826   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:687: TIMER0_Init();
1280 120000    3827            lcall   _TIMER0_Init
1283           3828   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:688: LCD_4BIT(); 
1283 120000    3829            lcall   _LCD_4BIT
1286           3830   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:691: InitPinADC(2,1);
1286 756001    3831            mov     _InitPinADC_PARM_2,#0x01
1289 758202    3832            mov     dpl,#0x02
128C 120000    3833            lcall   _InitPinADC
128F           3834   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:692: InitPinADC(2,2);
128F 756002    3835            mov     _InitPinADC_PARM_2,#0x02
1292 758202    3836            mov     dpl,#0x02
1295 120000    3837            lcall   _InitPinADC
1298           3838   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:693: InitADC();
1298 120000    3839            lcall   _InitADC
129B           3840   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:694: Set_Pin_Input(0x31);
129B 758231    3841            mov     dpl,#0x31
129E 120000    3842            lcall   _Set_Pin_Input
12A1           3843   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:695: Set_Pin_Input(0X25);
12A1 758225    3844            mov     dpl,#0x25
12A4 120000    3845            lcall   _Set_Pin_Input
12A7           3846   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:696: Set_Pin_Input(0x37);
12A7 758237    3847            mov     dpl,#0x37
12AA 120000    3848            lcall   _Set_Pin_Input
12AD           3849   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:697: Set_Pin_Output(0x01);
12AD 758201    3850            mov     dpl,#0x01
12B0 120000    3851            lcall   _Set_Pin_Output
12B3           3852   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:698: waitms(500); // Give PuTTy a chance to start before sending
12B3 9001F4    3853            mov     dptr,#0x01F4
12B6 120000    3854            lcall   _waitms
12B9           3855   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:699: printf("\x1b[2J"); // Clear screen using ANSI escape sequence.
12B9 7400      3856            mov     a,#__str_13
12BB C0E0      3857            push    acc
12BD 74E8      3858            mov     a,#(__str_13 >> 8)
12BF C0E0      3859            push    acc
12C1 7480      3860            mov     a,#0x80
12C3 C0E0      3861            push    acc
12C5 120000    3862            lcall   _printf
12C8 1581      3863            dec     sp
12CA 1581      3864            dec     sp
12CC 1581      3865            dec     sp
12CE           3866   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:705: __FILE__, __DATE__, __TIME__);
12CE           3867   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:704: "Compiled: %s, %s\n\n",
12CE 7480      3868            mov     a,#__str_17
12D0 C0E0      3869            push    acc
12D2 74E8      3870            mov     a,#(__str_17 >> 8)
12D4 C0E0      3871            push    acc
12D6 7480      3872            mov     a,#0x80
12D8 C0E0      3873            push    acc
12DA 74C0      3874            mov     a,#__str_16
12DC C0E0      3875            push    acc
12DE 74E8      3876            mov     a,#(__str_16 >> 8)
12E0 C0E0      3877            push    acc
12E2 7480      3878            mov     a,#0x80
12E4 C0E0      3879            push    acc
12E6 7400      3880            mov     a,#__str_15
12E8 C0E0      3881            push    acc
12EA 74E9      3882            mov     a,#(__str_15 >> 8)
12EC C0E0      3883            push    acc
12EE 7480      3884            mov     a,#0x80
12F0 C0E0      3885            push    acc
12F2 7440      3886            mov     a,#__str_14
12F4 C0E0      3887            push    acc
12F6 74E9      3888            mov     a,#(__str_14 >> 8)
12F8 C0E0      3889            push    acc
12FA 7480      3890            mov     a,#0x80
12FC C0E0      3891            push    acc
12FE 120000    3892            lcall   _printf
1301 E581      3893            mov     a,sp
1303 24F4      3894            add     a,#0xf4
1305 F581      3895            mov     sp,a
1307           3896   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:706: while(1)
1307           3897   L028059?:
1307           3898   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:709: Set_Pin_Zero(0x01);
1307 758201    3899            mov     dpl,#0x01
130A 120000    3900            lcall   _Set_Pin_Zero
130D           3901   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:710: ReadPeriod(period_arr);
130D 90C060    3902            mov     dptr,#_main_period_arr_1_160
1310 75F000    3903            mov     b,#0x00
1313 120000    3904            lcall   _ReadPeriod
1316           3905   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:711: period = period_arr[0];
1316 90C060    3906            mov     dptr,#_main_period_arr_1_160
1319 E0        3907            movx    a,@dptr
131A F5F0      3908            mov     _main_sloc2_1_0,a
131C A3        3909            inc     dptr
131D E0        3910            movx    a,@dptr
131E F5F1      3911            mov     (_main_sloc2_1_0 + 1),a
1320 A3        3912            inc     dptr
1321 E0        3913            movx    a,@dptr
1322 F5F2      3914            mov     (_main_sloc2_1_0 + 2),a
1324 A3        3915            inc     dptr
1325 E0        3916            movx    a,@dptr
1326 F5F3      3917            mov     (_main_sloc2_1_0 + 3),a
1328           3918   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:714: ReadPeak(period, vpeak);
1328 75A850    3919            mov     _ReadPeak_PARM_2,#_vpeak
132B 75A91A    3920            mov     (_ReadPeak_PARM_2 + 1),#(_vpeak >> 8)
132E 75AA00    3921            mov     (_ReadPeak_PARM_2 + 2),#0x00
1331 85F082    3922            mov     dpl,_main_sloc2_1_0
1334 85F183    3923            mov     dph,(_main_sloc2_1_0 + 1)
1337 85F2F0    3924            mov     b,(_main_sloc2_1_0 + 2)
133A E5F3      3925            mov     a,(_main_sloc2_1_0 + 3)
133C 120000    3926            lcall   _ReadPeak
133F           3927   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:715: time_diff = ReadDiff();
133F 120000    3928            lcall   _ReadDiff
1342 858270    3929            mov     _main_sloc0_1_0,dpl
1345 858371    3930            mov     (_main_sloc0_1_0 + 1),dph
1348 85F072    3931            mov     (_main_sloc0_1_0 + 2),b
134B F573      3932            mov     (_main_sloc0_1_0 + 3),a
134D 90C0B0    3933            mov     dptr,#_main_time_diff_1_160
1350 E570      3934            mov     a,_main_sloc0_1_0
1352 F0        3935            movx    @dptr,a
1353 A3        3936            inc     dptr
1354 E571      3937            mov     a,(_main_sloc0_1_0 + 1)
1356 F0        3938            movx    @dptr,a
1357 A3        3939            inc     dptr
1358 E572      3940            mov     a,(_main_sloc0_1_0 + 2)
135A F0        3941            movx    @dptr,a
135B A3        3942            inc     dptr
135C E573      3943            mov     a,(_main_sloc0_1_0 + 3)
135E F0        3944            movx    @dptr,a
135F           3945   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:717: v_rms[0] = vpeak[0] / sqrtf(2); 
135F 901A50    3946            mov     dptr,#_vpeak
1362 E0        3947            movx    a,@dptr
1363 F5B0      3948            mov     _main_sloc1_1_0,a
1365 A3        3949            inc     dptr
1366 E0        3950            movx    a,@dptr
1367 F5B1      3951            mov     (_main_sloc1_1_0 + 1),a
1369 A3        3952            inc     dptr
136A E0        3953            movx    a,@dptr
136B F5B2      3954            mov     (_main_sloc1_1_0 + 2),a
136D A3        3955            inc     dptr
136E E0        3956            movx    a,@dptr
136F F5B3      3957            mov     (_main_sloc1_1_0 + 3),a
1371 900000    3958            mov     dptr,#(0x00&0x00ff)
1374 E4        3959            clr     a
1375 F5F0      3960            mov     b,a
1377 7440      3961            mov     a,#0x40
1379 120000    3962            lcall   _sqrtf
137C AE82      3963            mov     r6,dpl
137E AF83      3964            mov     r7,dph
1380 A8F0      3965            mov     r0,b
1382 F9        3966            mov     r1,a
1383 C006      3967            push    ar6
1385 C007      3968            push    ar7
1387 C000      3969            push    ar0
1389 C001      3970            push    ar1
138B 85B082    3971            mov     dpl,_main_sloc1_1_0
138E 85B183    3972            mov     dph,(_main_sloc1_1_0 + 1)
1391 85B2F0    3973            mov     b,(_main_sloc1_1_0 + 2)
1394 E5B3      3974            mov     a,(_main_sloc1_1_0 + 3)
1396 120000    3975            lcall   ___fsdiv
1399 AE82      3976            mov     r6,dpl
139B AF83      3977            mov     r7,dph
139D A8F0      3978            mov     r0,b
139F F9        3979            mov     r1,a
13A0 E581      3980            mov     a,sp
13A2 24FC      3981            add     a,#0xfc
13A4 F581      3982            mov     sp,a
13A6 90BFC0    3983            mov     dptr,#_main_v_rms_1_160
13A9 EE        3984            mov     a,r6
13AA F0        3985            movx    @dptr,a
13AB A3        3986            inc     dptr
13AC EF        3987            mov     a,r7
13AD F0        3988            movx    @dptr,a
13AE A3        3989            inc     dptr
13AF E8        3990            mov     a,r0
13B0 F0        3991            movx    @dptr,a
13B1 A3        3992            inc     dptr
13B2 E9        3993            mov     a,r1
13B3 F0        3994            movx    @dptr,a
13B4           3995   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:718: v_rms[1] = vpeak[1] / sqrtf(2); 
13B4 901A54    3996            mov     dptr,#(_vpeak + 0x0004)
13B7 E0        3997            movx    a,@dptr
13B8 F5B0      3998            mov     _main_sloc1_1_0,a
13BA A3        3999            inc     dptr
13BB E0        4000            movx    a,@dptr
13BC F5B1      4001            mov     (_main_sloc1_1_0 + 1),a
13BE A3        4002            inc     dptr
13BF E0        4003            movx    a,@dptr
13C0 F5B2      4004            mov     (_main_sloc1_1_0 + 2),a
13C2 A3        4005            inc     dptr
13C3 E0        4006            movx    a,@dptr
13C4 F5B3      4007            mov     (_main_sloc1_1_0 + 3),a
13C6 900000    4008            mov     dptr,#(0x00&0x00ff)
13C9 E4        4009            clr     a
13CA F5F0      4010            mov     b,a
13CC 7440      4011            mov     a,#0x40
13CE 120000    4012            lcall   _sqrtf
13D1 AE82      4013            mov     r6,dpl
13D3 AF83      4014            mov     r7,dph
13D5 A8F0      4015            mov     r0,b
13D7 F9        4016            mov     r1,a
13D8 C006      4017            push    ar6
13DA C007      4018            push    ar7
13DC C000      4019            push    ar0
13DE C001      4020            push    ar1
13E0 85B082    4021            mov     dpl,_main_sloc1_1_0
13E3 85B183    4022            mov     dph,(_main_sloc1_1_0 + 1)
13E6 85B2F0    4023            mov     b,(_main_sloc1_1_0 + 2)
13E9 E5B3      4024            mov     a,(_main_sloc1_1_0 + 3)
13EB 120000    4025            lcall   ___fsdiv
13EE AE82      4026            mov     r6,dpl
13F0 AF83      4027            mov     r7,dph
13F2 A8F0      4028            mov     r0,b
13F4 F9        4029            mov     r1,a
13F5 E581      4030            mov     a,sp
13F7 24FC      4031            add     a,#0xfc
13F9 F581      4032            mov     sp,a
13FB 90BFC4    4033            mov     dptr,#(_main_v_rms_1_160 + 0x0004)
13FE EE        4034            mov     a,r6
13FF F0        4035            movx    @dptr,a
1400 A3        4036            inc     dptr
1401 EF        4037            mov     a,r7
1402 F0        4038            movx    @dptr,a
1403 A3        4039            inc     dptr
1404 E8        4040            mov     a,r0
1405 F0        4041            movx    @dptr,a
1406 A3        4042            inc     dptr
1407 E9        4043            mov     a,r1
1408 F0        4044            movx    @dptr,a
1409           4045   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:719: if (time_diff > (period / 2.0))
1409 E4        4046            clr     a
140A C0E0      4047            push    acc
140C C0E0      4048            push    acc
140E C0E0      4049            push    acc
1410 7440      4050            mov     a,#0x40
1412 C0E0      4051            push    acc
1414 85F082    4052            mov     dpl,_main_sloc2_1_0
1417 85F183    4053            mov     dph,(_main_sloc2_1_0 + 1)
141A 85F2F0    4054            mov     b,(_main_sloc2_1_0 + 2)
141D E5F3      4055            mov     a,(_main_sloc2_1_0 + 3)
141F 120000    4056            lcall   ___fsdiv
1422 AE82      4057            mov     r6,dpl
1424 AF83      4058            mov     r7,dph
1426 A8F0      4059            mov     r0,b
1428 F9        4060            mov     r1,a
1429 E581      4061            mov     a,sp
142B 24FC      4062            add     a,#0xfc
142D F581      4063            mov     sp,a
142F C006      4064            push    ar6
1431 C007      4065            push    ar7
1433 C000      4066            push    ar0
1435 C001      4067            push    ar1
1437 857082    4068            mov     dpl,_main_sloc0_1_0
143A 857183    4069            mov     dph,(_main_sloc0_1_0 + 1)
143D 8572F0    4070            mov     b,(_main_sloc0_1_0 + 2)
1440 E573      4071            mov     a,(_main_sloc0_1_0 + 3)
1442 120000    4072            lcall   ___fsgt
1445 AE82      4073            mov     r6,dpl
1447 E581      4074            mov     a,sp
1449 24FC      4075            add     a,#0xfc
144B F581      4076            mov     sp,a
144D EE        4077            mov     a,r6
144E 6000      4078            jz      L028002?
1450           4079   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:721: time_diff -= period; 
1450 C0F0      4080            push    _main_sloc2_1_0
1452 C0F1      4081            push    (_main_sloc2_1_0 + 1)
1454 C0F2      4082            push    (_main_sloc2_1_0 + 2)
1456 C0F3      4083            push    (_main_sloc2_1_0 + 3)
1458 857082    4084            mov     dpl,_main_sloc0_1_0
145B 857183    4085            mov     dph,(_main_sloc0_1_0 + 1)
145E 8572F0    4086            mov     b,(_main_sloc0_1_0 + 2)
1461 E573      4087            mov     a,(_main_sloc0_1_0 + 3)
1463 120000    4088            lcall   ___fssub
1466 AE82      4089            mov     r6,dpl
1468 AF83      4090            mov     r7,dph
146A A8F0      4091            mov     r0,b
146C F9        4092            mov     r1,a
146D E581      4093            mov     a,sp
146F 24FC      4094            add     a,#0xfc
1471 F581      4095            mov     sp,a
1473 90C0B0    4096            mov     dptr,#_main_time_diff_1_160
1476 EE        4097            mov     a,r6
1477 F0        4098            movx    @dptr,a
1478 A3        4099            inc     dptr
1479 EF        4100            mov     a,r7
147A F0        4101            movx    @dptr,a
147B A3        4102            inc     dptr
147C E8        4103            mov     a,r0
147D F0        4104            movx    @dptr,a
147E A3        4105            inc     dptr
147F E9        4106            mov     a,r1
1480 F0        4107            movx    @dptr,a
1481           4108   L028002?:
1481           4109   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:723: phase_diff = time_diff * -360.0 / period; 
1481 90C0B0    4110            mov     dptr,#_main_time_diff_1_160
1484 E0        4111            movx    a,@dptr
1485 C0E0      4112            push    acc
1487 A3        4113            inc     dptr
1488 E0        4114            movx    a,@dptr
1489 C0E0      4115            push    acc
148B A3        4116            inc     dptr
148C E0        4117            movx    a,@dptr
148D C0E0      4118            push    acc
148F A3        4119            inc     dptr
1490 E0        4120            movx    a,@dptr
1491 C0E0      4121            push    acc
1493 900000    4122            mov     dptr,#0x0000
1496 75F0B4    4123            mov     b,#0xB4
1499 74C3      4124            mov     a,#0xC3
149B 120000    4125            lcall   ___fsmul
149E AE82      4126            mov     r6,dpl
14A0 AF83      4127            mov     r7,dph
14A2 A8F0      4128            mov     r0,b
14A4 F9        4129            mov     r1,a
14A5 E581      4130            mov     a,sp
14A7 24FC      4131            add     a,#0xfc
14A9 F581      4132            mov     sp,a
14AB C0F0      4133            push    _main_sloc2_1_0
14AD C0F1      4134            push    (_main_sloc2_1_0 + 1)
14AF C0F2      4135            push    (_main_sloc2_1_0 + 2)
14B1 C0F3      4136            push    (_main_sloc2_1_0 + 3)
14B3 8E82      4137            mov     dpl,r6
14B5 8F83      4138            mov     dph,r7
14B7 88F0      4139            mov     b,r0
14B9 E9        4140            mov     a,r1
14BA 120000    4141            lcall   ___fsdiv
14BD AE82      4142            mov     r6,dpl
14BF AF83      4143            mov     r7,dph
14C1 A8F0      4144            mov     r0,b
14C3 F9        4145            mov     r1,a
14C4 E581      4146            mov     a,sp
14C6 24FC      4147            add     a,#0xfc
14C8 F581      4148            mov     sp,a
14CA 901A10    4149            mov     dptr,#_phase_diff
14CD EE        4150            mov     a,r6
14CE F0        4151            movx    @dptr,a
14CF A3        4152            inc     dptr
14D0 EF        4153            mov     a,r7
14D1 F0        4154            movx    @dptr,a
14D2 A3        4155            inc     dptr
14D3 E8        4156            mov     a,r0
14D4 F0        4157            movx    @dptr,a
14D5 A3        4158            inc     dptr
14D6 E9        4159            mov     a,r1
14D7 F0        4160            movx    @dptr,a
14D8           4161   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:724: frequency = 1.0/ period;
14D8 C0F0      4162            push    _main_sloc2_1_0
14DA C0F1      4163            push    (_main_sloc2_1_0 + 1)
14DC C0F2      4164            push    (_main_sloc2_1_0 + 2)
14DE C0F3      4165            push    (_main_sloc2_1_0 + 3)
14E0 900000    4166            mov     dptr,#0x0000
14E3 75F080    4167            mov     b,#0x80
14E6 743F      4168            mov     a,#0x3F
14E8 120000    4169            lcall   ___fsdiv
14EB AE82      4170            mov     r6,dpl
14ED AF83      4171            mov     r7,dph
14EF A8F0      4172            mov     r0,b
14F1 F9        4173            mov     r1,a
14F2 E581      4174            mov     a,sp
14F4 24FC      4175            add     a,#0xfc
14F6 F581      4176            mov     sp,a
14F8 9019D0    4177            mov     dptr,#_frequency
14FB EE        4178            mov     a,r6
14FC F0        4179            movx    @dptr,a
14FD A3        4180            inc     dptr
14FE EF        4181            mov     a,r7
14FF F0        4182            movx    @dptr,a
1500 A3        4183            inc     dptr
1501 E8        4184            mov     a,r0
1502 F0        4185            movx    @dptr,a
1503 A3        4186            inc     dptr
1504 E9        4187            mov     a,r1
1505 F0        4188            movx    @dptr,a
1506           4189   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:726: if (ReadButtonDebounced(Buttonleft)){
1506 758231    4190            mov     dpl,#0x31
1509 120000    4191            lcall   _ReadButtonDebounced
150C 4000      4192            jc      L028095?
150E 020000    4193            ljmp    L028024?
1511           4194   L028095?:
1511           4195   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:727: if (menu == 0) units = ~units; 
1511 90C100    4196            mov     dptr,#_main_menu_1_160
1514 E0        4197            movx    a,@dptr
1515 FE        4198            mov     r6,a
1516 A3        4199            inc     dptr
1517 E0        4200            movx    a,@dptr
1518 FF        4201            mov     r7,a
1519 4E        4202            orl     a,r6
151A 7000      4203            jnz     L028021?
151C 90C010    4204            mov     dptr,#_main_units_1_160
151F E0        4205            movx    a,@dptr
1520 F8        4206            mov     r0,a
1521 A3        4207            inc     dptr
1522 E0        4208            movx    a,@dptr
1523 F9        4209            mov     r1,a
1524 90C010    4210            mov     dptr,#_main_units_1_160
1527 E8        4211            mov     a,r0
1528 F4        4212            cpl     a
1529 F0        4213            movx    @dptr,a
152A E9        4214            mov     a,r1
152B F4        4215            cpl     a
152C A3        4216            inc     dptr
152D F0        4217            movx    @dptr,a
152E 8000      4218            sjmp    L028022?
1530           4219   L028021?:
1530           4220   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:728: else if (menu == 1) menu = 0; 
1530 BE0100    4221            cjne    r6,#0x01,L028018?
1533 BF0000    4222            cjne    r7,#0x00,L028018?
1536 90C100    4223            mov     dptr,#_main_menu_1_160
1539 E4        4224            clr     a
153A F0        4225            movx    @dptr,a
153B A3        4226            inc     dptr
153C F0        4227            movx    @dptr,a
153D 8000      4228            sjmp    L028022?
153F           4229   L028018?:
153F           4230   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:729: else if (menu == 2) menu = 1; 
153F BE0240    4231            cjne    r6,#0x02,L028015?
1542 BF0040    4232            cjne    r7,#0x00,L028015?
1545 90C100    4233            mov     dptr,#_main_menu_1_160
1548 7401      4234            mov     a,#0x01
154A F0        4235            movx    @dptr,a
154B E4        4236            clr     a
154C A3        4237            inc     dptr
154D F0        4238            movx    @dptr,a
154E 8000      4239            sjmp    L028022?
1550           4240   L028015?:
1550           4241   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:730: else if (menu == 3) menu = 2; 
1550 BE0380    4242            cjne    r6,#0x03,L028012?
1553 BF0080    4243            cjne    r7,#0x00,L028012?
1556 90C100    4244            mov     dptr,#_main_menu_1_160
1559 7402      4245            mov     a,#0x02
155B F0        4246            movx    @dptr,a
155C E4        4247            clr     a
155D A3        4248            inc     dptr
155E F0        4249            movx    @dptr,a
155F 8000      4250            sjmp    L028022?
1561           4251   L028012?:
1561           4252   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:731: else if (menu == 4) menu = 3; 
1561 BE04C0    4253            cjne    r6,#0x04,L028009?
1564 BF00C0    4254            cjne    r7,#0x00,L028009?
1567 90C100    4255            mov     dptr,#_main_menu_1_160
156A 7403      4256            mov     a,#0x03
156C F0        4257            movx    @dptr,a
156D E4        4258            clr     a
156E A3        4259            inc     dptr
156F F0        4260            movx    @dptr,a
1570 8000      4261            sjmp    L028022?
1572           4262   L028009?:
1572           4263   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:732: else if (menu == 5) menu = 4; 
1572 BE0500    4264            cjne    r6,#0x05,L028006?
1575 BF0000    4265            cjne    r7,#0x00,L028006?
1578 90C100    4266            mov     dptr,#_main_menu_1_160
157B 7404      4267            mov     a,#0x04
157D F0        4268            movx    @dptr,a
157E E4        4269            clr     a
157F A3        4270            inc     dptr
1580 F0        4271            movx    @dptr,a
1581 8000      4272            sjmp    L028022?
1583           4273   L028006?:
1583           4274   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:733: else if (menu == 6) menu = 5; 
1583 BE06C0    4275            cjne    r6,#0x06,L028022?
1586 BF00C0    4276            cjne    r7,#0x00,L028022?
1589 90C100    4277            mov     dptr,#_main_menu_1_160
158C 7405      4278            mov     a,#0x05
158E F0        4279            movx    @dptr,a
158F E4        4280            clr     a
1590 A3        4281            inc     dptr
1591 F0        4282            movx    @dptr,a
1592           4283   L028022?:
1592           4284   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:734: WriteCommand(0x01);
1592 758201    4285            mov     dpl,#0x01
1595 120000    4286            lcall   _WriteCommand
1598           4287   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:735: waitms(5);
1598 900005    4288            mov     dptr,#0x0005
159B 120000    4289            lcall   _waitms
159E           4290   L028024?:
159E           4291   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:738: if (ReadButtonDebounced(Buttonright)){
159E 758225    4292            mov     dpl,#0x25
15A1 120000    4293            lcall   _ReadButtonDebounced
15A4 5000      4294            jnc     L028043?
15A6           4295   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:739: if (menu == 0) menu = 1; 
15A6 90C100    4296            mov     dptr,#_main_menu_1_160
15A9 E0        4297            movx    a,@dptr
15AA FE        4298            mov     r6,a
15AB A3        4299            inc     dptr
15AC E0        4300            movx    a,@dptr
15AD FF        4301            mov     r7,a
15AE 4E        4302            orl     a,r6
15AF 7000      4303            jnz     L028040?
15B1 90C100    4304            mov     dptr,#_main_menu_1_160
15B4 7401      4305            mov     a,#0x01
15B6 F0        4306            movx    @dptr,a
15B7 E4        4307            clr     a
15B8 A3        4308            inc     dptr
15B9 F0        4309            movx    @dptr,a
15BA 8000      4310            sjmp    L028041?
15BC           4311   L028040?:
15BC           4312   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:740: else if (menu == 1) menu = 2; 
15BC BE0100    4313            cjne    r6,#0x01,L028037?
15BF BF0000    4314            cjne    r7,#0x00,L028037?
15C2 90C100    4315            mov     dptr,#_main_menu_1_160
15C5 7402      4316            mov     a,#0x02
15C7 F0        4317            movx    @dptr,a
15C8 E4        4318            clr     a
15C9 A3        4319            inc     dptr
15CA F0        4320            movx    @dptr,a
15CB 8000      4321            sjmp    L028041?
15CD           4322   L028037?:
15CD           4323   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:741: else if (menu == 2) menu = 3; 
15CD BE0240    4324            cjne    r6,#0x02,L028034?
15D0 BF0040    4325            cjne    r7,#0x00,L028034?
15D3 90C100    4326            mov     dptr,#_main_menu_1_160
15D6 7403      4327            mov     a,#0x03
15D8 F0        4328            movx    @dptr,a
15D9 E4        4329            clr     a
15DA A3        4330            inc     dptr
15DB F0        4331            movx    @dptr,a
15DC 8000      4332            sjmp    L028041?
15DE           4333   L028034?:
15DE           4334   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:742: else if (menu == 3) menu = 4; 
15DE BE0380    4335            cjne    r6,#0x03,L028031?
15E1 BF0080    4336            cjne    r7,#0x00,L028031?
15E4 90C100    4337            mov     dptr,#_main_menu_1_160
15E7 7404      4338            mov     a,#0x04
15E9 F0        4339            movx    @dptr,a
15EA E4        4340            clr     a
15EB A3        4341            inc     dptr
15EC F0        4342            movx    @dptr,a
15ED 8000      4343            sjmp    L028041?
15EF           4344   L028031?:
15EF           4345   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:743: else if (menu == 4) menu = 5;
15EF BE04C0    4346            cjne    r6,#0x04,L028028?
15F2 BF00C0    4347            cjne    r7,#0x00,L028028?
15F5 90C100    4348            mov     dptr,#_main_menu_1_160
15F8 7405      4349            mov     a,#0x05
15FA F0        4350            movx    @dptr,a
15FB E4        4351            clr     a
15FC A3        4352            inc     dptr
15FD F0        4353            movx    @dptr,a
15FE 8000      4354            sjmp    L028041?
1600           4355   L028028?:
1600           4356   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:744: else if (menu == 5) menu = 6; 
1600 BE05C0    4357            cjne    r6,#0x05,L028041?
1603 BF00C0    4358            cjne    r7,#0x00,L028041?
1606 90C100    4359            mov     dptr,#_main_menu_1_160
1609 7406      4360            mov     a,#0x06
160B F0        4361            movx    @dptr,a
160C E4        4362            clr     a
160D A3        4363            inc     dptr
160E F0        4364            movx    @dptr,a
160F           4365   L028041?:
160F           4366   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:745: WriteCommand(0x01);
160F 758201    4367            mov     dpl,#0x01
1612 120000    4368            lcall   _WriteCommand
1615           4369   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:746: waitms(5);
1615 900005    4370            mov     dptr,#0x0005
1618 120000    4371            lcall   _waitms
161B           4372   L028043?:
161B           4373   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:748: if (ReadButtonDebounced(Buttonsave)){
161B 758237    4374            mov     dpl,#0x37
161E 120000    4375            lcall   _ReadButtonDebounced
1621 4000      4376            jc      L028121?
1623 020000    4377            ljmp    L028057?
1626           4378   L028121?:
1626           4379   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:749: if (menu == 0){
1626 90C100    4380            mov     dptr,#_main_menu_1_160
1629 E0        4381            movx    a,@dptr
162A FE        4382            mov     r6,a
162B A3        4383            inc     dptr
162C E0        4384            movx    a,@dptr
162D FF        4385            mov     r7,a
162E 4E        4386            orl     a,r6
162F 6000      4387            jz      L028122?
1631 020000    4388            ljmp    L028054?
1634           4389   L028122?:
1634           4390   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:750: if (units){
1634 90C010    4391            mov     dptr,#_main_units_1_160
1637 E0        4392            movx    a,@dptr
1638 F530      4393            mov     _main_sloc3_1_0,a
163A A3        4394            inc     dptr
163B E0        4395            movx    a,@dptr
163C F531      4396            mov     (_main_sloc3_1_0 + 1),a
163E E530      4397            mov     a,_main_sloc3_1_0
1640 4531      4398            orl     a,(_main_sloc3_1_0 + 1)
1642 6000      4399            jz      L028045?
1644           4400   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:751: Saved_vref[mem] = vpeak[0];
1644 90C140    4401            mov     dptr,#_main_mem_1_160
1647 E0        4402            movx    a,@dptr
1648 F8        4403            mov     r0,a
1649 A3        4404            inc     dptr
164A E0        4405            movx    a,@dptr
164B 88B0      4406            mov     _main_sloc1_1_0,r0
164D C5B0      4407            xch     a,_main_sloc1_1_0
164F 25E0      4408            add     a,acc
1651 C5B0      4409            xch     a,_main_sloc1_1_0
1653 33        4410            rlc     a
1654 C5B0      4411            xch     a,_main_sloc1_1_0
1656 25E0      4412            add     a,acc
1658 C5B0      4413            xch     a,_main_sloc1_1_0
165A 33        4414            rlc     a
165B F5B1      4415            mov     (_main_sloc1_1_0 + 1),a
165D E5B0      4416            mov     a,_main_sloc1_1_0
165F 2490      4417            add     a,#_Saved_vref
1661 F570      4418            mov     _main_sloc0_1_0,a
1663 E5B1      4419            mov     a,(_main_sloc1_1_0 + 1)
1665 3419      4420            addc    a,#(_Saved_vref >> 8)
1667 F571      4421            mov     (_main_sloc0_1_0 + 1),a
1669 901A50    4422            mov     dptr,#_vpeak
166C E0        4423            movx    a,@dptr
166D F8        4424            mov     r0,a
166E A3        4425            inc     dptr
166F E0        4426            movx    a,@dptr
1670 F9        4427            mov     r1,a
1671 A3        4428            inc     dptr
1672 E0        4429            movx    a,@dptr
1673 FA        4430            mov     r2,a
1674 A3        4431            inc     dptr
1675 E0        4432            movx    a,@dptr
1676 FB        4433            mov     r3,a
1677 857082    4434            mov     dpl,_main_sloc0_1_0
167A 857183    4435            mov     dph,(_main_sloc0_1_0 + 1)
167D E8        4436            mov     a,r0
167E F0        4437            movx    @dptr,a
167F A3        4438            inc     dptr
1680 E9        4439            mov     a,r1
1681 F0        4440            movx    @dptr,a
1682 A3        4441            inc     dptr
1683 EA        4442            mov     a,r2
1684 F0        4443            movx    @dptr,a
1685 A3        4444            inc     dptr
1686 EB        4445            mov     a,r3
1687 F0        4446            movx    @dptr,a
1688           4447   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:752: Saved_vsig[mem] = vpeak[1];
1688 E5B0      4448            mov     a,_main_sloc1_1_0
168A 2450      4449            add     a,#_Saved_vsig
168C FA        4450            mov     r2,a
168D E5B1      4451            mov     a,(_main_sloc1_1_0 + 1)
168F 3419      4452            addc    a,#(_Saved_vsig >> 8)
1691 FB        4453            mov     r3,a
1692 901A54    4454            mov     dptr,#(_vpeak + 0x0004)
1695 E0        4455            movx    a,@dptr
1696 FC        4456            mov     r4,a
1697 A3        4457            inc     dptr
1698 E0        4458            movx    a,@dptr
1699 FD        4459            mov     r5,a
169A A3        4460            inc     dptr
169B E0        4461            movx    a,@dptr
169C F8        4462            mov     r0,a
169D A3        4463            inc     dptr
169E E0        4464            movx    a,@dptr
169F F9        4465            mov     r1,a
16A0 8A82      4466            mov     dpl,r2
16A2 8B83      4467            mov     dph,r3
16A4 EC        4468            mov     a,r4
16A5 F0        4469            movx    @dptr,a
16A6 A3        4470            inc     dptr
16A7 ED        4471            mov     a,r5
16A8 F0        4472            movx    @dptr,a
16A9 A3        4473            inc     dptr
16AA E8        4474            mov     a,r0
16AB F0        4475            movx    @dptr,a
16AC A3        4476            inc     dptr
16AD E9        4477            mov     a,r1
16AE F0        4478            movx    @dptr,a
16AF 020000    4479            ljmp    L028046?
16B2           4480   L028045?:
16B2           4481   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:755: Saved_vref[mem] = vpeak[0]/sqrtf(2);
16B2 90C140    4482            mov     dptr,#_main_mem_1_160
16B5 E0        4483            movx    a,@dptr
16B6 FA        4484            mov     r2,a
16B7 A3        4485            inc     dptr
16B8 E0        4486            movx    a,@dptr
16B9 CA        4487            xch     a,r2
16BA 25E0      4488            add     a,acc
16BC CA        4489            xch     a,r2
16BD 33        4490            rlc     a
16BE CA        4491            xch     a,r2
16BF 25E0      4492            add     a,acc
16C1 CA        4493            xch     a,r2
16C2 33        4494            rlc     a
16C3 FB        4495            mov     r3,a
16C4 EA        4496            mov     a,r2
16C5 2490      4497            add     a,#_Saved_vref
16C7 F5B0      4498            mov     _main_sloc1_1_0,a
16C9 EB        4499            mov     a,r3
16CA 3419      4500            addc    a,#(_Saved_vref >> 8)
16CC F5B1      4501            mov     (_main_sloc1_1_0 + 1),a
16CE 901A50    4502            mov     dptr,#_vpeak
16D1 E0        4503            movx    a,@dptr
16D2 F570      4504            mov     _main_sloc0_1_0,a
16D4 A3        4505            inc     dptr
16D5 E0        4506            movx    a,@dptr
16D6 F571      4507            mov     (_main_sloc0_1_0 + 1),a
16D8 A3        4508            inc     dptr
16D9 E0        4509            movx    a,@dptr
16DA F572      4510            mov     (_main_sloc0_1_0 + 2),a
16DC A3        4511            inc     dptr
16DD E0        4512            movx    a,@dptr
16DE F573      4513            mov     (_main_sloc0_1_0 + 3),a
16E0 900000    4514            mov     dptr,#(0x00&0x00ff)
16E3 E4        4515            clr     a
16E4 F5F0      4516            mov     b,a
16E6 7440      4517            mov     a,#0x40
16E8 C002      4518            push    ar2
16EA C003      4519            push    ar3
16EC 120000    4520            lcall   _sqrtf
16EF AC82      4521            mov     r4,dpl
16F1 AD83      4522            mov     r5,dph
16F3 A8F0      4523            mov     r0,b
16F5 F9        4524            mov     r1,a
16F6 C004      4525            push    ar4
16F8 C005      4526            push    ar5
16FA C000      4527            push    ar0
16FC C001      4528            push    ar1
16FE 857082    4529            mov     dpl,_main_sloc0_1_0
1701 857183    4530            mov     dph,(_main_sloc0_1_0 + 1)
1704 8572F0    4531            mov     b,(_main_sloc0_1_0 + 2)
1707 E573      4532            mov     a,(_main_sloc0_1_0 + 3)
1709 120000    4533            lcall   ___fsdiv
170C AC82      4534            mov     r4,dpl
170E AD83      4535            mov     r5,dph
1710 A8F0      4536            mov     r0,b
1712 F9        4537            mov     r1,a
1713 E581      4538            mov     a,sp
1715 24FC      4539            add     a,#0xfc
1717 F581      4540            mov     sp,a
1719 D003      4541            pop     ar3
171B D002      4542            pop     ar2
171D 85B082    4543            mov     dpl,_main_sloc1_1_0
1720 85B183    4544            mov     dph,(_main_sloc1_1_0 + 1)
1723 EC        4545            mov     a,r4
1724 F0        4546            movx    @dptr,a
1725 A3        4547            inc     dptr
1726 ED        4548            mov     a,r5
1727 F0        4549            movx    @dptr,a
1728 A3        4550            inc     dptr
1729 E8        4551            mov     a,r0
172A F0        4552            movx    @dptr,a
172B A3        4553            inc     dptr
172C E9        4554            mov     a,r1
172D F0        4555            movx    @dptr,a
172E           4556   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:756: Saved_vsig[mem] = vpeak[1]/sqrtf(2);
172E EA        4557            mov     a,r2
172F 2450      4558            add     a,#_Saved_vsig
1731 F5B0      4559            mov     _main_sloc1_1_0,a
1733 EB        4560            mov     a,r3
1734 3419      4561            addc    a,#(_Saved_vsig >> 8)
1736 F5B1      4562            mov     (_main_sloc1_1_0 + 1),a
1738 901A54    4563            mov     dptr,#(_vpeak + 0x0004)
173B E0        4564            movx    a,@dptr
173C F570      4565            mov     _main_sloc0_1_0,a
173E A3        4566            inc     dptr
173F E0        4567            movx    a,@dptr
1740 F571      4568            mov     (_main_sloc0_1_0 + 1),a
1742 A3        4569            inc     dptr
1743 E0        4570            movx    a,@dptr
1744 F572      4571            mov     (_main_sloc0_1_0 + 2),a
1746 A3        4572            inc     dptr
1747 E0        4573            movx    a,@dptr
1748 F573      4574            mov     (_main_sloc0_1_0 + 3),a
174A 900000    4575            mov     dptr,#(0x00&0x00ff)
174D E4        4576            clr     a
174E F5F0      4577            mov     b,a
1750 7440      4578            mov     a,#0x40
1752 120000    4579            lcall   _sqrtf
1755 AA82      4580            mov     r2,dpl
1757 AB83      4581            mov     r3,dph
1759 ACF0      4582            mov     r4,b
175B FD        4583            mov     r5,a
175C C002      4584            push    ar2
175E C003      4585            push    ar3
1760 C004      4586            push    ar4
1762 C005      4587            push    ar5
1764 857082    4588            mov     dpl,_main_sloc0_1_0
1767 857183    4589            mov     dph,(_main_sloc0_1_0 + 1)
176A 8572F0    4590            mov     b,(_main_sloc0_1_0 + 2)
176D E573      4591            mov     a,(_main_sloc0_1_0 + 3)
176F 120000    4592            lcall   ___fsdiv
1772 AA82      4593            mov     r2,dpl
1774 AB83      4594            mov     r3,dph
1776 ACF0      4595            mov     r4,b
1778 FD        4596            mov     r5,a
1779 E581      4597            mov     a,sp
177B 24FC      4598            add     a,#0xfc
177D F581      4599            mov     sp,a
177F 85B082    4600            mov     dpl,_main_sloc1_1_0
1782 85B183    4601            mov     dph,(_main_sloc1_1_0 + 1)
1785 EA        4602            mov     a,r2
1786 F0        4603            movx    @dptr,a
1787 A3        4604            inc     dptr
1788 EB        4605            mov     a,r3
1789 F0        4606            movx    @dptr,a
178A A3        4607            inc     dptr
178B EC        4608            mov     a,r4
178C F0        4609            movx    @dptr,a
178D A3        4610            inc     dptr
178E ED        4611            mov     a,r5
178F F0        4612            movx    @dptr,a
1790           4613   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:781: waitms(100);
1790           4614   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:756: Saved_vsig[mem] = vpeak[1]/sqrtf(2);
1790           4615   L028046?:
1790           4616   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:758: Saved_phase[mem] = phase_diff;
1790 90C140    4617            mov     dptr,#_main_mem_1_160
1793 E0        4618            movx    a,@dptr
1794 F5B0      4619            mov     _main_sloc1_1_0,a
1796 A3        4620            inc     dptr
1797 E0        4621            movx    a,@dptr
1798 F5B1      4622            mov     (_main_sloc1_1_0 + 1),a
179A ACB0      4623            mov     r4,_main_sloc1_1_0
179C CC        4624            xch     a,r4
179D 25E0      4625            add     a,acc
179F CC        4626            xch     a,r4
17A0 33        4627            rlc     a
17A1 CC        4628            xch     a,r4
17A2 25E0      4629            add     a,acc
17A4 CC        4630            xch     a,r4
17A5 33        4631            rlc     a
17A6 FD        4632            mov     r5,a
17A7 EC        4633            mov     a,r4
17A8 2410      4634            add     a,#_Saved_phase
17AA F570      4635            mov     _main_sloc0_1_0,a
17AC ED        4636            mov     a,r5
17AD 3419      4637            addc    a,#(_Saved_phase >> 8)
17AF F571      4638            mov     (_main_sloc0_1_0 + 1),a
17B1 901A10    4639            mov     dptr,#_phase_diff
17B4 E0        4640            movx    a,@dptr
17B5 FA        4641            mov     r2,a
17B6 A3        4642            inc     dptr
17B7 E0        4643            movx    a,@dptr
17B8 FB        4644            mov     r3,a
17B9 A3        4645            inc     dptr
17BA E0        4646            movx    a,@dptr
17BB F8        4647            mov     r0,a
17BC A3        4648            inc     dptr
17BD E0        4649            movx    a,@dptr
17BE F9        4650            mov     r1,a
17BF 857082    4651            mov     dpl,_main_sloc0_1_0
17C2 857183    4652            mov     dph,(_main_sloc0_1_0 + 1)
17C5 EA        4653            mov     a,r2
17C6 F0        4654            movx    @dptr,a
17C7 A3        4655            inc     dptr
17C8 EB        4656            mov     a,r3
17C9 F0        4657            movx    @dptr,a
17CA A3        4658            inc     dptr
17CB E8        4659            mov     a,r0
17CC F0        4660            movx    @dptr,a
17CD A3        4661            inc     dptr
17CE E9        4662            mov     a,r1
17CF F0        4663            movx    @dptr,a
17D0           4664   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:759: Saved_freq[mem] = frequency; 
17D0 EC        4665            mov     a,r4
17D1 24D0      4666            add     a,#_Saved_freq
17D3 F570      4667            mov     _main_sloc0_1_0,a
17D5 ED        4668            mov     a,r5
17D6 3418      4669            addc    a,#(_Saved_freq >> 8)
17D8 F571      4670            mov     (_main_sloc0_1_0 + 1),a
17DA 9019D0    4671            mov     dptr,#_frequency
17DD E0        4672            movx    a,@dptr
17DE F8        4673            mov     r0,a
17DF A3        4674            inc     dptr
17E0 E0        4675            movx    a,@dptr
17E1 F9        4676            mov     r1,a
17E2 A3        4677            inc     dptr
17E3 E0        4678            movx    a,@dptr
17E4 FA        4679            mov     r2,a
17E5 A3        4680            inc     dptr
17E6 E0        4681            movx    a,@dptr
17E7 FB        4682            mov     r3,a
17E8 857082    4683            mov     dpl,_main_sloc0_1_0
17EB 857183    4684            mov     dph,(_main_sloc0_1_0 + 1)
17EE E8        4685            mov     a,r0
17EF F0        4686            movx    @dptr,a
17F0 A3        4687            inc     dptr
17F1 E9        4688            mov     a,r1
17F2 F0        4689            movx    @dptr,a
17F3 A3        4690            inc     dptr
17F4 EA        4691            mov     a,r2
17F5 F0        4692            movx    @dptr,a
17F6 A3        4693            inc     dptr
17F7 EB        4694            mov     a,r3
17F8 F0        4695            movx    @dptr,a
17F9           4696   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:760: Saved_units[mem] = units; 
17F9 EC        4697            mov     a,r4
17FA 2490      4698            add     a,#_Saved_units
17FC FC        4699            mov     r4,a
17FD ED        4700            mov     a,r5
17FE 3418      4701            addc    a,#(_Saved_units >> 8)
1800 FD        4702            mov     r5,a
1801 853082    4703            mov     dpl,_main_sloc3_1_0
1804 853183    4704            mov     dph,(_main_sloc3_1_0 + 1)
1807 C004      4705            push    ar4
1809 C005      4706            push    ar5
180B 120000    4707            lcall   ___sint2fs
180E AA82      4708            mov     r2,dpl
1810 AB83      4709            mov     r3,dph
1812 A8F0      4710            mov     r0,b
1814 F9        4711            mov     r1,a
1815 D005      4712            pop     ar5
1817 D004      4713            pop     ar4
1819 8C82      4714            mov     dpl,r4
181B 8D83      4715            mov     dph,r5
181D EA        4716            mov     a,r2
181E F0        4717            movx    @dptr,a
181F A3        4718            inc     dptr
1820 EB        4719            mov     a,r3
1821 F0        4720            movx    @dptr,a
1822 A3        4721            inc     dptr
1823 E8        4722            mov     a,r0
1824 F0        4723            movx    @dptr,a
1825 A3        4724            inc     dptr
1826 E9        4725            mov     a,r1
1827 F0        4726            movx    @dptr,a
1828           4727   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:761: mem++; 
1828 90C140    4728            mov     dptr,#_main_mem_1_160
182B 7401      4729            mov     a,#0x01
182D 25B0      4730            add     a,_main_sloc1_1_0
182F F0        4731            movx    @dptr,a
1830 E4        4732            clr     a
1831 35B1      4733            addc    a,(_main_sloc1_1_0 + 1)
1833 A3        4734            inc     dptr
1834 F0        4735            movx    @dptr,a
1835 020000    4736            ljmp    L028057?
1838           4737   L028054?:
1838           4738   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:763: else if ((menu == 2) || (menu == 3) || (menu == 4) || (menu == 5) || (menu == 6)){
1838 BE0280    4739            cjne    r6,#0x02,L028124?
183B BF0080    4740            cjne    r7,#0x00,L028124?
183E 8000      4741            sjmp    L028047?
1840           4742   L028124?:
1840 BE0360    4743            cjne    r6,#0x03,L028125?
1843 BF0060    4744            cjne    r7,#0x00,L028125?
1846 8000      4745            sjmp    L028047?
1848           4746   L028125?:
1848 BE04A0    4747            cjne    r6,#0x04,L028126?
184B BF00A0    4748            cjne    r7,#0x00,L028126?
184E 8000      4749            sjmp    L028047?
1850           4750   L028126?:
1850 BE05E0    4751            cjne    r6,#0x05,L028127?
1853 BF00E0    4752            cjne    r7,#0x00,L028127?
1856 8000      4753            sjmp    L028047?
1858           4754   L028127?:
1858 BE0620    4755            cjne    r6,#0x06,L028128?
185B BF0020    4756            cjne    r7,#0x00,L028128?
185E 8000      4757            sjmp    L028129?
1860           4758   L028128?:
1860 020000    4759            ljmp    L028057?
1863           4760   L028129?:
1863           4761   L028047?:
1863           4762   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:764: Set_Pin_One(0x01);
1863 758201    4763            mov     dpl,#0x01
1866 120000    4764            lcall   _Set_Pin_One
1869           4765   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:765: for (i = 0; i < 5; i++){
1869 7A00      4766            mov     r2,#0x00
186B 7B00      4767            mov     r3,#0x00
186D           4768   L028061?:
186D C3        4769            clr     c
186E EA        4770            mov     a,r2
186F 9405      4771            subb    a,#0x05
1871 EB        4772            mov     a,r3
1872 6480      4773            xrl     a,#0x80
1874 9480      4774            subb    a,#0x80
1876 5000      4775            jnc     L028064?
1878           4776   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:766: Saved_vref[i] = 0.0; 
1878 8A04      4777            mov     ar4,r2
187A EB        4778            mov     a,r3
187B CC        4779            xch     a,r4
187C 25E0      4780            add     a,acc
187E CC        4781            xch     a,r4
187F 33        4782            rlc     a
1880 CC        4783            xch     a,r4
1881 25E0      4784            add     a,acc
1883 CC        4785            xch     a,r4
1884 33        4786            rlc     a
1885 FD        4787            mov     r5,a
1886 EC        4788            mov     a,r4
1887 2490      4789            add     a,#_Saved_vref
1889 F582      4790            mov     dpl,a
188B ED        4791            mov     a,r5
188C 3419      4792            addc    a,#(_Saved_vref >> 8)
188E F583      4793            mov     dph,a
1890 E4        4794            clr     a
1891 F0        4795            movx    @dptr,a
1892 A3        4796            inc     dptr
1893 F0        4797            movx    @dptr,a
1894 A3        4798            inc     dptr
1895 F0        4799            movx    @dptr,a
1896 A3        4800            inc     dptr
1897 F0        4801            movx    @dptr,a
1898           4802   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:767: Saved_vsig[i] = 0.0; 
1898 EC        4803            mov     a,r4
1899 2450      4804            add     a,#_Saved_vsig
189B F582      4805            mov     dpl,a
189D ED        4806            mov     a,r5
189E 3419      4807            addc    a,#(_Saved_vsig >> 8)
18A0 F583      4808            mov     dph,a
18A2 E4        4809            clr     a
18A3 F0        4810            movx    @dptr,a
18A4 A3        4811            inc     dptr
18A5 F0        4812            movx    @dptr,a
18A6 A3        4813            inc     dptr
18A7 F0        4814            movx    @dptr,a
18A8 A3        4815            inc     dptr
18A9 F0        4816            movx    @dptr,a
18AA           4817   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:768: Saved_phase[i] = 0.0; 
18AA EC        4818            mov     a,r4
18AB 2410      4819            add     a,#_Saved_phase
18AD F582      4820            mov     dpl,a
18AF ED        4821            mov     a,r5
18B0 3419      4822            addc    a,#(_Saved_phase >> 8)
18B2 F583      4823            mov     dph,a
18B4 E4        4824            clr     a
18B5 F0        4825            movx    @dptr,a
18B6 A3        4826            inc     dptr
18B7 F0        4827            movx    @dptr,a
18B8 A3        4828            inc     dptr
18B9 F0        4829            movx    @dptr,a
18BA A3        4830            inc     dptr
18BB F0        4831            movx    @dptr,a
18BC           4832   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:769: Saved_freq[i] = 0.0; 
18BC EC        4833            mov     a,r4
18BD 24D0      4834            add     a,#_Saved_freq
18BF F582      4835            mov     dpl,a
18C1 ED        4836            mov     a,r5
18C2 3418      4837            addc    a,#(_Saved_freq >> 8)
18C4 F583      4838            mov     dph,a
18C6 E4        4839            clr     a
18C7 F0        4840            movx    @dptr,a
18C8 A3        4841            inc     dptr
18C9 F0        4842            movx    @dptr,a
18CA A3        4843            inc     dptr
18CB F0        4844            movx    @dptr,a
18CC A3        4845            inc     dptr
18CD F0        4846            movx    @dptr,a
18CE           4847   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:770: Saved_units[i] = 0.0; 
18CE EC        4848            mov     a,r4
18CF 2490      4849            add     a,#_Saved_units
18D1 F582      4850            mov     dpl,a
18D3 ED        4851            mov     a,r5
18D4 3418      4852            addc    a,#(_Saved_units >> 8)
18D6 F583      4853            mov     dph,a
18D8 E4        4854            clr     a
18D9 F0        4855            movx    @dptr,a
18DA A3        4856            inc     dptr
18DB F0        4857            movx    @dptr,a
18DC A3        4858            inc     dptr
18DD F0        4859            movx    @dptr,a
18DE A3        4860            inc     dptr
18DF F0        4861            movx    @dptr,a
18E0           4862   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:765: for (i = 0; i < 5; i++){
18E0 0A        4863            inc     r2
18E1 BA00A0    4864            cjne    r2,#0x00,L028061?
18E4 0B        4865            inc     r3
18E5 8000      4866            sjmp    L028061?
18E7           4867   L028064?:
18E7           4868   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:772: mem = 0;
18E7 90C140    4869            mov     dptr,#_main_mem_1_160
18EA E4        4870            clr     a
18EB F0        4871            movx    @dptr,a
18EC A3        4872            inc     dptr
18ED F0        4873            movx    @dptr,a
18EE           4874   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:773: WriteCommand(0x01);
18EE 758201    4875            mov     dpl,#0x01
18F1 120000    4876            lcall   _WriteCommand
18F4           4877   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:774: waitms(5);
18F4 900005    4878            mov     dptr,#0x0005
18F7 120000    4879            lcall   _waitms
18FA           4880   L028057?:
18FA           4881   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:778: DisplayMenu(menu, units);
18FA 90C100    4882            mov     dptr,#_main_menu_1_160
18FD E0        4883            movx    a,@dptr
18FE FA        4884            mov     r2,a
18FF A3        4885            inc     dptr
1900 E0        4886            movx    a,@dptr
1901 FB        4887            mov     r3,a
1902 90C010    4888            mov     dptr,#_main_units_1_160
1905 E0        4889            movx    a,@dptr
1906 F530      4890            mov     _DisplayMenu_PARM_2,a
1908 A3        4891            inc     dptr
1909 E0        4892            movx    a,@dptr
190A F531      4893            mov     (_DisplayMenu_PARM_2 + 1),a
190C 8A82      4894            mov     dpl,r2
190E 8B83      4895            mov     dph,r3
1910 120000    4896            lcall   _DisplayMenu
1913           4897   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:780: printf("%f,%f,%f,%f,%f\r\n", period, period_arr[1], vpeak[0], vpeak[1], phase_diff);
1913 901A54    4898            mov     dptr,#(_vpeak + 0x0004)
1916 E0        4899            movx    a,@dptr
1917 FA        4900            mov     r2,a
1918 A3        4901            inc     dptr
1919 E0        4902            movx    a,@dptr
191A FB        4903            mov     r3,a
191B A3        4904            inc     dptr
191C E0        4905            movx    a,@dptr
191D FC        4906            mov     r4,a
191E A3        4907            inc     dptr
191F E0        4908            movx    a,@dptr
1920 FD        4909            mov     r5,a
1921 901A50    4910            mov     dptr,#_vpeak
1924 E0        4911            movx    a,@dptr
1925 F5B0      4912            mov     _main_sloc1_1_0,a
1927 A3        4913            inc     dptr
1928 E0        4914            movx    a,@dptr
1929 F5B1      4915            mov     (_main_sloc1_1_0 + 1),a
192B A3        4916            inc     dptr
192C E0        4917            movx    a,@dptr
192D F5B2      4918            mov     (_main_sloc1_1_0 + 2),a
192F A3        4919            inc     dptr
1930 E0        4920            movx    a,@dptr
1931 F5B3      4921            mov     (_main_sloc1_1_0 + 3),a
1933 90C064    4922            mov     dptr,#(_main_period_arr_1_160 + 0x0004)
1936 E0        4923            movx    a,@dptr
1937 FE        4924            mov     r6,a
1938 A3        4925            inc     dptr
1939 E0        4926            movx    a,@dptr
193A FF        4927            mov     r7,a
193B A3        4928            inc     dptr
193C E0        4929            movx    a,@dptr
193D F8        4930            mov     r0,a
193E A3        4931            inc     dptr
193F E0        4932            movx    a,@dptr
1940 F9        4933            mov     r1,a
1941 901A10    4934            mov     dptr,#_phase_diff
1944 E0        4935            movx    a,@dptr
1945 C0E0      4936            push    acc
1947 A3        4937            inc     dptr
1948 E0        4938            movx    a,@dptr
1949 C0E0      4939            push    acc
194B A3        4940            inc     dptr
194C E0        4941            movx    a,@dptr
194D C0E0      4942            push    acc
194F A3        4943            inc     dptr
1950 E0        4944            movx    a,@dptr
1951 C0E0      4945            push    acc
1953 C002      4946            push    ar2
1955 C003      4947            push    ar3
1957 C004      4948            push    ar4
1959 C005      4949            push    ar5
195B C0B0      4950            push    _main_sloc1_1_0
195D C0B1      4951            push    (_main_sloc1_1_0 + 1)
195F C0B2      4952            push    (_main_sloc1_1_0 + 2)
1961 C0B3      4953            push    (_main_sloc1_1_0 + 3)
1963 C006      4954            push    ar6
1965 C007      4955            push    ar7
1967 C000      4956            push    ar0
1969 C001      4957            push    ar1
196B C0F0      4958            push    _main_sloc2_1_0
196D C0F1      4959            push    (_main_sloc2_1_0 + 1)
196F C0F2      4960            push    (_main_sloc2_1_0 + 2)
1971 C0F3      4961            push    (_main_sloc2_1_0 + 3)
1973 7420      4962            mov     a,#__str_18
1975 C0E0      4963            push    acc
1977 7402      4964            mov     a,#(__str_18 >> 8)
1979 C0E0      4965            push    acc
197B 7480      4966            mov     a,#0x80
197D C0E0      4967            push    acc
197F 120000    4968            lcall   _printf
1982 E581      4969            mov     a,sp
1984 24E9      4970            add     a,#0xe9
1986 F581      4971            mov     sp,a
1988           4972   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:781: waitms(100);
1988 900064    4973            mov     dptr,#0x0064
198B 120000    4974            lcall   _waitms
198E 020000    4975            ljmp    L028059?
1991           4976            rseg R_CSEG
1991           4977   
0000           4978            rseg R_XINIT
0000           4979   
0000           4980            rseg R_CONST
0000           4981   __str_0:
0000 503A2053  4982            db 'P: S=%.2f R=%.2f'
     3D252E32
     6620523D
     252E3266
0010 00        4983            db 0x00
0011           4984   __str_1:
0011 523A2053  4985            db 'R: S=%.2f R=%.2f'
     3D252E32
     6620523D
     252E3266
0021 00        4986            db 0x00
0022           4987   __str_2:
0022 703D252E  4988            db 'p=%.1f f=%.2fkHz'
     31662066
     3D252E32
     666B487A
0032 00        4989            db 0x00
0033           4990   __str_3:
0033 50686173  4991            db 'Phasor'
     6F72
0039 00        4992            db 0x00
003A           4993   __str_4:
003A 3C202020  4994            db '<    Meter     >'
     204D6574
     65722020
     2020203E
004A 00        4995            db 0x00
004B           4996   __str_5:
004B 31        4997            db '1'
004C 00        4998            db 0x00
004D           4999   __str_6:
004D 50        5000            db 'P'
004E 00        5001            db 0x00
004F           5002   __str_7:
004F 52        5003            db 'R'
0050 00        5004            db 0x00
0051           5005   __str_8:
0051 533D252E  5006            db 'S=%.2f R=%.2f'
     32662052
     3D252E32
     66
005E 00        5007            db 0x00
005F           5008   __str_9:
005F 32        5009            db '2'
0060 00        5010            db 0x00
0061           5011   __str_10:
0061 33        5012            db '3'
0062 00        5013            db 0x00
0063           5014   __str_11:
0063 34        5015            db '4'
0064 00        5016            db 0x00
0065           5017   __str_12:
0065 35        5018            db '5'
0066 00        5019            db 0x00
0067           5020   __str_13:
0067 1B        5021            db 0x1B
0068 5B324A    5022            db '[2J'
006B 00        5023            db 0x00
006C           5024   __str_14:
006C 50686173  5025            db 'Phasor Meausrement'
     6F72204D
     65617573
     72656D65
     6E74
007E 0A        5026            db 0x0A
007F 54657374  5027            db 'Test signal: P1.5 and Reference signal: P'
     20736967
     6E616C3A
     2050312E
     3520616E
     64205265
     66657265
     6E636520
     7369676E
     616C3A20
     50
00A8 322E33    5028            db '2.3'
00AB 0A        5029            db 0x0A
00AC 46696C65  5030            db 'File: %s'
     3A202573
00B4 0A        5031            db 0x0A
00B5 436F6D70  5032            db 'Compiled: %s, %s'
     696C6564
     3A202573
     2C202573
00C5 0A        5033            db 0x0A
00C6 0A        5034            db 0x0A
00C7 00        5035            db 0x00
00C8           5036   __str_15:
00C8 433A      5037            db 'C:'
00CA 5C        5038            db 0x5C
00CB 55736572  5039            db 'Users'
     73
00D0 5C        5040            db 0x5C
00D1 776F6E67  5041            db 'wongh'
     68
00D6 5C        5042            db 0x5C
00D7 4F6E6544  5043            db 'OneDrive - UBC'
     72697665
     202D2055
     4243
00E5 5C        5044            db 0x5C
00E6 554243    5045            db 'UBC'
00E9 5C        5046            db 0x5C
00EA 59656172  5047            db 'Year 2'
     2032
00F0 5C        5048            db 0x5C
00F1 454C4543  5049            db 'ELEC 291'
     20323931
00F9 5C        5050            db 0x5C
00FA 454C4543  5051            db 'ELEC-291'
     2D323931
0102 5C        5052            db 0x5C
0103 4C        5053            db 'L'
0104 616235    5054            db 'ab5'
0107 5C        5055            db 0x5C
0108 4C616235  5056            db 'Lab5.c'
     2E63
010E 00        5057            db 0x00
010F           5058   __str_16:
010F 4D617220  5059            db 'Mar  6 2025'
     20362032
     303235
011A 00        5060            db 0x00
011B           5061   __str_17:
011B 30383A32  5062            db '08:22:08'
     323A3038
0123 00        5063            db 0x00
0124           5064   __str_18:
0124 25662C25  5065            db '%f,%f,%f,%f,%f'
     662C2566
     2C25662C
     2566
0132 0D        5066            db 0x0D
0133 0A        5067            db 0x0A
0134 00        5068            db 0x00
0135           5069   
0003           5070            CSEG
0003           5071   
0003           5072   end
