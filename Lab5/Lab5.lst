0000              1   ;--------------------------------------------------------
0000              2   ; File Created by C51
0000              3   ; Version 1.0.0 #1170 (Feb 16 2022) (MSVC)
0000              4   ; This file was generated Mon Mar 03 18:37:07 2025
0000              5   ;--------------------------------------------------------
                  5   $name Lab5
                  6   $optc51 --model-small
                  7   $printf_float
0000              9            R_DSEG    segment data
0000             10            R_CSEG    segment code
0000             11            R_BSEG    segment bit
0000             12            R_XSEG    segment xdata
0000             13            R_PSEG    segment xdata
0000             14            R_ISEG    segment idata
0000             15            R_OSEG    segment data overlay
0000             16            BIT_BANK  segment data overlay
0000             17            R_HOME    segment code
0000             18            R_GSINIT  segment code
0000             19            R_IXSEG   segment xdata
0000             20            R_CONST   segment code
0000             21            R_XINIT   segment code
0000             22            R_DINIT   segment code
0000             23   
0000             24   ;--------------------------------------------------------
0000             25   ; Public variables in this module
0000             26   ;--------------------------------------------------------
0000             27            public _InitPinADC_PARM_2
0000             28            public _main
0000             29            public _ReadDiff
0000             30            public _ReadPeak
0000             31            public _ReadPeriod
0000             32            public _Volts_at_Pin
0000             33            public _ADC_at_Pin
0000             34            public _InitPinADC
0000             35            public _InitADC
0000             36            public _ReadButtonDebounced
0000             37            public _Read_Pin
0000             38            public _LCDprint
0000             39            public _LCD_4BIT
0000             40            public _WriteCommand
0000             41            public _WriteData
0000             42            public _LCD_byte
0000             43            public _LCD_pulse
0000             44            public _TIMER0_Init
0000             45            public _waitms
0000             46            public _Timer3us
0000             47            public __c51_external_startup
0000             48            public _LCDprint_PARM_4
0000             49            public _ReadPeak_PARM_2
0000             50            public _LCDprint_PARM_3
0000             51            public _LCDprint_PARM_2
0000             52            public _overflow_count
0000             53   ;--------------------------------------------------------
0000             54   ; Special Function Registers
0000             55   ;--------------------------------------------------------
0000             56   _ACC            DATA 0xe0
0000             57   _ADC0ASAH       DATA 0xb6
0000             58   _ADC0ASAL       DATA 0xb5
0000             59   _ADC0ASCF       DATA 0xa1
0000             60   _ADC0ASCT       DATA 0xc7
0000             61   _ADC0CF0        DATA 0xbc
0000             62   _ADC0CF1        DATA 0xb9
0000             63   _ADC0CF2        DATA 0xdf
0000             64   _ADC0CN0        DATA 0xe8
0000             65   _ADC0CN1        DATA 0xb2
0000             66   _ADC0CN2        DATA 0xb3
0000             67   _ADC0GTH        DATA 0xc4
0000             68   _ADC0GTL        DATA 0xc3
0000             69   _ADC0H          DATA 0xbe
0000             70   _ADC0L          DATA 0xbd
0000             71   _ADC0LTH        DATA 0xc6
0000             72   _ADC0LTL        DATA 0xc5
0000             73   _ADC0MX         DATA 0xbb
0000             74   _B              DATA 0xf0
0000             75   _CKCON0         DATA 0x8e
0000             76   _CKCON1         DATA 0xa6
0000             77   _CLEN0          DATA 0xc6
0000             78   _CLIE0          DATA 0xc7
0000             79   _CLIF0          DATA 0xe8
0000             80   _CLKSEL         DATA 0xa9
0000             81   _CLOUT0         DATA 0xd1
0000             82   _CLU0CF         DATA 0xb1
0000             83   _CLU0FN         DATA 0xaf
0000             84   _CLU0MX         DATA 0x84
0000             85   _CLU1CF         DATA 0xb3
0000             86   _CLU1FN         DATA 0xb2
0000             87   _CLU1MX         DATA 0x85
0000             88   _CLU2CF         DATA 0xb6
0000             89   _CLU2FN         DATA 0xb5
0000             90   _CLU2MX         DATA 0x91
0000             91   _CLU3CF         DATA 0xbf
0000             92   _CLU3FN         DATA 0xbe
0000             93   _CLU3MX         DATA 0xae
0000             94   _CMP0CN0        DATA 0x9b
0000             95   _CMP0CN1        DATA 0x99
0000             96   _CMP0MD         DATA 0x9d
0000             97   _CMP0MX         DATA 0x9f
0000             98   _CMP1CN0        DATA 0xbf
0000             99   _CMP1CN1        DATA 0xac
0000            100   _CMP1MD         DATA 0xab
0000            101   _CMP1MX         DATA 0xaa
0000            102   _CRC0CN0        DATA 0xce
0000            103   _CRC0CN1        DATA 0x86
0000            104   _CRC0CNT        DATA 0xd3
0000            105   _CRC0DAT        DATA 0xcb
0000            106   _CRC0FLIP       DATA 0xcf
0000            107   _CRC0IN         DATA 0xca
0000            108   _CRC0ST         DATA 0xd2
0000            109   _DAC0CF0        DATA 0x91
0000            110   _DAC0CF1        DATA 0x92
0000            111   _DAC0H          DATA 0x85
0000            112   _DAC0L          DATA 0x84
0000            113   _DAC1CF0        DATA 0x93
0000            114   _DAC1CF1        DATA 0x94
0000            115   _DAC1H          DATA 0x8a
0000            116   _DAC1L          DATA 0x89
0000            117   _DAC2CF0        DATA 0x95
0000            118   _DAC2CF1        DATA 0x96
0000            119   _DAC2H          DATA 0x8c
0000            120   _DAC2L          DATA 0x8b
0000            121   _DAC3CF0        DATA 0x9a
0000            122   _DAC3CF1        DATA 0x9c
0000            123   _DAC3H          DATA 0x8e
0000            124   _DAC3L          DATA 0x8d
0000            125   _DACGCF0        DATA 0x88
0000            126   _DACGCF1        DATA 0x98
0000            127   _DACGCF2        DATA 0xa2
0000            128   _DERIVID        DATA 0xad
0000            129   _DEVICEID       DATA 0xb5
0000            130   _DPH            DATA 0x83
0000            131   _DPL            DATA 0x82
0000            132   _EIE1           DATA 0xe6
0000            133   _EIE2           DATA 0xf3
0000            134   _EIP1           DATA 0xbb
0000            135   _EIP1H          DATA 0xee
0000            136   _EIP2           DATA 0xed
0000            137   _EIP2H          DATA 0xf6
0000            138   _EMI0CN         DATA 0xe7
0000            139   _FLKEY          DATA 0xb7
0000            140   _HFO0CAL        DATA 0xc7
0000            141   _HFO1CAL        DATA 0xd6
0000            142   _HFOCN          DATA 0xef
0000            143   _I2C0ADM        DATA 0xff
0000            144   _I2C0CN0        DATA 0xba
0000            145   _I2C0DIN        DATA 0xbc
0000            146   _I2C0DOUT       DATA 0xbb
0000            147   _I2C0FCN0       DATA 0xad
0000            148   _I2C0FCN1       DATA 0xab
0000            149   _I2C0FCT        DATA 0xf5
0000            150   _I2C0SLAD       DATA 0xbd
0000            151   _I2C0STAT       DATA 0xb9
0000            152   _IE             DATA 0xa8
0000            153   _IP             DATA 0xb8
0000            154   _IPH            DATA 0xf2
0000            155   _IT01CF         DATA 0xe4
0000            156   _LFO0CN         DATA 0xb1
0000            157   _P0             DATA 0x80
0000            158   _P0MASK         DATA 0xfe
0000            159   _P0MAT          DATA 0xfd
0000            160   _P0MDIN         DATA 0xf1
0000            161   _P0MDOUT        DATA 0xa4
0000            162   _P0SKIP         DATA 0xd4
0000            163   _P1             DATA 0x90
0000            164   _P1MASK         DATA 0xee
0000            165   _P1MAT          DATA 0xed
0000            166   _P1MDIN         DATA 0xf2
0000            167   _P1MDOUT        DATA 0xa5
0000            168   _P1SKIP         DATA 0xd5
0000            169   _P2             DATA 0xa0
0000            170   _P2MASK         DATA 0xfc
0000            171   _P2MAT          DATA 0xfb
0000            172   _P2MDIN         DATA 0xf3
0000            173   _P2MDOUT        DATA 0xa6
0000            174   _P2SKIP         DATA 0xcc
0000            175   _P3             DATA 0xb0
0000            176   _P3MDIN         DATA 0xf4
0000            177   _P3MDOUT        DATA 0x9c
0000            178   _PCA0CENT       DATA 0x9e
0000            179   _PCA0CLR        DATA 0x9c
0000            180   _PCA0CN0        DATA 0xd8
0000            181   _PCA0CPH0       DATA 0xfc
0000            182   _PCA0CPH1       DATA 0xea
0000            183   _PCA0CPH2       DATA 0xec
0000            184   _PCA0CPH3       DATA 0xf5
0000            185   _PCA0CPH4       DATA 0x85
0000            186   _PCA0CPH5       DATA 0xde
0000            187   _PCA0CPL0       DATA 0xfb
0000            188   _PCA0CPL1       DATA 0xe9
0000            189   _PCA0CPL2       DATA 0xeb
0000            190   _PCA0CPL3       DATA 0xf4
0000            191   _PCA0CPL4       DATA 0x84
0000            192   _PCA0CPL5       DATA 0xdd
0000            193   _PCA0CPM0       DATA 0xda
0000            194   _PCA0CPM1       DATA 0xdb
0000            195   _PCA0CPM2       DATA 0xdc
0000            196   _PCA0CPM3       DATA 0xae
0000            197   _PCA0CPM4       DATA 0xaf
0000            198   _PCA0CPM5       DATA 0xcc
0000            199   _PCA0H          DATA 0xfa
0000            200   _PCA0L          DATA 0xf9
0000            201   _PCA0MD         DATA 0xd9
0000            202   _PCA0POL        DATA 0x96
0000            203   _PCA0PWM        DATA 0xf7
0000            204   _PCON0          DATA 0x87
0000            205   _PCON1          DATA 0xcd
0000            206   _PFE0CN         DATA 0xc1
0000            207   _PRTDRV         DATA 0xf6
0000            208   _PSCTL          DATA 0x8f
0000            209   _PSTAT0         DATA 0xaa
0000            210   _PSW            DATA 0xd0
0000            211   _REF0CN         DATA 0xd1
0000            212   _REG0CN         DATA 0xc9
0000            213   _REVID          DATA 0xb6
0000            214   _RSTSRC         DATA 0xef
0000            215   _SBCON1         DATA 0x94
0000            216   _SBRLH1         DATA 0x96
0000            217   _SBRLL1         DATA 0x95
0000            218   _SBUF           DATA 0x99
0000            219   _SBUF0          DATA 0x99
0000            220   _SBUF1          DATA 0x92
0000            221   _SCON           DATA 0x98
0000            222   _SCON0          DATA 0x98
0000            223   _SCON1          DATA 0xc8
0000            224   _SFRPAGE        DATA 0xa7
0000            225   _SFRPGCN        DATA 0xbc
0000            226   _SFRSTACK       DATA 0xd7
0000            227   _SMB0ADM        DATA 0xd6
0000            228   _SMB0ADR        DATA 0xd7
0000            229   _SMB0CF         DATA 0xc1
0000            230   _SMB0CN0        DATA 0xc0
0000            231   _SMB0DAT        DATA 0xc2
0000            232   _SMB0FCN0       DATA 0xc3
0000            233   _SMB0FCN1       DATA 0xc4
0000            234   _SMB0FCT        DATA 0xef
0000            235   _SMB0RXLN       DATA 0xc5
0000            236   _SMB0TC         DATA 0xac
0000            237   _SMOD1          DATA 0x93
0000            238   _SP             DATA 0x81
0000            239   _SPI0CFG        DATA 0xa1
0000            240   _SPI0CKR        DATA 0xa2
0000            241   _SPI0CN0        DATA 0xf8
0000            242   _SPI0DAT        DATA 0xa3
0000            243   _SPI0FCN0       DATA 0x9a
0000            244   _SPI0FCN1       DATA 0x9b
0000            245   _SPI0FCT        DATA 0xf7
0000            246   _SPI0PCF        DATA 0xdf
0000            247   _TCON           DATA 0x88
0000            248   _TH0            DATA 0x8c
0000            249   _TH1            DATA 0x8d
0000            250   _TL0            DATA 0x8a
0000            251   _TL1            DATA 0x8b
0000            252   _TMOD           DATA 0x89
0000            253   _TMR2CN0        DATA 0xc8
0000            254   _TMR2CN1        DATA 0xfd
0000            255   _TMR2H          DATA 0xcf
0000            256   _TMR2L          DATA 0xce
0000            257   _TMR2RLH        DATA 0xcb
0000            258   _TMR2RLL        DATA 0xca
0000            259   _TMR3CN0        DATA 0x91
0000            260   _TMR3CN1        DATA 0xfe
0000            261   _TMR3H          DATA 0x95
0000            262   _TMR3L          DATA 0x94
0000            263   _TMR3RLH        DATA 0x93
0000            264   _TMR3RLL        DATA 0x92
0000            265   _TMR4CN0        DATA 0x98
0000            266   _TMR4CN1        DATA 0xff
0000            267   _TMR4H          DATA 0xa5
0000            268   _TMR4L          DATA 0xa4
0000            269   _TMR4RLH        DATA 0xa3
0000            270   _TMR4RLL        DATA 0xa2
0000            271   _TMR5CN0        DATA 0xc0
0000            272   _TMR5CN1        DATA 0xf1
0000            273   _TMR5H          DATA 0xd5
0000            274   _TMR5L          DATA 0xd4
0000            275   _TMR5RLH        DATA 0xd3
0000            276   _TMR5RLL        DATA 0xd2
0000            277   _UART0PCF       DATA 0xd9
0000            278   _UART1FCN0      DATA 0x9d
0000            279   _UART1FCN1      DATA 0xd8
0000            280   _UART1FCT       DATA 0xfa
0000            281   _UART1LIN       DATA 0x9e
0000            282   _UART1PCF       DATA 0xda
0000            283   _VDM0CN         DATA 0xff
0000            284   _WDTCN          DATA 0x97
0000            285   _XBR0           DATA 0xe1
0000            286   _XBR1           DATA 0xe2
0000            287   _XBR2           DATA 0xe3
0000            288   _XOSC0CN        DATA 0x86
0000            289   _DPTR           DATA 0x8382
0000            290   _TMR2RL         DATA 0xcbca
0000            291   _TMR3RL         DATA 0x9392
0000            292   _TMR4RL         DATA 0xa3a2
0000            293   _TMR5RL         DATA 0xd3d2
0000            294   _TMR0           DATA 0x8c8a
0000            295   _TMR1           DATA 0x8d8b
0000            296   _TMR2           DATA 0xcfce
0000            297   _TMR3           DATA 0x9594
0000            298   _TMR4           DATA 0xa5a4
0000            299   _TMR5           DATA 0xd5d4
0000            300   _SBRL1          DATA 0x9695
0000            301   _PCA0           DATA 0xfaf9
0000            302   _PCA0CP0        DATA 0xfcfb
0000            303   _PCA0CP1        DATA 0xeae9
0000            304   _PCA0CP2        DATA 0xeceb
0000            305   _PCA0CP3        DATA 0xf5f4
0000            306   _PCA0CP4        DATA 0x8584
0000            307   _PCA0CP5        DATA 0xdedd
0000            308   _ADC0ASA        DATA 0xb6b5
0000            309   _ADC0GT         DATA 0xc4c3
0000            310   _ADC0           DATA 0xbebd
0000            311   _ADC0LT         DATA 0xc6c5
0000            312   _DAC0           DATA 0x8584
0000            313   _DAC1           DATA 0x8a89
0000            314   _DAC2           DATA 0x8c8b
0000            315   _DAC3           DATA 0x8e8d
0000            316   ;--------------------------------------------------------
0000            317   ; special function bits
0000            318   ;--------------------------------------------------------
0000            319   _ACC_0          BIT 0xe0
0000            320   _ACC_1          BIT 0xe1
0000            321   _ACC_2          BIT 0xe2
0000            322   _ACC_3          BIT 0xe3
0000            323   _ACC_4          BIT 0xe4
0000            324   _ACC_5          BIT 0xe5
0000            325   _ACC_6          BIT 0xe6
0000            326   _ACC_7          BIT 0xe7
0000            327   _TEMPE          BIT 0xe8
0000            328   _ADGN0          BIT 0xe9
0000            329   _ADGN1          BIT 0xea
0000            330   _ADWINT         BIT 0xeb
0000            331   _ADBUSY         BIT 0xec
0000            332   _ADINT          BIT 0xed
0000            333   _IPOEN          BIT 0xee
0000            334   _ADEN           BIT 0xef
0000            335   _B_0            BIT 0xf0
0000            336   _B_1            BIT 0xf1
0000            337   _B_2            BIT 0xf2
0000            338   _B_3            BIT 0xf3
0000            339   _B_4            BIT 0xf4
0000            340   _B_5            BIT 0xf5
0000            341   _B_6            BIT 0xf6
0000            342   _B_7            BIT 0xf7
0000            343   _C0FIF          BIT 0xe8
0000            344   _C0RIF          BIT 0xe9
0000            345   _C1FIF          BIT 0xea
0000            346   _C1RIF          BIT 0xeb
0000            347   _C2FIF          BIT 0xec
0000            348   _C2RIF          BIT 0xed
0000            349   _C3FIF          BIT 0xee
0000            350   _C3RIF          BIT 0xef
0000            351   _D1SRC0         BIT 0x88
0000            352   _D1SRC1         BIT 0x89
0000            353   _D1AMEN         BIT 0x8a
0000            354   _D01REFSL       BIT 0x8b
0000            355   _D3SRC0         BIT 0x8c
0000            356   _D3SRC1         BIT 0x8d
0000            357   _D3AMEN         BIT 0x8e
0000            358   _D23REFSL       BIT 0x8f
0000            359   _D0UDIS         BIT 0x98
0000            360   _D1UDIS         BIT 0x99
0000            361   _D2UDIS         BIT 0x9a
0000            362   _D3UDIS         BIT 0x9b
0000            363   _EX0            BIT 0xa8
0000            364   _ET0            BIT 0xa9
0000            365   _EX1            BIT 0xaa
0000            366   _ET1            BIT 0xab
0000            367   _ES0            BIT 0xac
0000            368   _ET2            BIT 0xad
0000            369   _ESPI0          BIT 0xae
0000            370   _EA             BIT 0xaf
0000            371   _PX0            BIT 0xb8
0000            372   _PT0            BIT 0xb9
0000            373   _PX1            BIT 0xba
0000            374   _PT1            BIT 0xbb
0000            375   _PS0            BIT 0xbc
0000            376   _PT2            BIT 0xbd
0000            377   _PSPI0          BIT 0xbe
0000            378   _P0_0           BIT 0x80
0000            379   _P0_1           BIT 0x81
0000            380   _P0_2           BIT 0x82
0000            381   _P0_3           BIT 0x83
0000            382   _P0_4           BIT 0x84
0000            383   _P0_5           BIT 0x85
0000            384   _P0_6           BIT 0x86
0000            385   _P0_7           BIT 0x87
0000            386   _P1_0           BIT 0x90
0000            387   _P1_1           BIT 0x91
0000            388   _P1_2           BIT 0x92
0000            389   _P1_3           BIT 0x93
0000            390   _P1_4           BIT 0x94
0000            391   _P1_5           BIT 0x95
0000            392   _P1_6           BIT 0x96
0000            393   _P1_7           BIT 0x97
0000            394   _P2_0           BIT 0xa0
0000            395   _P2_1           BIT 0xa1
0000            396   _P2_2           BIT 0xa2
0000            397   _P2_3           BIT 0xa3
0000            398   _P2_4           BIT 0xa4
0000            399   _P2_5           BIT 0xa5
0000            400   _P2_6           BIT 0xa6
0000            401   _P3_0           BIT 0xb0
0000            402   _P3_1           BIT 0xb1
0000            403   _P3_2           BIT 0xb2
0000            404   _P3_3           BIT 0xb3
0000            405   _P3_4           BIT 0xb4
0000            406   _P3_7           BIT 0xb7
0000            407   _CCF0           BIT 0xd8
0000            408   _CCF1           BIT 0xd9
0000            409   _CCF2           BIT 0xda
0000            410   _CCF3           BIT 0xdb
0000            411   _CCF4           BIT 0xdc
0000            412   _CCF5           BIT 0xdd
0000            413   _CR             BIT 0xde
0000            414   _CF             BIT 0xdf
0000            415   _PARITY         BIT 0xd0
0000            416   _F1             BIT 0xd1
0000            417   _OV             BIT 0xd2
0000            418   _RS0            BIT 0xd3
0000            419   _RS1            BIT 0xd4
0000            420   _F0             BIT 0xd5
0000            421   _AC             BIT 0xd6
0000            422   _CY             BIT 0xd7
0000            423   _RI             BIT 0x98
0000            424   _TI             BIT 0x99
0000            425   _RB8            BIT 0x9a
0000            426   _TB8            BIT 0x9b
0000            427   _REN            BIT 0x9c
0000            428   _CE             BIT 0x9d
0000            429   _SMODE          BIT 0x9e
0000            430   _RI1            BIT 0xc8
0000            431   _TI1            BIT 0xc9
0000            432   _RBX1           BIT 0xca
0000            433   _TBX1           BIT 0xcb
0000            434   _REN1           BIT 0xcc
0000            435   _PERR1          BIT 0xcd
0000            436   _OVR1           BIT 0xce
0000            437   _SI             BIT 0xc0
0000            438   _ACK            BIT 0xc1
0000            439   _ARBLOST        BIT 0xc2
0000            440   _ACKRQ          BIT 0xc3
0000            441   _STO            BIT 0xc4
0000            442   _STA            BIT 0xc5
0000            443   _TXMODE         BIT 0xc6
0000            444   _MASTER         BIT 0xc7
0000            445   _SPIEN          BIT 0xf8
0000            446   _TXNF           BIT 0xf9
0000            447   _NSSMD0         BIT 0xfa
0000            448   _NSSMD1         BIT 0xfb
0000            449   _RXOVRN         BIT 0xfc
0000            450   _MODF           BIT 0xfd
0000            451   _WCOL           BIT 0xfe
0000            452   _SPIF           BIT 0xff
0000            453   _IT0            BIT 0x88
0000            454   _IE0            BIT 0x89
0000            455   _IT1            BIT 0x8a
0000            456   _IE1            BIT 0x8b
0000            457   _TR0            BIT 0x8c
0000            458   _TF0            BIT 0x8d
0000            459   _TR1            BIT 0x8e
0000            460   _TF1            BIT 0x8f
0000            461   _T2XCLK0        BIT 0xc8
0000            462   _T2XCLK1        BIT 0xc9
0000            463   _TR2            BIT 0xca
0000            464   _T2SPLIT        BIT 0xcb
0000            465   _TF2CEN         BIT 0xcc
0000            466   _TF2LEN         BIT 0xcd
0000            467   _TF2L           BIT 0xce
0000            468   _TF2H           BIT 0xcf
0000            469   _T4XCLK0        BIT 0x98
0000            470   _T4XCLK1        BIT 0x99
0000            471   _TR4            BIT 0x9a
0000            472   _T4SPLIT        BIT 0x9b
0000            473   _TF4CEN         BIT 0x9c
0000            474   _TF4LEN         BIT 0x9d
0000            475   _TF4L           BIT 0x9e
0000            476   _TF4H           BIT 0x9f
0000            477   _T5XCLK0        BIT 0xc0
0000            478   _T5XCLK1        BIT 0xc1
0000            479   _TR5            BIT 0xc2
0000            480   _T5SPLIT        BIT 0xc3
0000            481   _TF5CEN         BIT 0xc4
0000            482   _TF5LEN         BIT 0xc5
0000            483   _TF5L           BIT 0xc6
0000            484   _TF5H           BIT 0xc7
0000            485   _RIE            BIT 0xd8
0000            486   _RXTO0          BIT 0xd9
0000            487   _RXTO1          BIT 0xda
0000            488   _RFRQ           BIT 0xdb
0000            489   _TIE            BIT 0xdc
0000            490   _TXHOLD         BIT 0xdd
0000            491   _TXNF1          BIT 0xde
0000            492   _TFRQ           BIT 0xdf
0000            493   ;--------------------------------------------------------
0000            494   ; overlayable register banks
0000            495   ;--------------------------------------------------------
0000            496            rbank0 segment data overlay
0000            497   ;--------------------------------------------------------
0000            498   ; internal ram data
0000            499   ;--------------------------------------------------------
0000            500            rseg R_DSEG
0000            501   _overflow_count:
0000            502            ds 1
0001            503   _LCDprint_PARM_2:
0001            504            ds 1
0002            505   _LCDprint_PARM_3:
0002            506            ds 1
0003            507   _ReadPeak_PARM_2:
0003            508            ds 3
0006            509   _ReadPeak_sloc0_1_0:
0006            510            ds 2
0008            511   _main_vpeak_1_119:
0008            512            ds 8
0010            513   _main_v_rms_1_119:
0010            514            ds 8
0018            515   _main_period_1_119:
0018            516            ds 4
001C            517   _main_time_diff_1_119:
001C            518            ds 4
0020            519   _main_phase_diff_1_119:
0020            520            ds 4
0024            521   _main_sloc0_1_0:
0024            522            ds 4
0028            523   ;--------------------------------------------------------
0028            524   ; overlayable items in internal ram 
0028            525   ;--------------------------------------------------------
0000            526            rseg    R_OSEG
0000            527            rseg    R_OSEG
0000            528            rseg    R_OSEG
0000            529   _InitPinADC_PARM_2:
0000            530            ds 1
0001            531            rseg    R_OSEG
0001            532   ;--------------------------------------------------------
0001            533   ; indirectly addressable internal ram data
0001            534   ;--------------------------------------------------------
0000            535            rseg R_ISEG
0000            536   ;--------------------------------------------------------
0000            537   ; absolute internal ram data
0000            538   ;--------------------------------------------------------
0000            539            DSEG
0000            540   ;--------------------------------------------------------
0000            541   ; bit data
0000            542   ;--------------------------------------------------------
0000            543            rseg R_BSEG
0000            544   _LCDprint_PARM_4:
0000            545            DBIT    1
0001            546   ;--------------------------------------------------------
0001            547   ; paged external ram data
0001            548   ;--------------------------------------------------------
0000            549            rseg R_PSEG
0000            550   ;--------------------------------------------------------
0000            551   ; external ram data
0000            552   ;--------------------------------------------------------
0000            553            rseg R_XSEG
0000            554   ;--------------------------------------------------------
0000            555   ; absolute external ram data
0000            556   ;--------------------------------------------------------
0000            557            XSEG
0000            558   ;--------------------------------------------------------
0000            559   ; external initialized ram data
0000            560   ;--------------------------------------------------------
0000            561            rseg R_IXSEG
0000            562            rseg R_HOME
0000            563            rseg R_GSINIT
0000            564            rseg R_CSEG
0000            565   ;--------------------------------------------------------
0000            566   ; Reset entry point and interrupt vectors
0000            567   ;--------------------------------------------------------
0000            568            CSEG at 0x0000
0000 020000     569            ljmp    _crt0
0003            570   ;--------------------------------------------------------
0003            571   ; global & static initialisations
0003            572   ;--------------------------------------------------------
0000            573            rseg R_HOME
0000            574            rseg R_GSINIT
0000            575            rseg R_GSINIT
0000            576   ;--------------------------------------------------------
0000            577   ; data variables initialization
0000            578   ;--------------------------------------------------------
0000            579            rseg R_DINIT
0000            580            ; The linker places a 'ret' at the end of segment R_DINIT.
0000            581   ;--------------------------------------------------------
0000            582   ; code
0000            583   ;--------------------------------------------------------
0000            584            rseg R_CSEG
0000            585   ;------------------------------------------------------------
0000            586   ;Allocation info for local variables in function '_c51_external_startup'
0000            587   ;------------------------------------------------------------
0000            588   ;------------------------------------------------------------
0000            589   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:39: char _c51_external_startup (void)
0000            590   ;        -----------------------------------------
0000            591   ;         function _c51_external_startup
0000            592   ;        -----------------------------------------
0000            593   __c51_external_startup:
0000            594            using   0
0000            595   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:42: SFRPAGE = 0x00;
0000 75A700     596            mov     _SFRPAGE,#0x00
0003            597   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:43: WDTCN = 0xDE; //First key
0003 7597DE     598            mov     _WDTCN,#0xDE
0006            599   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:44: WDTCN = 0xAD; //Second key
0006 7597AD     600            mov     _WDTCN,#0xAD
0009            601   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:46: VDM0CN=0x80;       // enable VDD monitor
0009 75FF80     602            mov     _VDM0CN,#0x80
000C            603   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:47: RSTSRC=0x02|0x04;  // Enable reset on missing clock detector and VDD
000C 75EF06     604            mov     _RSTSRC,#0x06
000F            605   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:54: SFRPAGE = 0x10;
000F 75A710     606            mov     _SFRPAGE,#0x10
0012            607   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:55: PFE0CN  = 0x20; // SYSCLK < 75 MHz.
0012 75C120     608            mov     _PFE0CN,#0x20
0015            609   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:56: SFRPAGE = 0x00;
0015 75A700     610            mov     _SFRPAGE,#0x00
0018            611   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:77: CLKSEL = 0x00;
0018 75A900     612            mov     _CLKSEL,#0x00
001B            613   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:78: CLKSEL = 0x00;
001B 75A900     614            mov     _CLKSEL,#0x00
001E            615   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:79: while ((CLKSEL & 0x80) == 0);
001E            616   L002001?:
001E E5A9       617            mov     a,_CLKSEL
0020 30E770     618            jnb     acc.7,L002001?
0023            619   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:80: CLKSEL = 0x03;
0023 75A903     620            mov     _CLKSEL,#0x03
0026            621   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:81: CLKSEL = 0x03;
0026 75A903     622            mov     _CLKSEL,#0x03
0029            623   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:82: while ((CLKSEL & 0x80) == 0);
0029            624   L002004?:
0029 E5A9       625            mov     a,_CLKSEL
002B 30E7F0     626            jnb     acc.7,L002004?
002E            627   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:87: P0MDOUT |= 0x10; // Enable UART0 TX as push-pull output
002E 43A410     628            orl     _P0MDOUT,#0x10
0031            629   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:88: XBR0     = 0x01; // Enable UART0 on P0.4(TX) and P0.5(RX)                     
0031 75E101     630            mov     _XBR0,#0x01
0034            631   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:89: XBR1     = 0X00;
0034 75E200     632            mov     _XBR1,#0x00
0037            633   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:90: XBR2     = 0x40; // Enable crossbar and weak pull-ups
0037 75E340     634            mov     _XBR2,#0x40
003A            635   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:96: SCON0 = 0x10;
003A 759810     636            mov     _SCON0,#0x10
003D            637   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:97: TH1 = 0x100-((SYSCLK/BAUDRATE)/(2L*12L));
003D 758DE6     638            mov     _TH1,#0xE6
0040            639   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:98: TL1 = TH1;      // Init Timer1
0040 858D8B     640            mov     _TL1,_TH1
0043            641   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:99: TMOD &= ~0xf0;  // TMOD: timer 1 in 8-bit auto-reload
0043 53890F     642            anl     _TMOD,#0x0F
0046            643   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:100: TMOD |=  0x20;                       
0046 438920     644            orl     _TMOD,#0x20
0049            645   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:101: TR1 = 1; // START Timer1
0049 D28E       646            setb    _TR1
004B            647   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:102: TI = 1;  // Indicate TX0 ready
004B D299       648            setb    _TI
004D            649   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:104: return 0;
004D 758200     650            mov     dpl,#0x00
0050 22         651            ret
0051            652   ;------------------------------------------------------------
0051            653   ;Allocation info for local variables in function 'Timer3us'
0051            654   ;------------------------------------------------------------
0051            655   ;us                        Allocated to registers r2 
0051            656   ;i                         Allocated to registers r3 
0051            657   ;------------------------------------------------------------
0051            658   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:108: void Timer3us(unsigned char us)
0051            659   ;        -----------------------------------------
0051            660   ;         function Timer3us
0051            661   ;        -----------------------------------------
0051            662   _Timer3us:
0051 AA82       663            mov     r2,dpl
0053            664   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:113: CKCON0|=0b_0100_0000;
0053 438E40     665            orl     _CKCON0,#0x40
0056            666   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:115: TMR3RL = (-(SYSCLK)/1000000L); // Set Timer3 to overflow in 1us.
0056 7592B8     667            mov     _TMR3RL,#0xB8
0059 7593FF     668            mov     (_TMR3RL >> 8),#0xFF
005C            669   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:116: TMR3 = TMR3RL;                 // Initialize Timer3 for first overflow
005C 859294     670            mov     _TMR3,_TMR3RL
005F 859395     671            mov     (_TMR3 >> 8),(_TMR3RL >> 8)
0062            672   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:118: TMR3CN0 = 0x04;                 // Sart Timer3 and clear overflow flag
0062 759104     673            mov     _TMR3CN0,#0x04
0065            674   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:119: for (i = 0; i < us; i++)       // Count <us> overflows
0065 7B00       675            mov     r3,#0x00
0067            676   L003004?:
0067 C3         677            clr     c
0068 EB         678            mov     a,r3
0069 9A         679            subb    a,r2
006A 5000       680            jnc     L003007?
006C            681   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:121: while (!(TMR3CN0 & 0x80));  // Wait for overflow
006C            682   L003001?:
006C E591       683            mov     a,_TMR3CN0
006E 30E7F0     684            jnb     acc.7,L003001?
0071            685   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:122: TMR3CN0 &= ~(0x80);         // Clear overflow indicator
0071 53917F     686            anl     _TMR3CN0,#0x7F
0074            687   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:119: for (i = 0; i < us; i++)       // Count <us> overflows
0074 0B         688            inc     r3
0075 8000       689            sjmp    L003004?
0077            690   L003007?:
0077            691   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:124: TMR3CN0 = 0 ;                   // Stop Timer3 and clear overflow flag
0077 759100     692            mov     _TMR3CN0,#0x00
007A 22         693            ret
007B            694   ;------------------------------------------------------------
007B            695   ;Allocation info for local variables in function 'waitms'
007B            696   ;------------------------------------------------------------
007B            697   ;ms                        Allocated to registers r2 r3 
007B            698   ;j                         Allocated to registers r4 r5 
007B            699   ;k                         Allocated to registers r6 
007B            700   ;------------------------------------------------------------
007B            701   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:127: void waitms (unsigned int ms)
007B            702   ;        -----------------------------------------
007B            703   ;         function waitms
007B            704   ;        -----------------------------------------
007B            705   _waitms:
007B AA82       706            mov     r2,dpl
007D AB83       707            mov     r3,dph
007F            708   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:131: for(j=0; j<ms; j++)
007F 7C00       709            mov     r4,#0x00
0081 7D00       710            mov     r5,#0x00
0083            711   L004005?:
0083 C3         712            clr     c
0084 EC         713            mov     a,r4
0085 9A         714            subb    a,r2
0086 ED         715            mov     a,r5
0087 9B         716            subb    a,r3
0088 5000       717            jnc     L004009?
008A            718   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:132: for (k=0; k<4; k++) Timer3us(250);
008A 7E00       719            mov     r6,#0x00
008C            720   L004001?:
008C BE0430     721            cjne    r6,#0x04,L004018?
008F            722   L004018?:
008F 5000       723            jnc     L004007?
0091 7582FA     724            mov     dpl,#0xFA
0094 C002       725            push    ar2
0096 C003       726            push    ar3
0098 C004       727            push    ar4
009A C005       728            push    ar5
009C C006       729            push    ar6
009E 120000     730            lcall   _Timer3us
00A1 D006       731            pop     ar6
00A3 D005       732            pop     ar5
00A5 D004       733            pop     ar4
00A7 D003       734            pop     ar3
00A9 D002       735            pop     ar2
00AB 0E         736            inc     r6
00AC 8000       737            sjmp    L004001?
00AE            738   L004007?:
00AE            739   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:131: for(j=0; j<ms; j++)
00AE 0C         740            inc     r4
00AF BC0070     741            cjne    r4,#0x00,L004005?
00B2 0D         742            inc     r5
00B3 8000       743            sjmp    L004005?
00B5            744   L004009?:
00B5 22         745            ret
00B6            746   ;------------------------------------------------------------
00B6            747   ;Allocation info for local variables in function 'TIMER0_Init'
00B6            748   ;------------------------------------------------------------
00B6            749   ;------------------------------------------------------------
00B6            750   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:135: void TIMER0_Init(void)
00B6            751   ;        -----------------------------------------
00B6            752   ;         function TIMER0_Init
00B6            753   ;        -----------------------------------------
00B6            754   _TIMER0_Init:
00B6            755   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:137: TMOD&=0b_1111_0000; // Set the bits of Timer/Counter 0 to zero
00B6 5389F0     756            anl     _TMOD,#0xF0
00B9            757   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:138: TMOD|=0b_0000_0001; // Timer/Counter 0 used as a 16-bit timer
00B9 438901     758            orl     _TMOD,#0x01
00BC            759   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:139: TR0=0; // Stop Timer/Counter 0
00BC C28C       760            clr     _TR0
00BE 22         761            ret
00BF            762   ;------------------------------------------------------------
00BF            763   ;Allocation info for local variables in function 'LCD_pulse'
00BF            764   ;------------------------------------------------------------
00BF            765   ;------------------------------------------------------------
00BF            766   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:143: void LCD_pulse (void)
00BF            767   ;        -----------------------------------------
00BF            768   ;         function LCD_pulse
00BF            769   ;        -----------------------------------------
00BF            770   _LCD_pulse:
00BF            771   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:145: LCD_E=1;
00BF D2A0       772            setb    _P2_0
00C1            773   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:146: Timer3us(40);
00C1 758228     774            mov     dpl,#0x28
00C4 120000     775            lcall   _Timer3us
00C7            776   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:147: LCD_E=0;
00C7 C2A0       777            clr     _P2_0
00C9 22         778            ret
00CA            779   ;------------------------------------------------------------
00CA            780   ;Allocation info for local variables in function 'LCD_byte'
00CA            781   ;------------------------------------------------------------
00CA            782   ;x                         Allocated to registers r2 
00CA            783   ;------------------------------------------------------------
00CA            784   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:150: void LCD_byte (unsigned char x)
00CA            785   ;        -----------------------------------------
00CA            786   ;         function LCD_byte
00CA            787   ;        -----------------------------------------
00CA            788   _LCD_byte:
00CA AA82       789            mov     r2,dpl
00CC            790   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:153: ACC=x; //Send high nible
00CC 8AE0       791            mov     _ACC,r2
00CE            792   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:154: LCD_D7=ACC_7;
00CE A2E7       793            mov     c,_ACC_7
00D0 9290       794            mov     _P1_0,c
00D2            795   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:155: LCD_D6=ACC_6;
00D2 A2E6       796            mov     c,_ACC_6
00D4 9291       797            mov     _P1_1,c
00D6            798   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:156: LCD_D5=ACC_5;
00D6 A2E5       799            mov     c,_ACC_5
00D8 9292       800            mov     _P1_2,c
00DA            801   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:157: LCD_D4=ACC_4;
00DA A2E4       802            mov     c,_ACC_4
00DC 9293       803            mov     _P1_3,c
00DE            804   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:158: LCD_pulse();
00DE C002       805            push    ar2
00E0 120000     806            lcall   _LCD_pulse
00E3            807   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:159: Timer3us(40);
00E3 758228     808            mov     dpl,#0x28
00E6 120000     809            lcall   _Timer3us
00E9 D002       810            pop     ar2
00EB            811   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:160: ACC=x; //Send low nible
00EB 8AE0       812            mov     _ACC,r2
00ED            813   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:161: LCD_D7=ACC_3;
00ED A2E3       814            mov     c,_ACC_3
00EF 9290       815            mov     _P1_0,c
00F1            816   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:162: LCD_D6=ACC_2;
00F1 A2E2       817            mov     c,_ACC_2
00F3 9291       818            mov     _P1_1,c
00F5            819   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:163: LCD_D5=ACC_1;
00F5 A2E1       820            mov     c,_ACC_1
00F7 9292       821            mov     _P1_2,c
00F9            822   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:164: LCD_D4=ACC_0;
00F9 A2E0       823            mov     c,_ACC_0
00FB 9293       824            mov     _P1_3,c
00FD            825   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:165: LCD_pulse();
00FD 020000     826            ljmp    _LCD_pulse
0100            827   ;------------------------------------------------------------
0100            828   ;Allocation info for local variables in function 'WriteData'
0100            829   ;------------------------------------------------------------
0100            830   ;x                         Allocated to registers r2 
0100            831   ;------------------------------------------------------------
0100            832   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:168: void WriteData (unsigned char x)
0100            833   ;        -----------------------------------------
0100            834   ;         function WriteData
0100            835   ;        -----------------------------------------
0100            836   _WriteData:
0100 AA82       837            mov     r2,dpl
0102            838   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:170: LCD_RS=1;
0102 D297       839            setb    _P1_7
0104            840   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:171: LCD_byte(x);
0104 8A82       841            mov     dpl,r2
0106 120000     842            lcall   _LCD_byte
0109            843   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:172: waitms(2);
0109 900002     844            mov     dptr,#0x0002
010C 020000     845            ljmp    _waitms
010F            846   ;------------------------------------------------------------
010F            847   ;Allocation info for local variables in function 'WriteCommand'
010F            848   ;------------------------------------------------------------
010F            849   ;x                         Allocated to registers r2 
010F            850   ;------------------------------------------------------------
010F            851   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:175: void WriteCommand (unsigned char x)
010F            852   ;        -----------------------------------------
010F            853   ;         function WriteCommand
010F            854   ;        -----------------------------------------
010F            855   _WriteCommand:
010F AA82       856            mov     r2,dpl
0111            857   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:177: LCD_RS=0;
0111 C297       858            clr     _P1_7
0113            859   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:178: LCD_byte(x);
0113 8A82       860            mov     dpl,r2
0115 120000     861            lcall   _LCD_byte
0118            862   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:179: waitms(5);
0118 900005     863            mov     dptr,#0x0005
011B 020000     864            ljmp    _waitms
011E            865   ;------------------------------------------------------------
011E            866   ;Allocation info for local variables in function 'LCD_4BIT'
011E            867   ;------------------------------------------------------------
011E            868   ;------------------------------------------------------------
011E            869   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:182: void LCD_4BIT (void)
011E            870   ;        -----------------------------------------
011E            871   ;         function LCD_4BIT
011E            872   ;        -----------------------------------------
011E            873   _LCD_4BIT:
011E            874   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:184: LCD_E=0; // Resting state of LCD's enable is zero
011E C2A0       875            clr     _P2_0
0120            876   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:186: waitms(20);
0120 900014     877            mov     dptr,#0x0014
0123 120000     878            lcall   _waitms
0126            879   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:188: WriteCommand(0x33);
0126 758233     880            mov     dpl,#0x33
0129 120000     881            lcall   _WriteCommand
012C            882   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:189: WriteCommand(0x33);
012C 758233     883            mov     dpl,#0x33
012F 120000     884            lcall   _WriteCommand
0132            885   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:190: WriteCommand(0x32); // Change to 4-bit mode
0132 758232     886            mov     dpl,#0x32
0135 120000     887            lcall   _WriteCommand
0138            888   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:193: WriteCommand(0x28);
0138 758228     889            mov     dpl,#0x28
013B 120000     890            lcall   _WriteCommand
013E            891   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:194: WriteCommand(0x0c);
013E 75820C     892            mov     dpl,#0x0C
0141 120000     893            lcall   _WriteCommand
0144            894   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:195: WriteCommand(0x01); // Clear screen command (takes some time)
0144 758201     895            mov     dpl,#0x01
0147 120000     896            lcall   _WriteCommand
014A            897   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:196: waitms(20); // Wait for clear screen command to finsih.
014A 900014     898            mov     dptr,#0x0014
014D 020000     899            ljmp    _waitms
0150            900   ;------------------------------------------------------------
0150            901   ;Allocation info for local variables in function 'LCDprint'
0150            902   ;------------------------------------------------------------
0150            903   ;line                      Allocated with name '_LCDprint_PARM_2'
0150            904   ;position                  Allocated with name '_LCDprint_PARM_3'
0150            905   ;string                    Allocated to registers r2 r3 r4 
0150            906   ;j                         Allocated to registers r5 r6 
0150            907   ;address                   Allocated to registers r5 
0150            908   ;------------------------------------------------------------
0150            909   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:199: void LCDprint(char * string, unsigned char line, unsigned char position, bit clear)
0150            910   ;        -----------------------------------------
0150            911   ;         function LCDprint
0150            912   ;        -----------------------------------------
0150            913   _LCDprint:
0150 AA82       914            mov     r2,dpl
0152 AB83       915            mov     r3,dph
0154 ACF0       916            mov     r4,b
0156            917   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:204: if (line == 1){
0156 7401       918            mov     a,#0x01
0158 B5C0F0     919            cjne    a,_LCDprint_PARM_2,L011002?
015B            920   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:205: address = 0x80 + position; 
015B 7480       921            mov     a,#0x80
015D 2570       922            add     a,_LCDprint_PARM_3
015F FD         923            mov     r5,a
0160 8000       924            sjmp    L011003?
0162            925   L011002?:
0162            926   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:208: address = 0xC0 + position; 
0162 74C0       927            mov     a,#0xC0
0164 2570       928            add     a,_LCDprint_PARM_3
0166 FD         929            mov     r5,a
0167            930   L011003?:
0167            931   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:210: WriteCommand(address);
0167 8D82       932            mov     dpl,r5
0169 C002       933            push    ar2
016B C003       934            push    ar3
016D C004       935            push    ar4
016F 120000     936            lcall   _WriteCommand
0172            937   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:211: waitms(5);
0172 900005     938            mov     dptr,#0x0005
0175 120000     939            lcall   _waitms
0178 D004       940            pop     ar4
017A D003       941            pop     ar3
017C D002       942            pop     ar2
017E            943   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:212: for(j=0; string[j]!=0; j++)         WriteData(string[j]);// Write the message
017E 7D00       944            mov     r5,#0x00
0180 7E00       945            mov     r6,#0x00
0182            946   L011006?:
0182 ED         947            mov     a,r5
0183 2A         948            add     a,r2
0184 FF         949            mov     r7,a
0185 EE         950            mov     a,r6
0186 3B         951            addc    a,r3
0187 F8         952            mov     r0,a
0188 8C01       953            mov     ar1,r4
018A 8F82       954            mov     dpl,r7
018C 8883       955            mov     dph,r0
018E 89F0       956            mov     b,r1
0190 120000     957            lcall   __gptrget
0193 FF         958            mov     r7,a
0194 6000       959            jz      L011009?
0196 8F82       960            mov     dpl,r7
0198 C002       961            push    ar2
019A C003       962            push    ar3
019C C004       963            push    ar4
019E C005       964            push    ar5
01A0 C006       965            push    ar6
01A2 120000     966            lcall   _WriteData
01A5 D006       967            pop     ar6
01A7 D005       968            pop     ar5
01A9 D004       969            pop     ar4
01AB D003       970            pop     ar3
01AD D002       971            pop     ar2
01AF 0D         972            inc     r5
01B0 BD0070     973            cjne    r5,#0x00,L011006?
01B3 0E         974            inc     r6
01B4 8000       975            sjmp    L011006?
01B6            976   L011009?:
01B6            977   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:213: if(clear) for(; j<CHARS_PER_LINE; j++) WriteData(' '); // Clear the rest of the line
01B6 30D030     978            jnb     _LCDprint_PARM_4,L011014?
01B9 8D02       979            mov     ar2,r5
01BB 8E03       980            mov     ar3,r6
01BD            981   L011010?:
01BD C3         982            clr     c
01BE EA         983            mov     a,r2
01BF 9410       984            subb    a,#0x10
01C1 EB         985            mov     a,r3
01C2 6480       986            xrl     a,#0x80
01C4 9480       987            subb    a,#0x80
01C6 5000       988            jnc     L011014?
01C8 758220     989            mov     dpl,#0x20
01CB C002       990            push    ar2
01CD C003       991            push    ar3
01CF 120000     992            lcall   _WriteData
01D2 D003       993            pop     ar3
01D4 D002       994            pop     ar2
01D6 0A         995            inc     r2
01D7 BA0070     996            cjne    r2,#0x00,L011010?
01DA 0B         997            inc     r3
01DB 8000       998            sjmp    L011010?
01DD            999   L011014?:
01DD 22        1000            ret
01DE           1001   ;------------------------------------------------------------
01DE           1002   ;Allocation info for local variables in function 'Read_Pin'
01DE           1003   ;------------------------------------------------------------
01DE           1004   ;pin                       Allocated to registers r2 
01DE           1005   ;mask                      Allocated to registers r3 
01DE           1006   ;result                    Allocated to registers r2 
01DE           1007   ;------------------------------------------------------------
01DE           1008   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:216: bit Read_Pin (unsigned char pin)
01DE           1009   ;        -----------------------------------------
01DE           1010   ;         function Read_Pin
01DE           1011   ;        -----------------------------------------
01DE           1012   _Read_Pin:
01DE AA82      1013            mov     r2,dpl
01E0           1014   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:220: mask=(1<<(pin&0x7));
01E0 7407      1015            mov     a,#0x07
01E2 5A        1016            anl     a,r2
01E3 F5F0      1017            mov     b,a
01E5 05F0      1018            inc     b
01E7 7401      1019            mov     a,#0x01
01E9 8000      1020            sjmp    L012012?
01EB           1021   L012010?:
01EB 25E0      1022            add     a,acc
01ED           1023   L012012?:
01ED D5F0F0    1024            djnz    b,L012010?
01F0 FB        1025            mov     r3,a
01F1           1026   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:221: switch(pin/0x10)
01F1 EA        1027            mov     a,r2
01F2 C4        1028            swap    a
01F3 540F      1029            anl     a,#0x0f
01F5 FA        1030            mov  r2,a
01F6 24FC      1031            add     a,#0xff - 0x03
01F8 4000      1032            jc      L012002?
01FA EA        1033            mov     a,r2
01FB 2A        1034            add     a,r2
01FC 2A        1035            add     a,r2
01FD 90C070    1036            mov     dptr,#L012014?
0200 73        1037            jmp     @a+dptr
0201           1038   L012014?:
0201 020000    1039            ljmp    L012002?
0204 020000    1040            ljmp    L012003?
0207 020000    1041            ljmp    L012004?
020A 020000    1042            ljmp    L012005?
020D           1043   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:224: case 0: result = P0 & mask; break;
020D           1044   L012002?:
020D EB        1045            mov     a,r3
020E 5580      1046            anl     a,_P0
0210 FA        1047            mov     r2,a
0211           1048   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:225: case 1: result = P1 & mask; break;
0211 8000      1049            sjmp    L012006?
0213           1050   L012003?:
0213 EB        1051            mov     a,r3
0214 5590      1052            anl     a,_P1
0216 FA        1053            mov     r2,a
0217           1054   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:226: case 2: result = P2 & mask; break; 
0217 8000      1055            sjmp    L012006?
0219           1056   L012004?:
0219 EB        1057            mov     a,r3
021A 55A0      1058            anl     a,_P2
021C FA        1059            mov     r2,a
021D           1060   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:227: case 3: result = P3 & mask; break; 
021D 8000      1061            sjmp    L012006?
021F           1062   L012005?:
021F EB        1063            mov     a,r3
0220 55B0      1064            anl     a,_P3
0222 FA        1065            mov     r2,a
0223           1066   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:228: }
0223           1067   L012006?:
0223           1068   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:229: return (result?1:0);
0223 EA        1069            mov     a,r2
0224 24FF      1070            add     a,#0xff
0226 22        1071            ret
0227           1072   ;------------------------------------------------------------
0227           1073   ;Allocation info for local variables in function 'ReadButtonDebounced'
0227           1074   ;------------------------------------------------------------
0227           1075   ;pin                       Allocated to registers r2 
0227           1076   ;------------------------------------------------------------
0227           1077   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:232: bit ReadButtonDebounced(unsigned char pin)
0227           1078   ;        -----------------------------------------
0227           1079   ;         function ReadButtonDebounced
0227           1080   ;        -----------------------------------------
0227           1081   _ReadButtonDebounced:
0227           1082   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:234: if (Read_Pin(pin) == 0) 
0227 AA82      1083            mov  r2,dpl
0229 C002      1084            push    ar2
022B 120000    1085            lcall   _Read_Pin
022E D002      1086            pop     ar2
0230 4000      1087            jc      L013007?
0232           1088   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:236: waitms(10);
0232 90000A    1089            mov     dptr,#0x000A
0235 C002      1090            push    ar2
0237 120000    1091            lcall   _waitms
023A D002      1092            pop     ar2
023C           1093   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:237: while (Read_Pin(pin) == 0) // check again
023C           1094   L013001?:
023C 8A82      1095            mov     dpl,r2
023E C002      1096            push    ar2
0240 120000    1097            lcall   _Read_Pin
0243 E4        1098            clr     a
0244 33        1099            rlc     a
0245 D002      1100            pop     ar2
0247 6000      1101            jz      L013001?
0249           1102   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:241: waitms(10); 
0249 90000A    1103            mov     dptr,#0x000A
024C C002      1104            push    ar2
024E 120000    1105            lcall   _waitms
0251 D002      1106            pop     ar2
0253           1107   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:242: if (Read_Pin(pin) == 1){
0253 8A82      1108            mov     dpl,r2
0255 120000    1109            lcall   _Read_Pin
0258 E4        1110            clr     a
0259 33        1111            rlc     a
025A FA        1112            mov     r2,a
025B BA01B0    1113            cjne    r2,#0x01,L013007?
025E           1114   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:243: return 1;
025E D3        1115            setb    c
025F 22        1116            ret
0260           1117   L013007?:
0260           1118   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:247: return 0; 
0260 C3        1119            clr     c
0261 22        1120            ret
0262           1121   ;------------------------------------------------------------
0262           1122   ;Allocation info for local variables in function 'InitADC'
0262           1123   ;------------------------------------------------------------
0262           1124   ;------------------------------------------------------------
0262           1125   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:251: void InitADC (void)
0262           1126   ;        -----------------------------------------
0262           1127   ;         function InitADC
0262           1128   ;        -----------------------------------------
0262           1129   _InitADC:
0262           1130   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:253: SFRPAGE = 0x00;
0262 75A700    1131            mov     _SFRPAGE,#0x00
0265           1132   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:254: ADEN=0; // Disable ADC
0265 C2EF      1133            clr     _ADEN
0267           1134   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:259: (0x0 << 0) ; // Accumulate n conversions: 0x0: 1, 0x1:4, 0x2:8, 0x3:16, 0x4:32
0267 75B280    1135            mov     _ADC0CN1,#0x80
026A           1136   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:263: (0x0 << 2); // 0:SYSCLK ADCCLK = SYSCLK. 1:HFOSC0 ADCCLK = HFOSC0.
026A 75BC20    1137            mov     _ADC0CF0,#0x20
026D           1138   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:267: (0x1E << 0); // Conversion Tracking Time. Tadtk = ADTK / (Fsarclk)
026D 75B91E    1139            mov     _ADC0CF1,#0x1E
0270           1140   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:276: (0x0 << 0) ; // TEMPE. 0: Disable the Temperature Sensor. 1: Enable the Temperature Sensor.
0270 75E800    1141            mov     _ADC0CN0,#0x00
0273           1142   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:281: (0x1F << 0); // ADPWR. Power Up Delay Time. Tpwrtime = ((4 * (ADPWR + 1)) + 2) / (Fadcclk)
0273 75DF3F    1143            mov     _ADC0CF2,#0x3F
0276           1144   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:285: (0x0 << 0) ; // ADCM. 0x0: ADBUSY, 0x1: TIMER0, 0x2: TIMER2, 0x3: TIMER3, 0x4: CNVSTR, 0x5: CEX5, 0x6: TIMER4, 0x7: TIMER5, 0x8: CLU0, 0x9: CLU1, 0xA: CLU2, 0xB: CLU3
0276 75B300    1145            mov     _ADC0CN2,#0x00
0279           1146   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:287: ADEN=1; // Enable ADC
0279 D2EF      1147            setb    _ADEN
027B 22        1148            ret
027C           1149   ;------------------------------------------------------------
027C           1150   ;Allocation info for local variables in function 'InitPinADC'
027C           1151   ;------------------------------------------------------------
027C           1152   ;pinno                     Allocated with name '_InitPinADC_PARM_2'
027C           1153   ;portno                    Allocated to registers r2 
027C           1154   ;mask                      Allocated to registers r3 
027C           1155   ;------------------------------------------------------------
027C           1156   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:290: void InitPinADC (unsigned char portno, unsigned char pinno)
027C           1157   ;        -----------------------------------------
027C           1158   ;         function InitPinADC
027C           1159   ;        -----------------------------------------
027C           1160   _InitPinADC:
027C AA82      1161            mov     r2,dpl
027E           1162   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:294: mask=1<<pinno;
027E 8560F0    1163            mov     b,_InitPinADC_PARM_2
0281 05F0      1164            inc     b
0283 7401      1165            mov     a,#0x01
0285 8000      1166            sjmp    L015013?
0287           1167   L015011?:
0287 25E0      1168            add     a,acc
0289           1169   L015013?:
0289 D5F070    1170            djnz    b,L015011?
028C FB        1171            mov     r3,a
028D           1172   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:296: SFRPAGE = 0x20;
028D 75A720    1173            mov     _SFRPAGE,#0x20
0290           1174   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:297: switch (portno)
0290 BA00B0    1175            cjne    r2,#0x00,L015014?
0293 8000      1176            sjmp    L015001?
0295           1177   L015014?:
0295 BA0130    1178            cjne    r2,#0x01,L015015?
0298 8000      1179            sjmp    L015002?
029A           1180   L015015?:
029A           1181   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:299: case 0:
029A BA02B0    1182            cjne    r2,#0x02,L015005?
029D 8000      1183            sjmp    L015003?
029F           1184   L015001?:
029F           1185   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:300: P0MDIN &= (~mask); // Set pin as analog input
029F EB        1186            mov     a,r3
02A0 F4        1187            cpl     a
02A1 FA        1188            mov     r2,a
02A2 52F1      1189            anl     _P0MDIN,a
02A4           1190   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:301: P0SKIP |= mask; // Skip Crossbar decoding for this pin
02A4 EB        1191            mov     a,r3
02A5 42D4      1192            orl     _P0SKIP,a
02A7           1193   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:302: break;
02A7           1194   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:303: case 1:
02A7 8000      1195            sjmp    L015005?
02A9           1196   L015002?:
02A9           1197   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:304: P1MDIN &= (~mask); // Set pin as analog input
02A9 EB        1198            mov     a,r3
02AA F4        1199            cpl     a
02AB FA        1200            mov     r2,a
02AC 52F2      1201            anl     _P1MDIN,a
02AE           1202   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:305: P1SKIP |= mask; // Skip Crossbar decoding for this pin
02AE EB        1203            mov     a,r3
02AF 42D5      1204            orl     _P1SKIP,a
02B1           1205   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:306: break;
02B1           1206   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:307: case 2:
02B1 8000      1207            sjmp    L015005?
02B3           1208   L015003?:
02B3           1209   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:308: P2MDIN &= (~mask); // Set pin as analog input
02B3 EB        1210            mov     a,r3
02B4 F4        1211            cpl     a
02B5 FA        1212            mov     r2,a
02B6 52F3      1213            anl     _P2MDIN,a
02B8           1214   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:309: P2SKIP |= mask; // Skip Crossbar decoding for this pin
02B8 EB        1215            mov     a,r3
02B9 42CC      1216            orl     _P2SKIP,a
02BB           1217   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:313: }
02BB           1218   L015005?:
02BB           1219   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:314: SFRPAGE = 0x00;
02BB 75A700    1220            mov     _SFRPAGE,#0x00
02BE 22        1221            ret
02BF           1222   ;------------------------------------------------------------
02BF           1223   ;Allocation info for local variables in function 'ADC_at_Pin'
02BF           1224   ;------------------------------------------------------------
02BF           1225   ;pin                       Allocated to registers 
02BF           1226   ;------------------------------------------------------------
02BF           1227   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:317: unsigned int ADC_at_Pin(unsigned char pin)
02BF           1228   ;        -----------------------------------------
02BF           1229   ;         function ADC_at_Pin
02BF           1230   ;        -----------------------------------------
02BF           1231   _ADC_at_Pin:
02BF 8582BB    1232            mov     _ADC0MX,dpl
02C2           1233   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:320: ADINT = 0;
02C2 C2ED      1234            clr     _ADINT
02C4           1235   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:321: ADBUSY = 1;     // Convert voltage at the pin
02C4 D2EC      1236            setb    _ADBUSY
02C6           1237   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:322: while (!ADINT); // Wait for conversion to complete
02C6           1238   L016001?:
02C6 30ED30    1239            jnb     _ADINT,L016001?
02C9           1240   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:323: return (ADC0);
02C9 85BD82    1241            mov     dpl,_ADC0
02CC 85BE83    1242            mov     dph,(_ADC0 >> 8)
02CF 22        1243            ret
02D0           1244   ;------------------------------------------------------------
02D0           1245   ;Allocation info for local variables in function 'Volts_at_Pin'
02D0           1246   ;------------------------------------------------------------
02D0           1247   ;pin                       Allocated to registers r2 
02D0           1248   ;------------------------------------------------------------
02D0           1249   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:326: float Volts_at_Pin(unsigned char pin)
02D0           1250   ;        -----------------------------------------
02D0           1251   ;         function Volts_at_Pin
02D0           1252   ;        -----------------------------------------
02D0           1253   _Volts_at_Pin:
02D0           1254   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:328: return ((ADC_at_Pin(pin)*VDD)/0b_0011_1111_1111_1111);
02D0 120000    1255            lcall   _ADC_at_Pin
02D3 120000    1256            lcall   ___uint2fs
02D6 AA82      1257            mov     r2,dpl
02D8 AB83      1258            mov     r3,dph
02DA ACF0      1259            mov     r4,b
02DC FD        1260            mov     r5,a
02DD C002      1261            push    ar2
02DF C003      1262            push    ar3
02E1 C004      1263            push    ar4
02E3 C005      1264            push    ar5
02E5 908F5C    1265            mov     dptr,#0x8F5C
02E8 75F052    1266            mov     b,#0x52
02EB 7440      1267            mov     a,#0x40
02ED 120000    1268            lcall   ___fsmul
02F0 AA82      1269            mov     r2,dpl
02F2 AB83      1270            mov     r3,dph
02F4 ACF0      1271            mov     r4,b
02F6 FD        1272            mov     r5,a
02F7 E581      1273            mov     a,sp
02F9 24FC      1274            add     a,#0xfc
02FB F581      1275            mov     sp,a
02FD E4        1276            clr     a
02FE C0E0      1277            push    acc
0300 74FC      1278            mov     a,#0xFC
0302 C0E0      1279            push    acc
0304 747F      1280            mov     a,#0x7F
0306 C0E0      1281            push    acc
0308 7446      1282            mov     a,#0x46
030A C0E0      1283            push    acc
030C 8A82      1284            mov     dpl,r2
030E 8B83      1285            mov     dph,r3
0310 8CF0      1286            mov     b,r4
0312 ED        1287            mov     a,r5
0313 120000    1288            lcall   ___fsdiv
0316 AA82      1289            mov     r2,dpl
0318 AB83      1290            mov     r3,dph
031A ACF0      1291            mov     r4,b
031C FD        1292            mov     r5,a
031D E581      1293            mov     a,sp
031F 24FC      1294            add     a,#0xfc
0321 F581      1295            mov     sp,a
0323 8A82      1296            mov     dpl,r2
0325 8B83      1297            mov     dph,r3
0327 8CF0      1298            mov     b,r4
0329 ED        1299            mov     a,r5
032A 22        1300            ret
032B           1301   ;------------------------------------------------------------
032B           1302   ;Allocation info for local variables in function 'ReadPeriod'
032B           1303   ;------------------------------------------------------------
032B           1304   ;period                    Allocated to registers r2 r3 r4 r5 
032B           1305   ;------------------------------------------------------------
032B           1306   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:331: float ReadPeriod(void)
032B           1307   ;        -----------------------------------------
032B           1308   ;         function ReadPeriod
032B           1309   ;        -----------------------------------------
032B           1310   _ReadPeriod:
032B           1311   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:334: overflow_count = 0; 
032B 750000    1312            mov     _overflow_count,#0x00
032E           1313   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:336: TR0 = 0; // make sure timer0 is stopped
032E C28C      1314            clr     _TR0
0330           1315   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:337: TH0 = 0; TL0 = 0; TF0 = 0;
0330 758C00    1316            mov     _TH0,#0x00
0333 758A00    1317            mov     _TL0,#0x00
0336 C28D      1318            clr     _TF0
0338           1319   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:340: while(Phasor_ref == 1); // wait for the signal to be zero
0338           1320   L018001?:
0338 20A670    1321            jb      _P2_6,L018001?
033B           1322   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:341: while(Phasor_ref == 0); // wait for the signal to be one
033B           1323   L018004?:
033B 30A6B0    1324            jnb     _P2_6,L018004?
033E           1325   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:342: TR0 = 1; // start timing 
033E D28C      1326            setb    _TR0
0340           1327   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:343: while(Phasor_ref == 1) // Wait for the signal to be zero
0340           1328   L018009?:
0340 30A630    1329            jnb     _P2_6,L018014?
0343           1330   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:345: if(TF0==1) // Did the 16-bit timer overflow?
0343           1331   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:347: TF0=0;
0343 108D70    1332            jbc     _TF0,L018031?
0346 8000      1333            sjmp    L018009?
0348           1334   L018031?:
0348           1335   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:348: overflow_count++;
0348 0500      1336            inc     _overflow_count
034A           1337   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:351: while(Phasor_ref == 0) // Wait for the signal to be one
034A 8000      1338            sjmp    L018009?
034C           1339   L018014?:
034C 20A6B0    1340            jb      _P2_6,L018016?
034F           1341   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:353: if(TF0==1) // Did the 16-bit timer overflow?
034F           1342   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:355: TF0=0;
034F 108DF0    1343            jbc     _TF0,L018033?
0352 8000      1344            sjmp    L018014?
0354           1345   L018033?:
0354           1346   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:356: overflow_count++;
0354 0500      1347            inc     _overflow_count
0356 8000      1348            sjmp    L018014?
0358           1349   L018016?:
0358           1350   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:359: TR0=0;
0358 C28C      1351            clr     _TR0
035A           1352   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:361: period=(overflow_count * 65536.0 + TH0 * 256.0 + TL0) * (12.0 / SYSCLK);
035A 850082    1353            mov     dpl,_overflow_count
035D 120000    1354            lcall   ___uchar2fs
0360 AA82      1355            mov     r2,dpl
0362 AB83      1356            mov     r3,dph
0364 ACF0      1357            mov     r4,b
0366 FD        1358            mov     r5,a
0367 C002      1359            push    ar2
0369 C003      1360            push    ar3
036B C004      1361            push    ar4
036D C005      1362            push    ar5
036F 900000    1363            mov     dptr,#0x0000
0372 75F080    1364            mov     b,#0x80
0375 7447      1365            mov     a,#0x47
0377 120000    1366            lcall   ___fsmul
037A AA82      1367            mov     r2,dpl
037C AB83      1368            mov     r3,dph
037E ACF0      1369            mov     r4,b
0380 FD        1370            mov     r5,a
0381 E581      1371            mov     a,sp
0383 24FC      1372            add     a,#0xfc
0385 F581      1373            mov     sp,a
0387 858C82    1374            mov     dpl,_TH0
038A C002      1375            push    ar2
038C C003      1376            push    ar3
038E C004      1377            push    ar4
0390 C005      1378            push    ar5
0392 120000    1379            lcall   ___uchar2fs
0395 AE82      1380            mov     r6,dpl
0397 AF83      1381            mov     r7,dph
0399 A8F0      1382            mov     r0,b
039B F9        1383            mov     r1,a
039C C006      1384            push    ar6
039E C007      1385            push    ar7
03A0 C000      1386            push    ar0
03A2 C001      1387            push    ar1
03A4 900000    1388            mov     dptr,#0x0000
03A7 75F080    1389            mov     b,#0x80
03AA 7443      1390            mov     a,#0x43
03AC 120000    1391            lcall   ___fsmul
03AF AE82      1392            mov     r6,dpl
03B1 AF83      1393            mov     r7,dph
03B3 A8F0      1394            mov     r0,b
03B5 F9        1395            mov     r1,a
03B6 E581      1396            mov     a,sp
03B8 24FC      1397            add     a,#0xfc
03BA F581      1398            mov     sp,a
03BC D005      1399            pop     ar5
03BE D004      1400            pop     ar4
03C0 D003      1401            pop     ar3
03C2 D002      1402            pop     ar2
03C4 C006      1403            push    ar6
03C6 C007      1404            push    ar7
03C8 C000      1405            push    ar0
03CA C001      1406            push    ar1
03CC 8A82      1407            mov     dpl,r2
03CE 8B83      1408            mov     dph,r3
03D0 8CF0      1409            mov     b,r4
03D2 ED        1410            mov     a,r5
03D3 120000    1411            lcall   ___fsadd
03D6 AA82      1412            mov     r2,dpl
03D8 AB83      1413            mov     r3,dph
03DA ACF0      1414            mov     r4,b
03DC FD        1415            mov     r5,a
03DD E581      1416            mov     a,sp
03DF 24FC      1417            add     a,#0xfc
03E1 F581      1418            mov     sp,a
03E3 AE8A      1419            mov     r6,_TL0
03E5 7F00      1420            mov     r7,#0x00
03E7 8E82      1421            mov     dpl,r6
03E9 8F83      1422            mov     dph,r7
03EB C002      1423            push    ar2
03ED C003      1424            push    ar3
03EF C004      1425            push    ar4
03F1 C005      1426            push    ar5
03F3 120000    1427            lcall   ___sint2fs
03F6 AE82      1428            mov     r6,dpl
03F8 AF83      1429            mov     r7,dph
03FA A8F0      1430            mov     r0,b
03FC F9        1431            mov     r1,a
03FD D005      1432            pop     ar5
03FF D004      1433            pop     ar4
0401 D003      1434            pop     ar3
0403 D002      1435            pop     ar2
0405 C006      1436            push    ar6
0407 C007      1437            push    ar7
0409 C000      1438            push    ar0
040B C001      1439            push    ar1
040D 8A82      1440            mov     dpl,r2
040F 8B83      1441            mov     dph,r3
0411 8CF0      1442            mov     b,r4
0413 ED        1443            mov     a,r5
0414 120000    1444            lcall   ___fsadd
0417 AA82      1445            mov     r2,dpl
0419 AB83      1446            mov     r3,dph
041B ACF0      1447            mov     r4,b
041D FD        1448            mov     r5,a
041E E581      1449            mov     a,sp
0420 24FC      1450            add     a,#0xfc
0422 F581      1451            mov     sp,a
0424 C002      1452            push    ar2
0426 C003      1453            push    ar3
0428 C004      1454            push    ar4
042A C005      1455            push    ar5
042C 90F4FC    1456            mov     dptr,#0xF4FC
042F 75F032    1457            mov     b,#0x32
0432 7434      1458            mov     a,#0x34
0434 120000    1459            lcall   ___fsmul
0437 AA82      1460            mov     r2,dpl
0439 AB83      1461            mov     r3,dph
043B ACF0      1462            mov     r4,b
043D FD        1463            mov     r5,a
043E E581      1464            mov     a,sp
0440 24FC      1465            add     a,#0xfc
0442 F581      1466            mov     sp,a
0444           1467   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:362: return period; 
0444 8A82      1468            mov     dpl,r2
0446 8B83      1469            mov     dph,r3
0448 8CF0      1470            mov     b,r4
044A ED        1471            mov     a,r5
044B 22        1472            ret
044C           1473   ;------------------------------------------------------------
044C           1474   ;Allocation info for local variables in function 'ReadPeak'
044C           1475   ;------------------------------------------------------------
044C           1476   ;vpeak                     Allocated with name '_ReadPeak_PARM_2'
044C           1477   ;period                    Allocated to registers r2 r3 r4 r5 
044C           1478   ;periodms                  Allocated to registers r2 r3 r4 r5 
044C           1479   ;sloc0                     Allocated with name '_ReadPeak_sloc0_1_0'
044C           1480   ;------------------------------------------------------------
044C           1481   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:366: void ReadPeak(float period, float *vpeak)
044C           1482   ;        -----------------------------------------
044C           1483   ;         function ReadPeak
044C           1484   ;        -----------------------------------------
044C           1485   _ReadPeak:
044C AA82      1486            mov     r2,dpl
044E AB83      1487            mov     r3,dph
0450 ACF0      1488            mov     r4,b
0452 FD        1489            mov     r5,a
0453           1490   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:368: float periodms = period/4.0 * 1000.0; // Period/4 in ms
0453 E4        1491            clr     a
0454 C0E0      1492            push    acc
0456 C0E0      1493            push    acc
0458 7480      1494            mov     a,#0x80
045A C0E0      1495            push    acc
045C 7440      1496            mov     a,#0x40
045E C0E0      1497            push    acc
0460 8A82      1498            mov     dpl,r2
0462 8B83      1499            mov     dph,r3
0464 8CF0      1500            mov     b,r4
0466 ED        1501            mov     a,r5
0467 120000    1502            lcall   ___fsdiv
046A AA82      1503            mov     r2,dpl
046C AB83      1504            mov     r3,dph
046E ACF0      1505            mov     r4,b
0470 FD        1506            mov     r5,a
0471 E581      1507            mov     a,sp
0473 24FC      1508            add     a,#0xfc
0475 F581      1509            mov     sp,a
0477 C002      1510            push    ar2
0479 C003      1511            push    ar3
047B C004      1512            push    ar4
047D C005      1513            push    ar5
047F 900000    1514            mov     dptr,#0x0000
0482 75F07A    1515            mov     b,#0x7A
0485 7444      1516            mov     a,#0x44
0487 120000    1517            lcall   ___fsmul
048A AA82      1518            mov     r2,dpl
048C AB83      1519            mov     r3,dph
048E ACF0      1520            mov     r4,b
0490 FD        1521            mov     r5,a
0491 E581      1522            mov     a,sp
0493 24FC      1523            add     a,#0xfc
0495 F581      1524            mov     sp,a
0497           1525   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:371: while(Phasor_ref == 1);
0497           1526   L019001?:
0497 20A6F0    1527            jb      _P2_6,L019001?
049A           1528   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:372: while(Phasor_ref == 0); 
049A           1529   L019004?:
049A 30A630    1530            jnb     _P2_6,L019004?
049D           1531   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:373: waitms(periodms);
049D 8A82      1532            mov     dpl,r2
049F 8B83      1533            mov     dph,r3
04A1 8CF0      1534            mov     b,r4
04A3 ED        1535            mov     a,r5
04A4 120000    1536            lcall   ___fs2uint
04A7 858220    1537            mov     _ReadPeak_sloc0_1_0,dpl
04AA 858321    1538            mov  (_ReadPeak_sloc0_1_0 + 1),dph
04AD 120000    1539            lcall   _waitms
04B0           1540   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:374: vpeak[0] = Volts_at_Pin(QFP32_MUX_P2_3);
04B0 AC20      1541            mov     r4,_ReadPeak_PARM_2
04B2 AD21      1542            mov     r5,(_ReadPeak_PARM_2 + 1)
04B4 AE22      1543            mov     r6,(_ReadPeak_PARM_2 + 2)
04B6 758210    1544            mov     dpl,#0x10
04B9 C004      1545            push    ar4
04BB C005      1546            push    ar5
04BD C006      1547            push    ar6
04BF 120000    1548            lcall   _Volts_at_Pin
04C2 AF82      1549            mov     r7,dpl
04C4 A883      1550            mov     r0,dph
04C6 A9F0      1551            mov     r1,b
04C8 FA        1552            mov     r2,a
04C9 D006      1553            pop     ar6
04CB D005      1554            pop     ar5
04CD D004      1555            pop     ar4
04CF 8C82      1556            mov     dpl,r4
04D1 8D83      1557            mov     dph,r5
04D3 8EF0      1558            mov     b,r6
04D5 EF        1559            mov     a,r7
04D6 120000    1560            lcall   __gptrput
04D9 A3        1561            inc     dptr
04DA E8        1562            mov     a,r0
04DB 120000    1563            lcall   __gptrput
04DE A3        1564            inc     dptr
04DF E9        1565            mov     a,r1
04E0 120000    1566            lcall   __gptrput
04E3 A3        1567            inc     dptr
04E4 EA        1568            mov     a,r2
04E5 120000    1569            lcall   __gptrput
04E8           1570   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:377: while(Phasor_sig == 1);
04E8           1571   L019007?:
04E8 2094F0    1572            jb      _P1_4,L019007?
04EB           1573   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:378: while(Phasor_sig == 0); 
04EB           1574   L019010?:
04EB 309430    1575            jnb     _P1_4,L019010?
04EE           1576   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:379: waitms(periodms);
04EE 852082    1577            mov     dpl,_ReadPeak_sloc0_1_0
04F1 852183    1578            mov     dph,(_ReadPeak_sloc0_1_0 + 1)
04F4 C004      1579            push    ar4
04F6 C005      1580            push    ar5
04F8 C006      1581            push    ar6
04FA 120000    1582            lcall   _waitms
04FD D006      1583            pop     ar6
04FF D005      1584            pop     ar5
0501 D004      1585            pop     ar4
0503           1586   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:380: vpeak[1] = Volts_at_Pin(QFP32_MUX_P1_5); 
0503 7404      1587            mov     a,#0x04
0505 2C        1588            add     a,r4
0506 FC        1589            mov     r4,a
0507 E4        1590            clr     a
0508 3D        1591            addc    a,r5
0509 FD        1592            mov     r5,a
050A 75820B    1593            mov     dpl,#0x0B
050D C004      1594            push    ar4
050F C005      1595            push    ar5
0511 C006      1596            push    ar6
0513 120000    1597            lcall   _Volts_at_Pin
0516 AA82      1598            mov     r2,dpl
0518 AB83      1599            mov     r3,dph
051A AFF0      1600            mov     r7,b
051C F8        1601            mov     r0,a
051D D006      1602            pop     ar6
051F D005      1603            pop     ar5
0521 D004      1604            pop     ar4
0523 8C82      1605            mov     dpl,r4
0525 8D83      1606            mov     dph,r5
0527 8EF0      1607            mov     b,r6
0529 EA        1608            mov     a,r2
052A 120000    1609            lcall   __gptrput
052D A3        1610            inc     dptr
052E EB        1611            mov     a,r3
052F 120000    1612            lcall   __gptrput
0532 A3        1613            inc     dptr
0533 EF        1614            mov     a,r7
0534 120000    1615            lcall   __gptrput
0537 A3        1616            inc     dptr
0538 E8        1617            mov     a,r0
0539           1618   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:382: return; 
0539 020000    1619            ljmp    __gptrput
053C           1620   ;------------------------------------------------------------
053C           1621   ;Allocation info for local variables in function 'ReadDiff'
053C           1622   ;------------------------------------------------------------
053C           1623   ;time_diff                 Allocated to registers r2 r3 r4 r5 
053C           1624   ;------------------------------------------------------------
053C           1625   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:385: float ReadDiff(void){
053C           1626   ;        -----------------------------------------
053C           1627   ;         function ReadDiff
053C           1628   ;        -----------------------------------------
053C           1629   _ReadDiff:
053C           1630   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:388: TH0 = 0; 
053C 758C00    1631            mov     _TH0,#0x00
053F           1632   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:389: TL0 = 0;
053F 758A00    1633            mov     _TL0,#0x00
0542           1634   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:390: TR0 = 0; 
0542 C28C      1635            clr     _TR0
0544           1636   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:391: TF0 = 0;
0544 C28D      1637            clr     _TF0
0546           1638   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:392: overflow_count = 0;
0546 750000    1639            mov     _overflow_count,#0x00
0549           1640   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:394: while(Phasor_ref == 1);
0549           1641   L020001?:
0549 20A670    1642            jb      _P2_6,L020001?
054C           1643   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:395: while(Phasor_ref == 0);
054C           1644   L020004?:
054C 30A6B0    1645            jnb     _P2_6,L020004?
054F           1646   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:396: TR0 = 1; 
054F D28C      1647            setb    _TR0
0551           1648   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:397: while(Phasor_sig == 1) // Wait for the signal to be zero
0551           1649   L020009?:
0551 309430    1650            jnb     _P1_4,L020014?
0554           1651   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:399: if(TF0==1) // Did the 16-bit timer overflow?
0554           1652   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:401: TF0=0;
0554 108D70    1653            jbc     _TF0,L020031?
0557 8000      1654            sjmp    L020009?
0559           1655   L020031?:
0559           1656   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:402: overflow_count++;
0559 0500      1657            inc     _overflow_count
055B           1658   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:405: while(Phasor_sig == 0) // Wait for the signal to be one
055B 8000      1659            sjmp    L020009?
055D           1660   L020014?:
055D 2094B0    1661            jb      _P1_4,L020016?
0560           1662   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:407: if(TF0==1) // Did the 16-bit timer overflow?
0560           1663   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:409: TF0=0;
0560 108DF0    1664            jbc     _TF0,L020033?
0563 8000      1665            sjmp    L020014?
0565           1666   L020033?:
0565           1667   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:410: overflow_count++;
0565 0500      1668            inc     _overflow_count
0567 8000      1669            sjmp    L020014?
0569           1670   L020016?:
0569           1671   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:413: TR0=0;
0569 C28C      1672            clr     _TR0
056B           1673   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:414: time_diff=(overflow_count * 65536.0 + TH0 * 256.0 + TL0) * (12.0 / SYSCLK);
056B 850082    1674            mov     dpl,_overflow_count
056E 120000    1675            lcall   ___uchar2fs
0571 AA82      1676            mov     r2,dpl
0573 AB83      1677            mov     r3,dph
0575 ACF0      1678            mov     r4,b
0577 FD        1679            mov     r5,a
0578 C002      1680            push    ar2
057A C003      1681            push    ar3
057C C004      1682            push    ar4
057E C005      1683            push    ar5
0580 900000    1684            mov     dptr,#0x0000
0583 75F080    1685            mov     b,#0x80
0586 7447      1686            mov     a,#0x47
0588 120000    1687            lcall   ___fsmul
058B AA82      1688            mov     r2,dpl
058D AB83      1689            mov     r3,dph
058F ACF0      1690            mov     r4,b
0591 FD        1691            mov     r5,a
0592 E581      1692            mov     a,sp
0594 24FC      1693            add     a,#0xfc
0596 F581      1694            mov     sp,a
0598 858C82    1695            mov     dpl,_TH0
059B C002      1696            push    ar2
059D C003      1697            push    ar3
059F C004      1698            push    ar4
05A1 C005      1699            push    ar5
05A3 120000    1700            lcall   ___uchar2fs
05A6 AE82      1701            mov     r6,dpl
05A8 AF83      1702            mov     r7,dph
05AA A8F0      1703            mov     r0,b
05AC F9        1704            mov     r1,a
05AD C006      1705            push    ar6
05AF C007      1706            push    ar7
05B1 C000      1707            push    ar0
05B3 C001      1708            push    ar1
05B5 900000    1709            mov     dptr,#0x0000
05B8 75F080    1710            mov     b,#0x80
05BB 7443      1711            mov     a,#0x43
05BD 120000    1712            lcall   ___fsmul
05C0 AE82      1713            mov     r6,dpl
05C2 AF83      1714            mov     r7,dph
05C4 A8F0      1715            mov     r0,b
05C6 F9        1716            mov     r1,a
05C7 E581      1717            mov     a,sp
05C9 24FC      1718            add     a,#0xfc
05CB F581      1719            mov     sp,a
05CD D005      1720            pop     ar5
05CF D004      1721            pop     ar4
05D1 D003      1722            pop     ar3
05D3 D002      1723            pop     ar2
05D5 C006      1724            push    ar6
05D7 C007      1725            push    ar7
05D9 C000      1726            push    ar0
05DB C001      1727            push    ar1
05DD 8A82      1728            mov     dpl,r2
05DF 8B83      1729            mov     dph,r3
05E1 8CF0      1730            mov     b,r4
05E3 ED        1731            mov     a,r5
05E4 120000    1732            lcall   ___fsadd
05E7 AA82      1733            mov     r2,dpl
05E9 AB83      1734            mov     r3,dph
05EB ACF0      1735            mov     r4,b
05ED FD        1736            mov     r5,a
05EE E581      1737            mov     a,sp
05F0 24FC      1738            add     a,#0xfc
05F2 F581      1739            mov     sp,a
05F4 AE8A      1740            mov     r6,_TL0
05F6 7F00      1741            mov     r7,#0x00
05F8 8E82      1742            mov     dpl,r6
05FA 8F83      1743            mov     dph,r7
05FC C002      1744            push    ar2
05FE C003      1745            push    ar3
0600 C004      1746            push    ar4
0602 C005      1747            push    ar5
0604 120000    1748            lcall   ___sint2fs
0607 AE82      1749            mov     r6,dpl
0609 AF83      1750            mov     r7,dph
060B A8F0      1751            mov     r0,b
060D F9        1752            mov     r1,a
060E D005      1753            pop     ar5
0610 D004      1754            pop     ar4
0612 D003      1755            pop     ar3
0614 D002      1756            pop     ar2
0616 C006      1757            push    ar6
0618 C007      1758            push    ar7
061A C000      1759            push    ar0
061C C001      1760            push    ar1
061E 8A82      1761            mov     dpl,r2
0620 8B83      1762            mov     dph,r3
0622 8CF0      1763            mov     b,r4
0624 ED        1764            mov     a,r5
0625 120000    1765            lcall   ___fsadd
0628 AA82      1766            mov     r2,dpl
062A AB83      1767            mov     r3,dph
062C ACF0      1768            mov     r4,b
062E FD        1769            mov     r5,a
062F E581      1770            mov     a,sp
0631 24FC      1771            add     a,#0xfc
0633 F581      1772            mov     sp,a
0635 C002      1773            push    ar2
0637 C003      1774            push    ar3
0639 C004      1775            push    ar4
063B C005      1776            push    ar5
063D 90F4FC    1777            mov     dptr,#0xF4FC
0640 75F032    1778            mov     b,#0x32
0643 7434      1779            mov     a,#0x34
0645 120000    1780            lcall   ___fsmul
0648 AA82      1781            mov     r2,dpl
064A AB83      1782            mov     r3,dph
064C ACF0      1783            mov     r4,b
064E FD        1784            mov     r5,a
064F E581      1785            mov     a,sp
0651 24FC      1786            add     a,#0xfc
0653 F581      1787            mov     sp,a
0655           1788   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:415: return time_diff; 
0655 8A82      1789            mov     dpl,r2
0657 8B83      1790            mov     dph,r3
0659 8CF0      1791            mov     b,r4
065B ED        1792            mov     a,r5
065C 22        1793            ret
065D           1794   ;------------------------------------------------------------
065D           1795   ;Allocation info for local variables in function 'main'
065D           1796   ;------------------------------------------------------------
065D           1797   ;vpeak                     Allocated with name '_main_vpeak_1_119'
065D           1798   ;v_rms                     Allocated with name '_main_v_rms_1_119'
065D           1799   ;period                    Allocated with name '_main_period_1_119'
065D           1800   ;time_diff                 Allocated with name '_main_time_diff_1_119'
065D           1801   ;phase_diff                Allocated with name '_main_phase_diff_1_119'
065D           1802   ;frequency                 Allocated to registers r6 r7 r2 r3 
065D           1803   ;sloc0                     Allocated with name '_main_sloc0_1_0'
065D           1804   ;------------------------------------------------------------
065D           1805   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:419: void main (void)
065D           1806   ;        -----------------------------------------
065D           1807   ;         function main
065D           1808   ;        -----------------------------------------
065D           1809   _main:
065D           1810   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:430: TIMER0_Init();
065D 120000    1811            lcall   _TIMER0_Init
0660           1812   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:431: LCD_4BIT(); 
0660 120000    1813            lcall   _LCD_4BIT
0663           1814   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:432: InitPinADC(1, 5); // Configure P1.5 as analog input - signal 
0663 756005    1815            mov     _InitPinADC_PARM_2,#0x05
0666 758201    1816            mov     dpl,#0x01
0669 120000    1817            lcall   _InitPinADC
066C           1818   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:433: InitPinADC(2, 3); // Configure P2.3 as analog input - reference
066C 756003    1819            mov     _InitPinADC_PARM_2,#0x03
066F 758202    1820            mov     dpl,#0x02
0672 120000    1821            lcall   _InitPinADC
0675           1822   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:434: InitADC();
0675 120000    1823            lcall   _InitADC
0678           1824   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:435: waitms(500); // Give PuTTy a chance to start before sending
0678 9001F4    1825            mov     dptr,#0x01F4
067B 120000    1826            lcall   _waitms
067E           1827   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:436: printf("\x1b[2J"); // Clear screen using ANSI escape sequence.
067E 7430      1828            mov     a,#__str_0
0680 C0E0      1829            push    acc
0682 74CB      1830            mov     a,#(__str_0 >> 8)
0684 C0E0      1831            push    acc
0686 7480      1832            mov     a,#0x80
0688 C0E0      1833            push    acc
068A 120000    1834            lcall   _printf
068D 1581      1835            dec     sp
068F 1581      1836            dec     sp
0691 1581      1837            dec     sp
0693           1838   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:442: __FILE__, __DATE__, __TIME__);
0693           1839   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:441: "Compiled: %s, %s\n\n",
0693 74B0      1840            mov     a,#__str_4
0695 C0E0      1841            push    acc
0697 74CB      1842            mov     a,#(__str_4 >> 8)
0699 C0E0      1843            push    acc
069B 7480      1844            mov     a,#0x80
069D C0E0      1845            push    acc
069F 74F0      1846            mov     a,#__str_3
06A1 C0E0      1847            push    acc
06A3 74CB      1848            mov     a,#(__str_3 >> 8)
06A5 C0E0      1849            push    acc
06A7 7480      1850            mov     a,#0x80
06A9 C0E0      1851            push    acc
06AB 7430      1852            mov     a,#__str_2
06AD C0E0      1853            push    acc
06AF 74CC      1854            mov     a,#(__str_2 >> 8)
06B1 C0E0      1855            push    acc
06B3 7480      1856            mov     a,#0x80
06B5 C0E0      1857            push    acc
06B7 7470      1858            mov     a,#__str_1
06B9 C0E0      1859            push    acc
06BB 74CC      1860            mov     a,#(__str_1 >> 8)
06BD C0E0      1861            push    acc
06BF 7480      1862            mov     a,#0x80
06C1 C0E0      1863            push    acc
06C3 120000    1864            lcall   _printf
06C6 E581      1865            mov     a,sp
06C8 24F4      1866            add     a,#0xf4
06CA F581      1867            mov     sp,a
06CC           1868   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:443: while(1)
06CC           1869   L021002?:
06CC           1870   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:445: period = ReadPeriod();
06CC 120000    1871            lcall   _ReadPeriod
06CF 858210    1872            mov     _main_period_1_119,dpl
06D2 858311    1873            mov     (_main_period_1_119 + 1),dph
06D5 85F012    1874            mov     (_main_period_1_119 + 2),b
06D8 F513      1875            mov     (_main_period_1_119 + 3),a
06DA           1876   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:447: ReadPeak(period, vpeak);
06DA 752070    1877            mov     _ReadPeak_PARM_2,#_main_vpeak_1_119
06DD 752100    1878            mov     (_ReadPeak_PARM_2 + 1),#0x00
06E0 752240    1879            mov     (_ReadPeak_PARM_2 + 2),#0x40
06E3 851082    1880            mov     dpl,_main_period_1_119
06E6 851183    1881            mov     dph,(_main_period_1_119 + 1)
06E9 8512F0    1882            mov     b,(_main_period_1_119 + 2)
06EC E513      1883            mov     a,(_main_period_1_119 + 3)
06EE 120000    1884            lcall   _ReadPeak
06F1           1885   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:448: time_diff = ReadDiff();
06F1 120000    1886            lcall   _ReadDiff
06F4 858260    1887            mov     _main_time_diff_1_119,dpl
06F7 858361    1888            mov     (_main_time_diff_1_119 + 1),dph
06FA 85F062    1889            mov     (_main_time_diff_1_119 + 2),b
06FD F563      1890            mov     (_main_time_diff_1_119 + 3),a
06FF           1891   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:450: v_rms[0] = vpeak[0] / sqrtf(2); 
06FF 8570F0    1892            mov     _main_sloc0_1_0,_main_vpeak_1_119
0702 8571F1    1893            mov     (_main_sloc0_1_0 + 1),(_main_vpeak_1_119 + 1)
0705 8572F2    1894            mov     (_main_sloc0_1_0 + 2),(_main_vpeak_1_119 + 2)
0708 8573F3    1895            mov     (_main_sloc0_1_0 + 3),(_main_vpeak_1_119 + 3)
070B 900000    1896            mov     dptr,#(0x00&0x00ff)
070E E4        1897            clr     a
070F F5F0      1898            mov     b,a
0711 7440      1899            mov     a,#0x40
0713 120000    1900            lcall   _sqrtf
0716 AC82      1901            mov     r4,dpl
0718 AD83      1902            mov     r5,dph
071A AAF0      1903            mov     r2,b
071C FB        1904            mov     r3,a
071D C004      1905            push    ar4
071F C005      1906            push    ar5
0721 C002      1907            push    ar2
0723 C003      1908            push    ar3
0725 85F082    1909            mov     dpl,_main_sloc0_1_0
0728 85F183    1910            mov     dph,(_main_sloc0_1_0 + 1)
072B 85F2F0    1911            mov     b,(_main_sloc0_1_0 + 2)
072E E5F3      1912            mov     a,(_main_sloc0_1_0 + 3)
0730 120000    1913            lcall   ___fsdiv
0733 AA82      1914            mov     r2,dpl
0735 AB83      1915            mov     r3,dph
0737 ACF0      1916            mov     r4,b
0739 FD        1917            mov     r5,a
073A E581      1918            mov     a,sp
073C 24FC      1919            add     a,#0xfc
073E F581      1920            mov     sp,a
0740 8AC0      1921            mov     _main_v_rms_1_119,r2
0742 8BC1      1922            mov     (_main_v_rms_1_119 + 1),r3
0744 8CC2      1923            mov     (_main_v_rms_1_119 + 2),r4
0746 8DC3      1924            mov     (_main_v_rms_1_119 + 3),r5
0748           1925   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:451: v_rms[1] = vpeak[1] / sqrtf(2); 
0748 8574F0    1926            mov     _main_sloc0_1_0,(_main_vpeak_1_119 + 0x0004)
074B 8575F1    1927            mov     (_main_sloc0_1_0 + 1),((_main_vpeak_1_119 + 0x0004) + 1)
074E 8576F2    1928            mov     (_main_sloc0_1_0 + 2),((_main_vpeak_1_119 + 0x0004) + 2)
0751 8577F3    1929            mov     (_main_sloc0_1_0 + 3),((_main_vpeak_1_119 + 0x0004) + 3)
0754 900000    1930            mov     dptr,#(0x00&0x00ff)
0757 E4        1931            clr     a
0758 F5F0      1932            mov     b,a
075A 7440      1933            mov     a,#0x40
075C 120000    1934            lcall   _sqrtf
075F AE82      1935            mov     r6,dpl
0761 AF83      1936            mov     r7,dph
0763 AAF0      1937            mov     r2,b
0765 FB        1938            mov     r3,a
0766 C006      1939            push    ar6
0768 C007      1940            push    ar7
076A C002      1941            push    ar2
076C C003      1942            push    ar3
076E 85F082    1943            mov     dpl,_main_sloc0_1_0
0771 85F183    1944            mov     dph,(_main_sloc0_1_0 + 1)
0774 85F2F0    1945            mov     b,(_main_sloc0_1_0 + 2)
0777 E5F3      1946            mov     a,(_main_sloc0_1_0 + 3)
0779 120000    1947            lcall   ___fsdiv
077C 8582F0    1948            mov     _main_sloc0_1_0,dpl
077F 8583F1    1949            mov     (_main_sloc0_1_0 + 1),dph
0782 85F0F2    1950            mov     (_main_sloc0_1_0 + 2),b
0785 F5F3      1951            mov     (_main_sloc0_1_0 + 3),a
0787 E581      1952            mov     a,sp
0789 24FC      1953            add     a,#0xfc
078B F581      1954            mov     sp,a
078D 85F0C4    1955            mov     (_main_v_rms_1_119 + 0x0004),_main_sloc0_1_0
0790 85F1C5    1956            mov     ((_main_v_rms_1_119 + 0x0004) + 1),(_main_sloc0_1_0 + 1)
0793 85F2C6    1957            mov     ((_main_v_rms_1_119 + 0x0004) + 2),(_main_sloc0_1_0 + 2)
0796 85F3C7    1958            mov     ((_main_v_rms_1_119 + 0x0004) + 3),(_main_sloc0_1_0 + 3)
0799           1959   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:452: phase_diff = time_diff * 360.0 / period; 
0799 C060      1960            push    _main_time_diff_1_119
079B C061      1961            push    (_main_time_diff_1_119 + 1)
079D C062      1962            push    (_main_time_diff_1_119 + 2)
079F C063      1963            push    (_main_time_diff_1_119 + 3)
07A1 900000    1964            mov     dptr,#0x0000
07A4 75F0B4    1965            mov     b,#0xB4
07A7 7443      1966            mov     a,#0x43
07A9 120000    1967            lcall   ___fsmul
07AC AE82      1968            mov     r6,dpl
07AE AF83      1969            mov     r7,dph
07B0 AAF0      1970            mov     r2,b
07B2 FB        1971            mov     r3,a
07B3 E581      1972            mov     a,sp
07B5 24FC      1973            add     a,#0xfc
07B7 F581      1974            mov     sp,a
07B9 C010      1975            push    _main_period_1_119
07BB C011      1976            push    (_main_period_1_119 + 1)
07BD C012      1977            push    (_main_period_1_119 + 2)
07BF C013      1978            push    (_main_period_1_119 + 3)
07C1 8E82      1979            mov     dpl,r6
07C3 8F83      1980            mov     dph,r7
07C5 8AF0      1981            mov     b,r2
07C7 EB        1982            mov     a,r3
07C8 120000    1983            lcall   ___fsdiv
07CB 8582B0    1984            mov     _main_phase_diff_1_119,dpl
07CE 8583B1    1985            mov     (_main_phase_diff_1_119 + 1),dph
07D1 85F0B2    1986            mov     (_main_phase_diff_1_119 + 2),b
07D4 F5B3      1987            mov     (_main_phase_diff_1_119 + 3),a
07D6 E581      1988            mov     a,sp
07D8 24FC      1989            add     a,#0xfc
07DA F581      1990            mov     sp,a
07DC           1991   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:453: frequency = 1.0/ period;
07DC C010      1992            push    _main_period_1_119
07DE C011      1993            push    (_main_period_1_119 + 1)
07E0 C012      1994            push    (_main_period_1_119 + 2)
07E2 C013      1995            push    (_main_period_1_119 + 3)
07E4 900000    1996            mov     dptr,#0x0000
07E7 75F080    1997            mov     b,#0x80
07EA 743F      1998            mov     a,#0x3F
07EC 120000    1999            lcall   ___fsdiv
07EF AE82      2000            mov     r6,dpl
07F1 AF83      2001            mov     r7,dph
07F3 AAF0      2002            mov     r2,b
07F5 FB        2003            mov     r3,a
07F6 E581      2004            mov     a,sp
07F8 24FC      2005            add     a,#0xfc
07FA F581      2006            mov     sp,a
07FC           2007   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:455: printf("Vp_ref = %.3fV, Vp_sig = %.3fV, Phase Diff = %.3fdeg, f = %.3fHz\r", v_rms[0], v_rms[1], phase_diff, frequency);
07FC C006      2008            push    ar6
07FE C007      2009            push    ar7
0800 C002      2010            push    ar2
0802 C003      2011            push    ar3
0804 C0B0      2012            push    _main_phase_diff_1_119
0806 C0B1      2013            push    (_main_phase_diff_1_119 + 1)
0808 C0B2      2014            push    (_main_phase_diff_1_119 + 2)
080A C0B3      2015            push    (_main_phase_diff_1_119 + 3)
080C C0F0      2016            push    _main_sloc0_1_0
080E C0F1      2017            push    (_main_sloc0_1_0 + 1)
0810 C0F2      2018            push    (_main_sloc0_1_0 + 2)
0812 C0F3      2019            push    (_main_sloc0_1_0 + 3)
0814 C0C0      2020            push    _main_v_rms_1_119
0816 C0C1      2021            push    (_main_v_rms_1_119 + 1)
0818 C0C2      2022            push    (_main_v_rms_1_119 + 2)
081A C0C3      2023            push    (_main_v_rms_1_119 + 3)
081C 7430      2024            mov     a,#__str_5
081E C0E0      2025            push    acc
0820 74CD      2026            mov     a,#(__str_5 >> 8)
0822 C0E0      2027            push    acc
0824 7480      2028            mov     a,#0x80
0826 C0E0      2029            push    acc
0828 120000    2030            lcall   _printf
082B E581      2031            mov     a,sp
082D 24ED      2032            add     a,#0xed
082F F581      2033            mov     sp,a
0831           2034   ;        C:\Users\wongh\OneDrive - UBC\UBC\Year 2\ELEC 291\ELEC-291\Lab5\Lab5.c:456: waitms(500);
0831 9001F4    2035            mov     dptr,#0x01F4
0834 120000    2036            lcall   _waitms
0837 020000    2037            ljmp    L021002?
083A           2038            rseg R_CSEG
083A           2039   
0000           2040            rseg R_XINIT
0000           2041   
0000           2042            rseg R_CONST
0000           2043   __str_0:
0000 1B        2044            db 0x1B
0001 5B324A    2045            db '[2J'
0004 00        2046            db 0x00
0005           2047   __str_1:
0005 50686173  2048            db 'Phasor Meausrement'
     6F72204D
     65617573
     72656D65
     6E74
0017 0A        2049            db 0x0A
0018 54657374  2050            db 'Test signal: P1.5 and Reference signal: P'
     20736967
     6E616C3A
     2050312E
     3520616E
     64205265
     66657265
     6E636520
     7369676E
     616C3A20
     50
0041 322E33    2051            db '2.3'
0044 0A        2052            db 0x0A
0045 46696C65  2053            db 'File: %s'
     3A202573
004D 0A        2054            db 0x0A
004E 436F6D70  2055            db 'Compiled: %s, %s'
     696C6564
     3A202573
     2C202573
005E 0A        2056            db 0x0A
005F 0A        2057            db 0x0A
0060 00        2058            db 0x00
0061           2059   __str_2:
0061 433A      2060            db 'C:'
0063 5C        2061            db 0x5C
0064 55736572  2062            db 'Users'
     73
0069 5C        2063            db 0x5C
006A 776F6E67  2064            db 'wongh'
     68
006F 5C        2065            db 0x5C
0070 4F6E6544  2066            db 'OneDrive - UBC'
     72697665
     202D2055
     4243
007E 5C        2067            db 0x5C
007F 554243    2068            db 'UBC'
0082 5C        2069            db 0x5C
0083 59656172  2070            db 'Year 2'
     2032
0089 5C        2071            db 0x5C
008A 454C4543  2072            db 'ELEC 291'
     20323931
0092 5C        2073            db 0x5C
0093 454C4543  2074            db 'ELEC-291'
     2D323931
009B 5C        2075            db 0x5C
009C 4C        2076            db 'L'
009D 616235    2077            db 'ab5'
00A0 5C        2078            db 0x5C
00A1 4C616235  2079            db 'Lab5.c'
     2E63
00A7 00        2080            db 0x00
00A8           2081   __str_3:
00A8 4D617220  2082            db 'Mar  3 2025'
     20332032
     303235
00B3 00        2083            db 0x00
00B4           2084   __str_4:
00B4 31383A33  2085            db '18:37:06'
     373A3036
00BC 00        2086            db 0x00
00BD           2087   __str_5:
00BD 56705F72  2088            db 'Vp_ref = %.3fV, Vp_sig = %.3fV, Phase Diff = %.3fdeg, f = %.'
     6566203D
     20252E33
     66562C20
     56705F73
     6967203D
     20252E33
     66562C20
     50686173
     65204469
     6666203D
     20252E33
     66646567
     2C206620
     3D20252E
00F9 3366487A  2089            db '3fHz'
00FD 0D        2090            db 0x0D
00FE 00        2091            db 0x00
00FF           2092   
0003           2093            CSEG
0003           2094   
0003           2095   end
